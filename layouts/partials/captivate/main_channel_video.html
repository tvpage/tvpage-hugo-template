{{ $channel := index $.Site.Data.channels (printf "x%s" ($.Scratch.Get "settings").homechannelid ) }}
{{ if $channel }}
  {{ $.Scratch.SetInMap "settings" "channelData" $channel }}
{{ end }}
<main id="main-content" class="main-content">
    <div class="container">
        <div class="row">
          {{ partial (printf "%s/breadcrumbs.html" .Type) . }}
        </div>
        {{ $videoDetails := index $.Site.Data.videos (printf "x%s" .Params.videoid) }}
        <div class="row player-product">
          <div class="col-sm-10 col-md-10">
            <h1 class="video-title">{{ .Title }}</h1>
            <div id="player-holder">
              <div class="thumb" style='background-image: url({{ $videoDetails.asset.thumbnailUrl }});'>
              </div>
            </div>
          </div>
          <div class="col-sm-2 col-md-2">
            <h1 class="products-title">Related Products</h1>
            <div class="video-products-container">products</div>
          </div>
        </div>
        <div class="row container" style="position: relative">
          <h1 class="video-title-mobile">{{ .Title }} <span class="caret" data-toggle="collapse" data-target=".video-details-row.description .mobile" aria-expanded="false"></span></h1>
          <h2 class="section-header video-details-header">VIDEO DETAILS
            <div class="social-share">                
              SHARE: <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u={{ .Permalink }}" class="
              share-icon facebook"></a>
              <a target="_blank" href="https://twitter.com/share?text={{ .Title }}&url={{ .Permalink }}" class="share-icon twitter"></a>
            </div>
          </h2>
        </div>
        <div class="row video-details">
          <div class="col-sm-12 col-md-12 video-details-row">
            <strong>Published on: <span class="published-date">{{ $videoDetails.date_created }}</span></strong>
          </div>
          <div class="col-sm-12 col-md-12 video-details-row duration">
            <strong>Duration:</strong> {{ $videoDetails.asset.prettyDuration }}
          </div>
          <div class="col-sm-12 col-md-12 video-details-row description">
            <div class="desktop">{{ replace $videoDetails.description "\n" "<br/>" | safeHTML }}</div>
            <div class="collapse mobile">{{ replace $videoDetails.description "\n" "<br/>" | safeHTML }}</div>
          </div>
          <div class="col-sm-12 col-md-12 video-details-row btn-more show-more">
            <div class="btn-more-line"></div>
            <div class="btn-more-btn-container">
              <button type="button" class="btn btn-primary btn-more-button">SHOW MORE</button>
            </div>
          </div>
        </div>
        <div class="row container">
          <h2 class="section-header channel-videos-latest-videos">LATEST VIDEOS</h2>
          <h2 class="section-header channel-videos-latest-videos-mobile">MORE VIDEOS</h2>
        </div>
        <div id="tvp-video-container" class="row">
        {{ $channelid := .Params.channelid }}
        {{ $page := index $.Site.Data.channelVideos (printf "x%s_page_1" $channelid) }}
        {{ with $page.data }}
          {{ range $i, $p := $page.data }}
            {{ partial (printf "%s/video_thumbnail.html" $.Type) . }}
            {{ if eq (mod (add $i 1) 3) 0 }}<div class="col-sm-12"></div>{{ end }}
          {{ end }}
        {{ end }}
        </div>
        <div class="row container btn-more load-more">
          <div class="btn-more-line"></div>
            <div class="btn-more-btn-container">
              <button type="button" class="btn btn-primary btn-more-button">LOAD MORE</button>
            </div>
        </div>
    </div>
</main>
