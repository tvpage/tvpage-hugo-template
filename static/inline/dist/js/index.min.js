!function(){function a(){Utils.sendMessage({event:r.events.resize,height:Utils.getWidgetHeight()})}function b(a){a&&m.track("pk",{vd:a.entityIdParent,ct:a.id,pg:r.channelId})}function c(a){var b,c,d=a.length;for(c=0;c<d;c++)b=a[c],m.track("pi",{vd:b.entityIdParent,ct:b.id,pg:r.channelId})}function d(){w&&x&&(a(),r.profiling.widget_ready=Utils.now("parent"),Utils.sendProfileData(r))}function e(a,b){b||l.play(a),n.endpoint=t+"/videos/"+a+"/products",n.load("render",function(a){c(a),o&&(o.data=a[0],o.render())});var d,e,f,g=k.length;for(e=0;e<g;e++)d=k[e],a==d.id&&(f=d);f&&(q.innerHTML=f.title)}function f(){function b(a){if(Utils.stopEvent(a),a&&a.target){var b=Utils.getRealTargetByClass(a.target,"carousel-item");b&&e(b.getAttribute("data-id"))}}function c(){x=!0,Utils.remove(Utils.getById("skeleton").querySelector(".videos-skel-delete")),p.loadNext("render"),d()}function f(a){l.addAssets(a),r.channel.videos=k.concat(a),k=r.channel.videos}p=new Carousel("videos",{alignArrowsY:["center",".video-image-icon"],page:0,endpoint:u,params:Utils.addProps(B,s),data:k,slidesToShow:4,slidesToScroll:1,onClick:b,itemsTarget:".slick-carousel",itemsPerPage:4,parse:function(a){return a.title=Utils.trimText(a.title,50),a},templates:{list:v.videos.list,item:v.videos.item},responsive:[{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}}],onReady:c,onLoad:f,onResize:a},r),p.initialize(),p.render()}function g(){m=new Analytics({domain:location.hostname},r),m.initialize()}function h(){function e(a){this.el=Utils.getById(a),this.data={},this.handleClick()}function f(a){return a.title=Utils.trimText(a.title,25),a.price=Utils.trimPrice(a.price),a.actionText=a.actionText||"View Details",a}function g(){w=!0,d()}function h(a){Utils.stopEvent(a);var b=Utils.getRealTargetByClass(a.target,"product");if(b){var c=b.getAttribute("data-id");c&&(o.data=n.getDataItemById(c),o.render())}}function i(a){a&&(o=new e("featured-product"),o.data=a[0],o.render(),setTimeout(function(){c(a)},3e3))}function k(){Utils.removeClass(Utils.getById("dots-target-products"),"hide-abs")}var l=v.products;e.prototype.handleClick=function(){var a=this;this.el.addEventListener("click",function(c){b(a.data)})},e.prototype.render=function(){var a="",b=this.data;b&&l&&l.featured&&(a=Utils.tmpl(l.featured,b)),this.el.innerHTML=a},document.addEventListener("click",function(a){var c=Utils.getRealTargetByClass(a.target,"product"),d=c?Utils.attr(c,"data-id")||null:null;d&&b(n.getDataItemById(d))},!1),Utils.isMobile?(n=new Carousel("products",{appendDots:"#products-carousel-nav",dotsCenter:!0,dotsMax:10,dotsClass:"col py-3 hide-abs",endpoint:t+"/videos/"+j.id+"/products",clean:!0,itemsPerPage:1,loadMore:!1,itemsTarget:".slick-carousel",templates:{list:v.mobile.products.list,item:v.mobile.products.item},responsive:[{breakpoint:600,settings:{dots:!0,arrows:!1}}],params:C,parse:f,onRender:k,onReady:g,onResize:a},r),n.initialize(),n.load("render",function(a){setTimeout(function(){c(a)},3e3)})):(n=new Carousel("products",{alignArrowsY:["center",".carousel-dot-0"],dotsCenter:!0,dots:!0,dotsClass:"products-carousel-dots col py-3 hide-abs",clean:!0,loadMore:!1,endpoint:t+"/videos/"+j.id+"/products",itemsTarget:".slick-carousel",itemsPerPage:4,pageWrapStart:'<div class="carousel-item" >',pageWrapEnd:"</div>",templates:{list:v.products.list,item:v.products.item},params:C,parse:f,onRender:k,onReady:g,onResize:a,onClick:h},r),n.initialize(),n.load("render",i))}function i(){function a(a){var b=a.assetId;b&&e(b)}function b(a,b){Utils.sendMessage({event:r.events.playerChange,e:a,stateData:b}),"tvp:media:videoplaying"===a&&z&&(z=!1,Utils.profile(r,{metric_type:"video_playing",metric_value:Utils.now("parent")-r.profiling.video_playing.start}))}function c(a){if(a&&a.target){Utils.getRealTargetByClass(a.target,"tvplayer-playbutton")&&A&&(A=!1,r.profiling.video_playing={start:Utils.now("parent")})}}function d(){y||(y=!0,r.profiling.video_playing={start:Utils.now("parent")})}l=new Player("player-el",{data:r.channel.videos,ciTrack:!0,onNext:a,onChange:b,onClick:c,onPlayerReady:d},r),l.initialize()}var j,k,l,m,n,o,p,q,r=window.parent.__TVPage__.config[Utils.attr(document.body,"data-id")],s=r.channel.parameters,t=r.api_base_url,u=t+"/channels/"+r.channelId+"/videos",v=r.templates,w=!1,x=!1,y=!1,z=!0,A=!0,B={o:r.videos_order_by,od:r.videos_order_direction},C={o:r.products_order_by,od:r.products_order_direction};Utils.poll(function(){var a=r.channel.videos;return a&&a.length},function(){k=r.channel.videos,j=k[0],Utils.globalPoll(["jQuery","Utils","Player","Carousel","Analytics"],function(){i(),f(),g(),h()}),q=Utils.getById("widget-title"),q.innerHTML=j.title,Utils.addClass(q,"ready")})}();