!function(a,b,c,d,e){var f,g,h=0,i=0,j=a(".load-more .btn-more-button"),k=a("#tvp-desktop-search-input"),l=a("#brand-header-search-button"),m=a("#tvp-null-results"),n=a("#tvp-mobile-search-input"),o=a(".mobile-search-modal-cancel-btn"),p=a("#tvp-mobile-search-results"),q=a("#tvp-mobile-null-results"),r=!1,s=!!/iPhone|iPad|iPod/i.test(navigator.userAgent),t=!1,u=!1,v=!0,w=!1,x=null,y=[],z="/subscribe/"===window.location.pathname,A=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),B=navigator.userAgent.indexOf("Mac OS X")!=-1,C=navigator.userAgent.indexOf("Firefox")!=-1,D=function(a){return RegExp("msie"+(isNaN(a)?"":"\\s"+a),"i").test(navigator.userAgent)},E=(D(9)||D(10)||B&&C,function(a){var b=["January","February","March","April","May","June","July","August","September","October","November","December"],c=new Date(1e3*Number(a)),d=b[c.getMonth()],e=""+c.getDate()+",",f=c.getFullYear();return[d,e,f].join(" ")}),F=function(){var b=".latest-video-title",d=parseInt(a(b).css("max-height"))+1;r?0:parseInt(a(b).css("line-height"));c.each(a(b).find("span"),function(b,c){var e=b.offsetHeight;e>d?a(b).parent().addClass("tvp-custom-ellipsis"):a(b).parent().removeClass("tvp-custom-ellipsis")})},G={commonRequest:function(b,d,e){return a.ajax({url:b,cache:!1,dataType:"jsonp",data:c.extend({},K.selected,{p:null==d||void 0==d?0:d,n:(TVSite.isHomePage,6),s:null==e||void 0==e?"":e,"X-login-id":TVSite.loginId},u?{channelsLimit:TVSite.channelIds}:{})})},filters:function(){return a.ajax({url:TVSite.apiUrl+"codebook/display/video",dataType:"jsonp",data:{"X-login-id":TVSite.loginId,channelId:TVSite.channelId}})},products:function(a){var b=TVSite.apiUrl+"videos/"+a+"/products";return this.commonRequest(b,null,null)},channelInfo:function(a){var b=TVSite.apiUrl+"channels/"+a;return G.commonRequest(b,null,null)},video:function(){},videos:function(a,b,c){var d=TVSite.apiUrl+"videos/search",e=c;return void 0!==a&&null!==a&&(d=TVSite.apiUrl+"channels/"+a+"/videos"),this.commonRequest(d,b,e)}},H={liveResultHtml:'<li><a href="{url}" class="tvp-desktop-search-results-item clearfix"><div class="tvp-desktop-search-results-item-img-holder"><div class="tvp-desktop-search-results-item-img" style="background-image:url({asset.thumbnailUrl});+    \tbackground-position: 50% 50%;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" /></div></div><div class="tvp-desktop-search-results-item-text"><p class="tvp-desktop-search-results-item-title">{title}</p><p class="tvp-desktop-search-results-item-description">{description}</p></div></a></li>',videoTemplate:'<div class="col-sm-4 col-md-4 latest-video-container"><a href="{url}" class="latest-video" data-id="{id}"><div class="latest-video-thumbnail"><div class="content" ><img src="{asset.thumbnailUrl}" alt="{title}"><div class="latest-video-hover"><div class="play-icon"></div><p class="now-playing">NOW PLAYING</p></div></div></div><p class="latest-video-title"><span>{title}</span></p></a></div>',getResultUrl:function(a){var b=function(a){return"undefined"!=typeof a&&null!==typeof a&&a},c="";return a&&b(a)&&(c=TVSite.isSearchPage?TVSite.baseUrl+"/"+String(a.entityTitleParent).replace(/\s/g,"-").replace(/\./g,"")+"/"+String(a.titleTextEncoded).replace(/\s/g,"-")+"/"+(a.entityIdParent||TVSite.channelId)+"-"+a.id+"/":TVSite.baseUrl+"/"+(r||t||!t?TVSite.channelInfo.titleTextEncoded:String(a.entityTitleParent).replace(/\s/g,"-").replace(/\./g,""))+"/"+String(a.titleTextEncoded).replace(/\s/g,"-")+"/"+(a.entityIdParent||TVSite.channelId)+"-"+a.id),c.toLowerCase()},getLiveResultUrl:function(a){var b=function(a){return"undefined"!=typeof a&&null!==typeof a&&a},c="";return a&&b(a)&&(c=TVSite.baseUrl+"/"+String(a.entityTitleParent).replace(/\s/g,"-").replace(/\./g,"")+"/"+String(a.titleTextEncoded).replace(/\s/g,"-")+"/"+(a.entityIdParent||TVSite.channelId)+"-"+a.id+"/"),c.toLowerCase()},resetLiveSearch:function(){a("#tvp-desktop-search-results ul").empty().closest("#tvp-desktop-search-results-holder").hide()},showEndOfResults:function(){a(".tvp-end-of-results").length||(a("<p></p>").addClass("tvp-end-of-results").html("No more results").appendTo("#tvp-desktop-search-results ul"),this.checkResultsScroller())},createDesktopScroller:function(c){var d=null;return c&&a(c).children().length&&(d=new b(c,{interactiveScrollbars:!0,scrollX:!1,click:!0,mouseWheel:!0,scrollbars:!0,disablePointer:!0,disableTouch:!1,disableMouse:!1})),d},handleScrollEnd:function(){if(Math.abs(this.maxScrollY)-Math.abs(this.y)<10){var a=k.val();G.videos(null,h+1,a).done(function(a){H.handleVideoResults(a),h+=1})}},handleScrollEndMobile:function(){if(Math.abs(this.maxScrollY)-Math.abs(this.y)<10){var a=n.val();G.videos(null,h+1,a).done(function(a){H.handleMobileSearchResults(a),h+=1})}},checkResultsScroller:function(){f?setTimeout(function(){f.refresh()},0):(f=this.createDesktopScroller("#tvp-desktop-search-results-holder"),f.on("scrollEnd",this.handleScrollEnd))},checkResultsScrollerMobile:function(){g?setTimeout(function(){g.refresh()},0):(g=this.createDesktopScroller("#tvp-mobile-search-results-holder"),g.on("scrollEnd",this.handleScrollEndMobile))},tmpl:function(a,b){if(a&&"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return"undefined"!=typeof e&&null!==e?e:""})},stripHtml:function(a){var b=document.createElement("DIV");b.innerHTML=a;var c=b.textContent||b.innerText||"";return c},handleVideoResults:function(b){if(b.length){for(var c="",d="#tvp-desktop-search-results-holder",e=0;e<b.length;++e){var f=b[e];f.url=this.getLiveResultUrl(f),"description"in f&&(f.description=this.stripHtml(f.description)),c+=this.tmpl(this.liveResultHtml,f)}a(".brand-header-search-container").hasClass("connector")||a(".brand-header-search-container").addClass("connector"),a("#tvp-desktop-search-results ul").append(c).closest(d).show(),H.checkResultsScroller()}else H.showEndOfResults()},handleLoadMore:function(b){for(var c="",d=0;d<b.length;++d){var e=b[d];e.url=this.getResultUrl(e),y.push(e),c+=this.tmpl(this.videoTemplate,e)}a("#tvp-video-container").append(c),A!==!1&&s!==!1||J.onLoadMore(),L.showNowPlayingOverlay(x)},addFilters:function(b){var c=function(b,c){var d=a("<a/>").attr({value:b.code,href:"#"}),e=a("<li/>");return b.id&&d.attr("id",b.id),d.html(b.label||""),e.append(d[0]),e[0]};for(var d in b){var e=document.createDocumentFragment(),f="video_type"===d?"Type of Video":d.replace(/_/g," ");e.appendChild(c({code:null,label:f}));for(var g=b[d].options,h=0;h<(g?g.length:0);h++)g[h].hasValues&&e.appendChild(c(g[h]));var i=a("#"+d);1===e.childElementCount?(i.removeClass("dropdown-menu"),i.addClass("tvp-filter-inactive")):i.html(e)}},handleMobileSearchResults:function(b){if(b.length){var d='<li><div class="item"> <a href="{url}" class="latest-video"><div class="latest-video-thumbnail"><div class="content" style="background-image: url({asset.thumbnailUrl})"></div></div><div class="latest-video-title-mobile"> {title}</div> </a></div></li>',e="",f=this;c.each(b,function(a,c){var g=b[c];g.url=f.getLiveResultUrl(g),e+=f.tmpl(d,g)}),a("#tvp-result-list").append(e),a("#tvp-mobile-search-results").show(),H.checkResultsScrollerMobile()}},renderProd:function(b,c,d){var e="";if(b&&b.length)for(var f=0;f<b.length;f++){var g=JSON.parse(b[f].data||"");b[f].linkUrl=g.linkUrl,b[f].imageUrl=g.imageUrl,e+=H.tmpl(d,b[f])}e.length&&(a(c).html(e),a(c).length>0&&!a(c).is(":hidden"))}},I={desktop:function(a){return G.videos(null,null,a)},mobile:function(a){return G.videos(null,null,a)}},J={onLoadMore:function(){a("#tvp-video-container").on({click:function(a){TVSite.isPlayerPage},mouseover:function(b){if(a(this).data("id")!=x){var c=a(this).find(".latest-video-hover");c.hasClass("active")||c.addClass("active")}},mouseout:function(b){var c=a(this).find(".latest-video-hover");c.hasClass("active")&&c.removeClass("active")}},".latest-video")},Filters:function(){a("#product_category li a").on("click",function(b){b.preventDefault(),a("#product_category_text").text(a(this).text());var c=b.currentTarget.id;K.selected.product_category=b.currentTarget.text,i=0,c?K.filterVideos():(a("#product_category_text").text("Product Category"),K.selected.product_category={},K.reset())}),a("#video_type li a").on("click",function(b){b.preventDefault(),a("#video_type_text").text(a(this).text());var c=b.currentTarget.id;K.selected.video_type=b.currentTarget.text,i=0,c?K.filterVideos():(a("#video_type_text").text("Type of Video"),K.selected.video_type={},K.reset())})},VideoThumbnail:function(b){a(b).on("click",".latest-video",function(b){b.preventDefault();var c=a(this).attr("href"),d=a(this).find("span").text(),e=a(".breadcrumb").find("#breadcrumb-2");x=a(this).data("id"),L.loadSelectedVideo(x),e.find("span").empty().html(d),e.find("a").attr("href",c)})}};k.on("keypress",function(a){13==a.keyCode&&a.preventDefault()}),k.on("keyup",function(b){r=!1;var c=b.keyCode;if(37!==c&&38!==c&&39!==c&&40!==c){b.preventDefault();var d=a(b.target).val();H.resetLiveSearch(),m.find(".tvp-null-results-word").text(d),d?(h=0,u=!0,t=!1,I.desktop(d).done(function(b){u=!1;var c=k.val();b.length&&""!==c?(m.hide(),H.handleVideoResults(b)):(a(".brand-header-search-container").hasClass("connector")||a(".brand-header-search-container").addClass("connector"),""!==c?m.show():a(".brand-header-search-container").removeClass("connector"),H.resetLiveSearch())})):(m.hide(),a(".brand-header-search-container").hasClass("connector")&&a(".brand-header-search-container").removeClass("connector"),H.resetLiveSearch())}}),k.focus(function(){k.val()||(a(".brand-header-search-container").animate({width:"+=175"},"fast"),a(".brand-header-logo").animate({marginLeft:"-=175"},"fast"))}).blur(c.debounce(function(){k.val(""),H.resetLiveSearch(),m.hide(),a(".brand-header-search-container").animate({width:"-=175"},"fast"),a(".brand-header-logo").animate({marginLeft:"+=175"},"fast"),a(".brand-header-search-container").hasClass("connector")&&a(".brand-header-search-container").removeClass("connector")},300)),l.click(function(a){k.val()&&(window.location.href="/search?s="+k.val())}),n.on("keyup",function(b){b.preventDefault();var c=a(b.target).val();q.find("b").html(c),c?(u=!0,t=!1,I.mobile(c).done(function(b){u=!1,b.length?(a("#tvp-result-list").empty(),q.hide(),H.handleMobileSearchResults(b)):(a("#tvp-result-list").empty(),p.hide(),q.show())})):(q.hide(),p.hide(),g&&g.refresh(),a("#tvp-result-list").empty(),p.hide())}),o.on("click",function(b){b.preventDefault(),n.val(""),q.hide(),p.hide(),g&&g.refresh(),a("#tvp-result-list").empty(),p.hide()}),j.on("click",function(a){r=!0,i+=1,G.videos(TVSite.channelId,i,null).done(function(a){a.length?H.handleLoadMore(a):j.attr("disabled",!0)}),F()});var K={selected:{},defaultFilters:null,filters:{video_type:{},product_category:{}},haveActiveFilter:function(a){var b=!0;return b=!!K.selected.hasOwnProperty(a)&&"object"!=typeof K.selected[a]},reset:function(){var b=K.haveActiveFilter("product_category"),c=K.haveActiveFilter("video_type");c||b||a(".tvp-filter-reset").css("display","none"),j.attr("disabled",!1),t=!1,i=0,a("#tvp-video-container").empty(),G.videos(TVSite.channelId,i,null).done(function(a){a.length&&H.handleLoadMore(a)})},filterVideos:function(){a(".tvp-filter-reset").css("display","inline-block"),t=!0,0===i&&a("#tvp-video-container").empty(),G.videos(null,i,null).done(c.bind(function(a){i+=1,a.length&&H.handleLoadMore(a)},this))},initialize:function(){G.filters().done(c.bind(function(b){for(var d=0;d<b.length;d++){var e=b[d],f=e.code;if(f in this.filters)for(var g=["id","label","options"],h=0;h<g.length;h++)this.filters[f][g[h]]=e[g[h]]}H.addFilters(this.filters),J.Filters(),s?a(document).on("touchstart",".tvp-filter-reset",c.bind(function(){a("#product_category_text").text("Product Category"),a("#video_type_text").text("Type of Video"),K.selected={},this.reset()},this)):a(document).on("click",".tvp-filter-reset",c.bind(function(){a("#product_category_text").text("Product Category"),a("#video_type_text").text("Type of Video"),K.selected={},this.reset()},this))},this))}},L={isFirstPlay:!0,updateTitle:function(b){b&&(a("#video-playing-title").empty().html(b),a(".video-title-mobile .title").empty().html(b))},showPlayButton:function(){a("#html5-play-button").show().on("click",function(){window.TVPlayer.play(),a(this).hide()})},buildVideoData:function(a){var b=a.asset||{};b.sources=b.sources||[{file:b.videoId}],b.type=b.type||"youtube";var c=TVSite.channelVideosData,d="";return"object"!=typeof c&&"undefined"!=typeof c.id&&(d=c.id),b.analyticsObj={pg:TVSite.channelId||d,vd:a.id,li:TVSite.loginId},b},playVideo:function(a){if(a){M.destroy(),M.initialize({videoId:a.id,channelId:TVSite.channelId});var b=L.buildVideoData(a);A?(TVPlayer.cueVideo(b),"youtube"!=b.type&&L.showPlayButton()):TVPlayer.loadVideo(b);var c=L.getVideoUrl(a);this.isFirstPlay||L.updateSiteUrlAndTitle(c,a.title),this.isFirstPlay=!1,L.updateSocialShareLink(c,a),L.showNowPlayingOverlay(a.id)}},updateSiteUrlAndTitle:function(a,b){var c=a;c&&window.history&&history.pushState&&(history.pushState({state:1},null,c),"string"==typeof b&&(b=b),document.title=b)},updateSocialShareLink:function(b,c){a(".facebook").attr("href",function(a,c){return"https://www.facebook.com/sharer/sharer.php?u="+b}),a(".twitter").attr("href",function(a,d){return"https://twitter.com/share?text="+c.title+"%20%7C%0A&url="+b})},getVideoUrl:function(a){var b;if("undefined"!=typeof a.url)b=a.url;else{var c=TVSite.channelVideosData,d="/"+c.id+"-"+a.id,e="";a.titleTextEncoded&&a.titleTextEncoded.length>0&&(e="/"+a.titleTextEncoded);var f="";c.titleTextEncoded&&c.titleTextEncoded.length>0&&(f=TVSite.baseUrl+"/"+c.titleTextEncoded),b=f+e+d+"/"}return b.toLowerCase()},resizePlayer:function(){var b=a("#TVPagePlayer");!w&&b.length&&TVPlayer.resize(b.width(),b.height())},getNextVideo:function(a,b){"undefined"!=typeof a&&"function"==typeof b&&b(a==y.length-1?y[0]:y[a+1])},handleNextvideo:function(a){"object"==typeof a&&(L.updateTitle(a.title),P.updateDetails(a),L.startPlayback(a))},getVideoIndex:function(a,b){if("undefined"!=typeof a&&"function"==typeof b){var c=0;for(c;c<y.length;c++)if(a==y[c].id)return b(c);b(null)}},handleAutoNext:function(){L.updateVideoElements(),L.getVideoIndex(x,function(b){L.getNextVideo(b,a.proxy(L.handleNextvideo)),N.initialize({videoId:x})})},startPlayback:function(b){b&&"object"==typeof b&&(L.playVideo(b),x=b.id,G.products(x).done(function(b){H.renderProd(b,"#mobile-products-wrapper",a("#mobileProduct").html()),H.renderProd(b,"#desktop-products-wrapper",a("#desktopProduct").html()),H.renderProd(b,"#desktop-products-pop-ups",a("#productPopup").html())}),L.updateTitle(b.title))},handlePlayerReady:function(){if(y=TVSite.channelVideosData.videos,L.resizePlayer(),v&&"channelVideosData"in TVSite){var a=TVSite.channelVideosData.video;L.startPlayback(a),v=!1}},handlePlayerStateChange:function(a){"tvp:media:videoended"==a&&TVSite.isPlayerPage&&L.handleAutoNext()},updateVideoElements:function(){},loadSelectedVideo:function(a){L.getVideoIndex(x,function(a){L.handleNextvideo(y[a]),N.initialize({videoId:x}),P.updateDetails(y[a])})},showNowPlayingOverlay:function(b){var d=a(".latest-video"),e=c.find(d,function(c){return a(c).data("id")==b});d.find(".latest-video-hover").removeClass("now-playing"),a(e).find(".latest-video-hover").addClass("now-playing")}},M={status:!1,products:null,queue:{},productTemplate:'<a id="{id}" href="{data.linkUrl}" data-video-id="{entityIdParent}" target="_blank" class="in-time-product"><span class="in-time-unit in-time-title">{title}</span><span class="in-time-unit in-time-cta">VIEW DETAILS</span></a>',initialize:function(a){this.settings=a||{},this.setElement(),this.initializeProducts(),this.status=!0},setElement:function(){a("<div/>").attr("id","in-time-products").prependTo("#player-holder"),this.$el=a("#in-time-products")},getSpotTimeUrl:function(){if("channelId"in this.settings&&"videoId"in this.settings)return TVSite.apiUrl+"spot/link/time/"+this.settings.channelId+"/"+this.settings.videoId},getProducts:function(b){if(b&&"function"==typeof b)return a.ajax({url:this.getSpotTimeUrl(),dataType:"json",data:{"X-login-id":TVSite.loginId}}).done(b)},cleanPrice:function(a){if(a&&"string"==typeof a)if(a.indexOf(".")!==-1){var b=a.split(".").pop();b.length>2&&b.indexOf("00")!==-1?a=a.slice(0,-2):1===b.length&&(a+="0")}else a+=".00";return a},renderProducts:function(){for(var a="",b=0;b<this.products.length;++b){var c=this.products[b];"data"in c&&"string"==typeof c.data&&(c.data=JSON.parse(c.data)),a+=H.tmpl(this.productTemplate,c)}this.$el.html(a)},initializeProducts:function(){var a=this;this.getProducts(function(b,c){"success"===c&&b.length&&(a.products=b,a.renderProducts(),a.bindProductClick(),a.setQueue(),a.initializeWatcher())})},bindProductClick:function(){this.$el.find(".in-time-product").on("click",function(b){sendAnalytics({vd:a(this).data("videoId"),ct:a(this).attr("id")},"pk")})},setQueue:function(){if(this.products)for(var a=0;a<this.products.length;++a){var b=this.products[a],c=Number(b.startTime)+Number(b.duration);this.queue[b.id]=[Number(b.startTime),c]}},getPlayerTime:function(){return Math.floor(1e3*window.TVPlayer.getCurrentTime())},initializeWatcher:function(){var a=this;this.watcher=setInterval(function(){for(var b in a.queue){var c=a.getPlayerTime(),d=a.queue[b];c>d[0]&&c<d[1]&&a.showProduct(b),c<d[0]&&a.hideProduct(b),c>d[1]&&a.hideProduct(b)}},50)},hideProduct:function(a){"undefined"!==a&&this.$el.find("#"+a).css("top","-100px")},showProduct:function(a){var b=this.$el.find("#"+a);"-100px"===b.css("top")&&b.css("top","0")},destroy:function(){this.status&&(clearInterval(this.watcher),this.$el.find(".in-time-product").off(),this.$el.remove(),this.status=!1)}},N={breakpoint:992,products:[],$currentPopUp:null,currentId:0,isHorizontalScroll:!1,el:'[data-toggle="popover"]',prodSlider:null,config:{scrolly:{interactiveScrollbars:!0,scrollX:!1,mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0},scrollx:{scrollX:!0,scrollY:!1,mouseWheel:!0,tap:!0,click:!0}},initialize:function(b){this.destroy();var c=b||{},d=this;G.products(c.videoId).done(function(b){b.length?(d.products=b,d.renderProducts(b),O.registerProductPanel(a("#tvp-products-wrapper .tvp-product-image")),d.initializePopupProducts(),d.initializeSlider(),d.bindEvents()):(d.destroy(),a("#tvp-products-wrapper ul").html(""))})},renderProducts:function(b){var d='<li> <a data-id="{id}" href="{linkUrl}" target="_blank" class="analyticsClick"><div id="{id}" data-toggle="popover" class="tvp-product-image" data-videoId="{videoId}"><div class="content"> <img src="{imageUrl}" alt=""></div></div> </a></li>',e="";this.products=b,c.each(b,function(a,f){var g=b[f];"Y"===g.OUT_OF_STOCK&&c.isEmpty(g.price)?g.price="Out Of Stock":g.price.indexOf("$")<0&&(g.price="$"+g.price),g.videoId=x||TVSite.channelVideosData.video.id,e+=H.tmpl(d,g),Q.createProductSchema({name:g.title,image:g.imageUrl,description:g.description,mpn:g.mpn,price:g.price})}),a(".tvp-products-wrapper ul").html(e)},bindEvents:function(){var b=this;a(this.el).popover({placement:"left",template:'<div class="popover tvp-prod-hover" role="tooltip"><div class="arrow"></div><div class="popover-content tvp-prod-hover-content"></div></div>',html:!0,trigger:"manual",container:"div.player-product",content:function(){var d='<div class="tvp-prod-hover-img-container"><div class="content"> <img src="{imageUrl}" alt=""></div></div><div class="tvp-prod-hover-title">{title}</div><div class="tvp-prod-hover-price-rate"> <span class="price">{price}</span></div> <a data-id="{id}" href="{linkUrl}" target="_blank" class="btn btn-primary btn-more-button analyticsClick">VIEW DETAILS</a>',e="",f=a(this).attr("id"),g=c.filter(b.products,function(a){return a.id==f})[0];return e=H.tmpl(d,g)}}).on({mouseenter:function(){if(!A)if(0===b.currentId)a(this).popover("show");else{var c=a(this).attr("id");c!==b.currentId&&(a('div[id="'+b.currentId+'"][data-toggle="popover"]').popover("hide"),a(this).popover("show"))}},"show.bs.popover":function(){b.currentId=a(this).attr("id")},"hide.bs.popover":function(){b.currentId=0}}),a._data(a(".player-product")[0],"events")||a(".player-product").on("mouseleave",".popover",function(){a('div[id="'+b.currentId+'"]').popover("hide"),b.currentId=0}).on("mouseleave",function(){a('*[data-toggle="popover"]').popover("hide")}).on("click",".analyticsClick",function(a){a.stopPropagation()}),a(".player-product").on("mouseleave",".popover",function(){a('div[id="'+b.currentId+'"]').popover("hide"),b.currentId=0}).on("mouseleave",function(){a('*[data-toggle="popover"]').popover("hide")}),s?a(".analyticsClick").tap({link:!0,tap:function(){O.registerProductClick(a(this).data("id"))}}):a(".player-product").off("click").on("click",".analyticsClick",function(b){b.stopPropagation(),O.registerProductClick(a(this).data("id"))})},initializeSlider:function(){a(window).width()<this.breakpoint?(this.resizeWrapper(!0),this.isHorizontalScroll=!0):this.isHorizontalScroll=!1,this.prodSlider=new b("#tvp-products-wrapper",a(window).width()<this.breakpoint?this.config.scrollx:this.config.scrolly)},initializePopupProducts:function(){var b=this;a(this.el).popover({placement:function(a,b){return e.mq("(max-width: 1199px)")?"top":"left"},template:'<div class="popover tvp-prod-hover" role="tooltip"><div class="arrow"></div><div class="popover-content tvp-prod-hover-content"></div></div>',html:!0,trigger:"manual",container:"div.player-product",content:function(){var d='<div class="tvp-prod-hover-img-container"><div class="content"> <img src="{imageUrl}" alt=""></div></div><div class="tvp-prod-hover-title">{title}</div><div class="tvp-prod-hover-price-rate"> <span class="price">{price}</span></div> <a data-id="{id}" href="{linkUrl}" target="_blank" class="btn btn-primary btn-more-button analyticsClick">VIEW DETAILS</a>',e="",f=a(this).attr("id"),g=c.filter(b.products,function(a){return a.id==f})[0];return e=H.tmpl(d,g)}})},resizeWrapper:function(b){if(b){var d=0;c.each(a("#tvp-products-wrapper li"),function(b,c){d+=a(b).outerWidth()}),a("#tvp-products-wrapper ul").width(d)}else a("#tvp-products-wrapper ul").width("100%")},destroy:function(){a(this.el).popover("destroy"),this.prodSlider&&(this.prodSlider.destroy(),this.prodSlider=null)},resizeCheck:function(){a(window).width()<this.breakpoint&&!this.isHorizontalScroll?(this.isHorizontalScroll=!0,this.prodSlider.destroy(),this.resizeWrapper(!0),this.prodSlider=new b("#tvp-products-wrapper",this.config.scrollx)):a(window).width()>=this.breakpoint&&(this.isHorizontalScroll=!1,this.prodSlider.destroy(),this.resizeWrapper(!1),this.prodSlider=new b("#tvp-products-wrapper",this.config.scrolly))}},O={registerProductPanel:function(b){var d=this;c.each(b,function(b,c){d.sendAnalytics({vd:a(b).data("videoid"),ct:a(b).attr("id")},"pi")})},registerProductClick:function(a){this.sendAnalytics({vd:x||TVSite.channelVideosData.video.id,ct:a},"pk")},sendAnalytics:function(b,c){"object"==typeof b&&c&&_tvpa.push(["track",c,a.extend(b,{li:TVSite.loginId,pg:TVSite.channelId})])}},P={container:".video-details",updateDetails:function(b){a(this.container).find(".published-date").text(b.date_created).closest(this.container).find(".video-details-row.description .desktop, .mobile").html(function(a,c){return b.description.replace(/(?:\r\n|\r|\n)/g,"<br />")}).closest(this.container).find(".video-details-row.duration span").html(b.asset.prettyDuration),this.updatePublishedDate(),this.checkDetails()},updatePublishedDate:function(){a(this.container).find(".published-date").text(function(a,b){return E(b)})},checkDetails:function(){var b=a(this.container).find(".video-details-row.description"),c=b.find(".desktop").height(),d=b.height();d<c?(b.addClass("show-more-active"),a(this.container).find(".show-more").show()):a(this.container).find(".show-more").hide()},initializeShowMoreButton:function(){var b=a(this.container).find(".btn-more-btn-container button"),c=a(this.container).find(".description");b.on("click",function(b){b.preventDefault(),c.hasClass("expand-description")?(c.removeClass("expand-description").addClass("show-more-active"),a(this).html("SHOW MORE")):(c.addClass("expand-description").removeClass("show-more-active"),a(this).html("SHOW LESS"))})}},Q={createSchema:function(a){TVSite.isHomePage&&this.renderSchema(this.webPage(a)),TVSite.isPlayerPage&&this.renderSchema(this.videoObject(a)),TVSite.isChannelPage&&this.renderSchema(this.webPage(a))},renderSchema:function(a){var b=[],c=document.createElement("script");b.push(a),c.type="application/ld+json",c.text=JSON.stringify(b),document.querySelector("head").appendChild(c)},createProductSchema:function(a){var b={"@context":"http://schema.org/","@type":"Product",name:a.name,image:a.image,description:a.description,mpn:a.mpn,offers:{"@type":"Offer",priceCurrency:"USD",price:"Out Of Stock"===a.price?"0.00":a.price,availability:"Out Of Stock"===a.price?"http://schema.org/OutOfStock":"http://schema.org/InStock"}};this.renderSchema(b)},videoObject:function(a){return{"@context":"http://schema.org","@type":"VideoObject",name:a.title,description:a.description,thumbnailUrl:a.thumbnailUrl,uploadDate:a.uploadDate,duration:a.duration,contentUrl:a.contentUrl,embedUrl:a.embedUrl,PotentialAction:{"@type":"ViewAction",Target:a.contentUrl}}},viewAction:function(a){return{"@context":"http://schema.org","@type":"ViewAction",Target:a.contentUrl}},webPage:function(a){return{"@context":"http://schema.org","@type":"WebPage",name:a.title,description:a.description||"",PotentialAction:{"@type":"ViewAction",Target:a.contentUrl}}},productObject:function(a){return{"@context":"http://schema.org/","@type":"Product",name:a.name,image:a.image,description:a.description,mpn:"925872",offers:{"@type":"Offer",priceCurrency:"USD",price:a.price}}}};if(a(".slider").slick({infinite:!0,speed:900,slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:768,settings:{arrows:!1,slidesToShow:3,slidesToScroll:1},breakpoint:1119,settings:{arrows:!1,slidesToShow:4,slidesToScroll:1}}]}),A!==!1&&s!==!1||J.onLoadMore(),TVSite.isHomePage&&Q.createSchema({contentUrl:window.location.href,title:TVSite.channelInfo.title,description:TVSite.channelInfo.description}),TVSite.isChannelPage&&(K.initialize(),Q.createSchema({contentUrl:window.location.href,title:TVSite.channelInfo.title})),TVSite.isPlayerPage&&(window.TVPlayer=new TVPage.player({divId:"TVPagePlayer",swf:"//appcdn.tvpage.com//player/assets/tvp/tvp-1.5.2-flash.swf",displayResolution:L.playerResolution,analytics:{tvpa:!0},techOrder:L.playerTechOrder,onReady:L.handlePlayerReady,onStateChange:L.handlePlayerStateChange,controls:{active:!0,seekBar:{progressColor:"#779050"},floater:{removeControls:["tvplogo"]}}}),d&&(d.onchange=function(){w=!w}),a(window).resize(function(){w||L.resizePlayer(),N.resizeCheck()}),N.initialize({videoId:TVSite.channelVideosData.video.id}),Q.createSchema({title:TVSite.channelVideosData.video.title,description:TVSite.channelVideosData.video.description,thumbnailUrl:TVSite.channelVideosData.video.asset.thumbnailUrl,uploadDate:E(TVSite.channelVideosData.video.date_created),duration:TVSite.channelVideosData.video.asset.mediaDuration,contentUrl:"https://www.youtube.com/watch?v="+TVSite.channelVideosData.video.referenceId,embedUrl:"https://app.tvpage.com/swf/guide/"+TVSite.channelVideosData.video.titleTextEncoded+"?u="+TVSite.loginId+"&amp;p="+TVSite.channelInfo.id+"&amp;v="+TVSite.channelVideosData.video.id}),J.VideoThumbnail("#tvp-video-container"),P.updatePublishedDate(),P.checkDetails(),P.initializeShowMoreButton()),TVSite.isSearchPage){var R=a(".search-header"),S=function(){var a={};if(window.location&&"search"in location){for(var b=location.search.substr(1).split("&"),c=[],d=0;d<b.length;d++)c.push(b[d]);for(var d=0;d<c.length;d++){var e=c[d].split("=");a[e[0]]=decodeURIComponent(e[1])}}return a},T=function(a){a.length?(a.length<6?V.attr("disabled",!0):V.attr("disabled",!1),H.handleLoadMore(a)):V.attr("disabled",!0)},U=S(),V=a(".search-more .btn-more-button");V.attr("disabled",!0),R.find(".search-header-query").text(U.s),a.ajax({url:TVSite.apiUrl+"videos/search",dataType:"jsonp",data:{s:U.s,p:h,n:1e3,"X-login-id":TVSite.loginId,o:"date_created",od:"desc",channelsLimit:TVSite.channelIds}}).done(function(a){R.find(".search-count").html(a.length),a.length&&T(c.first(a,6))}),V.click(function(a){h+=1,G.videos(null,h,U.s).done(function(a){T(a)})})}if(a("#subscribe-header").on("click",function(b){b.preventDefault(),a("#subcribeModal").modal("show").find(".channel-title, .chkSubscribeAll").css("display","none")}),a("#subscribe-channel").on("click",function(b){return b.preventDefault(),A?(window.location.href="/subscribe/"+(TVSite.isChannelPage?"?channelId="+TVSite.channelId:""),!1):void a("#subcribeModal").modal("show").find(".channel-title, .chkSubscribeAll").css("display","block")}),a("#subcribeModal").on("show.bs.modal",function(b){TVSite.isPlayerPage&&window.TVPlayer.pause(),a(".subscribe-body").show(),a(".subscribed-body").hide()}).on("hidden.bs.modal",function(a){TVSite.isPlayerPage&&window.TVPlayer.play()}),a(".subscribe-button").on("click",function(b){b.preventDefault(),a(".subscribe-body").hide(),a(".subscribed-body").show()}),a("#mobile-menu").on("click",function(b){b.preventDefault(),a("#mobile-menu-modal").modal()}),a(".mobile.collapse").on({"show.bs.collapse":function(){a(".caret").animate({borderSpacing:-180},{step:function(b,c){a(this).css({"-webkit-transform":"rotate("+b+"deg)","-moz-transform":"rotate("+b+"deg)",transform:"rotate("+b+"deg)"})},duration:"medium",complete:function(){a(this).addClass("up").removeAttr("style")}},"linear")},"hide.bs.collapse":function(){a(".caret").animate({borderSpacing:180},{step:function(b,c){a(this).css({"-webkit-transform":"rotate("+b+"deg)","-moz-transform":"rotate("+b+"deg)",transform:"rotate("+b+"deg)"})},duration:"medium",complete:function(){a(this).removeClass("up").removeAttr("style")}},"linear")}}),a("#show-more-mobile").tap({link:!1,tap:function(){a(a("#show-more-mobile").data("target")).collapse("toggle")}}),a("#mobile-subscribe").click(function(a){a.preventDefault(),window.location.href="/subscribe"}),a("#mobile-search").on("click",function(b){b.preventDefault(),a("#mobile-search-modal").modal()}),z){var W=window.location.href,U=W.split("?");if(2===U.length){var X=U[1].split("=");2==X.length&&G.channelInfo(X[1]).done(function(b){var c='<div class="chkSubscribeAll"><input type="checkbox" name="" id="">Subscribe me  to all updates.</div>';a(".channel-title").empty().text(b.title),a("#mail").addClass("channel-check"),a(c).insertAfter(a("#mail"))})}}a(window).on("orientationchange",function(a){F()}),a(window).bind("pageshow",function(){k.val("")}),a("form").get(0).reset(),F()}(jQuery,window.IScroll,window._,window.BigScreen,window.Modernizr);