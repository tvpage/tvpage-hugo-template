!function(a,b){function c(){this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.getByClass=function(a){return b.getElementsByClassName(a||"")[0]},this.isFunction=function(a){return"function"==typeof a},this.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},this.formatDuration=function(a){if(void 0!==a){var b=new Date(0,0,0);b.setSeconds(Number(a));return(b.getHours()?b.getHours():"")+(b.getMinutes()<10?"0"+b.getMinutes():b.getMinutes())+":"+(b.getSeconds()<10?"0"+b.getSeconds():b.getSeconds())}},this.formatDate=function(a){var b=new Date(1e3*Number(a)),c=""+(b.getMonth()+1),d=""+b.getDate(),e=b.getFullYear();return c.length<2&&(c="0"+c),d.length<2&&(d="0"+d),[c,d,e].join("/")},this.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),void 0!==c}},this.debounce=function(a,b,c){var d=null;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},this.trimText=function(a,b){var c=a||"",d=b?Number(b):0;return a.length>d&&(c=c.substring(0,Number(d))+"..."),c},this.trimPrice=function(a){var b=a||"";return b=b.toString().replace(/[^0-9.]+/g,""),b=parseFloat(b).toFixed(2),b=b>0?"$"+b:""},this.tmpl=function(a,b){var c="";return a&&"object"==typeof b&&(c=a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return void 0!==e&&null!==e?e:""})),c}}a.Utils=new c}(window,document),function(a,b){function c(c,e){this.options=e||{},this.windowSize=(a.innerWidth||b.documentElement.clientWidth||b.body.clientWidth)<=200?"small":"medium",this.initialResize=!0,this.eventPrefix="tvp_"+(e.id||"").trim().replace(/-/g,"_");var f="small"==this.windowSize;this.itemsPerPage=f?2:e.items_per_page||6,this.itemsPerRow=1,this.loginId=e.loginId||e.loginid||0,this.channel=e.channel||{},this.channelId=e.channelid||e.channelId||null,this.loading=!1,this.isLastPage=!1,this.page=0,this.el="string"==typeof c?b.getElementById(c):c,this.loadBtn=this.el.querySelector(".tvp-sidebar-load"),this.container=this.el.querySelector(".tvp-sidebar-container"),this.sidebarTitle=this.el.querySelector(".tvp-sidebar-title"),this.onLoad=e.onLoad&&d(e.onLoad)?e.onLoad:null,this.onLoadEnd=e.onLoadEnd&&d(e.onLoadEnd)?e.onLoadEnd:null,this.onItemClick=e.onItemClick&&d(e.onItemClick)?e.onItemClick:null,this.render=function(){this.container.innerHTML="",e.title_text&&e.title_text.trim().length?this.sidebarTitle.innerHTML=e.title_text:this.sidebarTitle.parentNode.removeChild(this.sidebarTitle);for(var c=this.data.slice(0),d=[];c.length;)d.push(c.splice(0,this.itemsPerPage));for(var f=0;f<d.length;f++){for(var h=d[f],i=[];h.length;)i.push(h.splice(0,this.itemsPerRow));for(var j=b.createDocumentFragment(),k=0;i.length>k;k++){var l=b.createElement("div");l.classList.add("tvp-clearfix");for(var m=i[k],n=0;n<m.length;n++){var o=m[n],p="";void 0!==o.entity&&(p+=" tvp-exchange"),"medium"===g.windowSize&&this.itemsPerRow>1&&(p+=" col-6"),o.className=p;var q=e.templates["sidebar-item"];o.asset?o.asset.views=o.asset.views?o.asset.views.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" Views":"":o.asset.views="&nbsp;",o.title=Utils.trimText(o.title,50),l.innerHTML+=Utils.tmpl(q,o)}j.appendChild(l)}this.container.appendChild(j),a.parent&&a.parent.postMessage({event:this.eventPrefix+":render",height:this.el.offsetHeight+"px"},"*")}};var g=this;this.load=function(c){g.loading=!0,this.onLoad&&this.onLoad();var d=g.channel||{},f=d.parameters||{},h=this.options.api_base_url+"/channels/"+(d.id||g.channelId)+"/videos?X-login-id="+g.loginId;for(var i in f)h+="&"+i+"="+f[i];var j=e.callbackName||"tvp_"+Math.floor(555*Math.random());h+="&p="+g.page+"&n="+g.itemsPerPage+"&callback="+j;var k=b.createElement("script");k.src=h,a[j||"callback"]=function(a){(!a.length||a.length<g.itemsPerPage)&&(g.isLastPage=!0),g.data=a,c(a),g.loading=!1,g.onLoadEnd&&g.onLoadEnd()},b.body.appendChild(k)},this.next=function(){this.isLastPage?(this.page=0,this.isLastPage=!1):this.page++},this.resize=function(){var c=(a.innerWidth||b.documentElement.clientWidth||b.body.clientWidth)<=200?"small":"medium",d=function(){g.initialResize||a.parent&&a.parent.postMessage({event:g.eventPrefix+":resize",height:g.el.offsetHeight+"px"},"*")};if(g.windowSize!==c){g.windowSize=c;var f="small"===c;g.itemsPerPage=f?2:e.itemsPerPage||6,g.itemsPerRow=1,g.page=0,g.isLastPage=!1,g.load(function(){g.render(),d()})}else d();g.initialResize=!1},this.el.onclick=function(b){var c=b.target;if(c.classList.contains("tvp-video")){for(var d=c.id.split("-").pop(),e={},f=g.data,h=0;h<f.length;h++)f[h].id===d&&(e=f[h]);a.parent&&a.parent.postMessage({runTime:void 0!==a.__TVPage__?__TVPage__:null,event:g.eventPrefix+":video_click",selectedVideo:e,videos:f},"*")}},this.loadBtn.onclick=function(){g.loading||(g.next(),g.load(function(a){a.length?g.render(a):(g.next(),g.load(function(a){g.render(a)}))}))},this.load(function(b){b.length&&(g.render(b),a.parent&&a.parent.postMessage({event:g.eventPrefix+":render"},"*"))}),a.addEventListener("resize",Utils.debounce(this.resize,100))}var d=function(a){return"function"==typeof a};a.Grid=c}(window,document),function(a,b){var c=function(a,c){if(Utils.isset(a)&&Utils.isset(c)){var d=b.createDocumentFragment(),e=b.createElement("div"),f=c||{};e.id=f.id||"",e.classList.add("iframe-content"),e.innerHTML+=f.templates.sidebar,d.appendChild(e),a.appendChild(d)}},d=function(){var a=b.body,d={};Utils.isset(parent)&&Utils.isset(parent,"__TVPage__")&&Utils.isset(parent.__TVPage__,"config")&&(d=parent.__TVPage__.config[a.getAttribute("data-id")]);var e=JSON.parse(JSON.stringify(d)),f=d.name;c(a,d);var g=b.getElementById(f);e.onLoad=function(){g.classList.add("loading")},e.onLoadEnd=function(){g.classList.remove("loading")};var h=new Analytics;h.initConfig({logUrl:d.api_base_url+"/__tvpa.gif",domain:Utils.isset(location,"hostname")?location.hostname:"",firstPartyCookies:d.firstpartycookies,cookieDomain:d.cookiedomain,loginId:d.loginid}),h.track("ci",{li:d.loginid}),Grid(f,e)};!function(a){var c=b.createElement("script");c.type="text/javascript",c.src=a,b.body.appendChild(c)}(b.body.getAttribute("data-domain")+"sidebar-single/js/libs/analytics.js");var e=function(a){return void 0===a};if(e(a.Grid)||e(a.Utils)||e(a._tvpa)||e(a.Analytics)){var f=0;!function b(){setTimeout(function(){(e(a.Grid)||e(a.Utils)||e(a._tvpa)||e(a.Analytics))&&++f<50?b():d()},150)}()}else d()}(window,document);