!function(){function a(a,b){if(!b||!Utils.isObject(b))throw new Error("bad global config");var c=b.loginId;if(!c||isNaN(Number(c)))throw new Error("bad loginId");var d=b.api_base_url,e=a&&a.logUrl?a.logUrl:d?d+"/__tvpa.gif":null;if(!e)throw"can't build url";this.options=a||{},this.config=b,this.logUrl=e}a.prototype.getCookiesConfig=function(){var a=!!this.config.firstPartyCookies;if(a){var b=this.config.cookieDomain;if(Utils.hasDot(b))return{firstPartyCookies:a,cookieDomain:b};throw"bad cookie domain"}return{}},a.prototype.initialize=function(){var a={domain:this.options.domain,li:this.config.loginId,logUrl:this.logUrl};a=Utils.extend(a,this.getCookiesConfig()),Utils.globalPoll(["_tvpa"],function(){_tvpa.push(["config",a])}),this.options.ciTrack&&this.track("ci")},a.prototype.track=function(a,b){function c(a,b){if("pi"===a||"pk"===a)return{vd:b.entityIdParent,ct:b.id,pg:e.config.channelId}}if(!a)throw"need event";b=b||{li:this.config.loginId};var d,e=this;if(Array.isArray(b))d=function(){var a,d=b.length;for(a=0;a<d;a++)e.track("pi",c("pi",b[a]))};else{if(!Utils.isObject(b))throw"bad track data";d=function(){_tvpa.push(["track",a,c(b)])}}Utils.globalPoll(["_tvpa"],d)},window.Analytics=a}();