!function(a,b){function c(){this.initConfig=function(a){return d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)?void _tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}]):console.log("need config")},this.track=function(a,b){return a&&b&&_tvpa?void _tvpa.push(["track",a,b]):console.log("no data")}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c};a.Analytics=c}(window,document),function(a,b){function c(c,g,h){if(!c||!d(g)||!d(g.data)||g.data.length<=0)return console.log("bad args");this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!d(g.autoplay)&&Number(g.autoplay),this.autonext=!d(g.autonext)||Number(g.autonext),this.version=d(g.player_version)?g.player_version:null,this.progressColor=d(g.progress_color)?g.progress_color:null,this.transcript=d(g.transcript)?g.transcript:null,this.removeControls=d(g.remove_controls)?g.remove_controls:null,this.analytics=d(g.analytics)?g.analytics:null,this.overlay=d(g.overlay)?g.overlay:null,this.overlayColor=d(g.overlay_color)?g.overlay_color:null,this.overlayOpacity=d(g.overlay_opacity)?g.overlay_opacity:null,this.playButtonBackgroundColor=d(g.play_button_background_color)?g.play_button_background_color:null,this.playButtonBorderRadius=d(g.play_button_border_radius)?g.play_button_border_radius:null,this.playButtonBorderWidth=d(g.play_button_border_width)?g.play_button_border_width:null,this.playButtonBorderColor=d(g.play_button_border_color)?g.play_button_border_color:null,this.playButtonIconColor=d(g.play_button_icon_color)?g.play_button_icon_color:null,this.playButtonWidth=d(g.play_button_width)?g.play_button_width:null,this.playButtonHeight=d(g.play_button_height)?g.play_button_height:null,this.playText=d(g.play_text)?g.play_text:null,this.playTextSize=d(g.play_text_size)?g.play_text_size:null,this.playTextColor=d(g.play_text_color)?g.play_text_color:null,this.playTextFontFamily=d(g.play_text_font_family)?g.play_text_font_family:null,this.onResize=d(g.onResize)&&"function"==typeof g.onResize?g.onResize:null,this.onNext=d(g.onNext)&&"function"==typeof g.onNext?g.onNext:null,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var f=a[c];if(e(f))break;var h=f.asset;h.assetId=f.id,h.assetTitle=f.title,h.loginId=f.loginId,d(f,"events")&&f.events.length?(h.analyticsLogUrl=f.analytics,h.analyticsObj=f.events[1].data):h.analyticsObj={pg:d(f,"parentId")?f.parentId:d(g,"channel")?g.channel.id:0,vd:f.id,li:f.loginId},h.sources||(h.sources=[{file:h.videoId}]),h.type=h.type||"youtube",b.push(h)}return b}(g.data);var i=this;this.addOverlay=function(a){var c=b.createElement("div");c.classList.add("tvp-overlay"),c.style.backgroundImage='url("'+a+'")';var d=this.overlayColor?"#"+this.overlayColor:"transparent";c.innerHTML='<div class="tvp-overlay-cover" style="opacity:'+this.overlayOpacity+";background-image:linear-gradient(to bottom right,"+d+","+d+');"></div><div class="tvp-play-holder" style="height:'+this.playButtonHeight+';"><svg class="tvp-play" style="width:'+this.playButtonWidth+";height:"+this.playButtonHeight+";background-color:#"+this.playButtonBackgroundColor+";border:"+this.playButtonBorderWidth+" solid #"+this.playButtonBorderColor+";border-radius:"+this.playButtonBorderRadius+'%;" viewBox="0 0 200 200"><polygon fill="#'+this.playButtonIconColor+'" points="70, 55 70, 145 145, 100"></polygon></svg><div class="tvp-play-text" style="font-family:'+this.playTextFontFamily+";font-size:"+this.playTextSize+";color:#"+this.playTextColor+'">'+this.playText+"</span></div>";var e=function(){i.instance&&(this.removeEventListener("click",e,!1),this.parentNode.removeChild(this),i.instance.play())};c.addEventListener("click",e),this.el.appendChild(c)},this.play=function(a,b){if(!a)return console.log("need asset");var c=!1,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(e||d(this.autonext)&&!this.autonext)&&(c=!0):(e||d(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:d(location,"hostname")?location.hostname:"",loginId:a.loginId};d(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?(this.instance.cueVideo(a),("mp4"===a.type||this.overlay)&&this.addOverlay(a.thumbnailUrl)):this.instance.loadVideo(a)},this.resize=function(){if(i.instance&&!i.isFullScreen){var a,b;if(arguments.length&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=i.el.parentNode;a=c.clientWidth,b=c.clientHeight}i.instance.resize(a,b),this.onResize&&(this.onResize(i.initialResize,[a,b]),i.initialResize=!1)}};var j=0;!function b(){setTimeout(function(){d(a,"TVPage")&&d(a,"_tvpa")?new TVPage.player({techOrder:"html5,flash",analytics:{tvpa:i.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+i.version+"-flash.swf",onReady:function(b,c){i.instance=c,i.resize(),d(a,"BigScreen")&&(BigScreen.onchange=function(){i.isFullScreen=!i.isFullScreen}),a.location!==a.parent.location?a.addEventListener("message",function(a){if(a&&d(a,"data")&&d(a.data,"event")&&"_tvp_widget_holder_resize"===a.data.event){var b=a.data.size||[];i.resize(b[0],b[1])}}):a.addEventListener("resize",f(function(){i.resize()},60)),i.el.querySelector(".tvp-progress-bar").style.backgroundColor=i.progressColor;var e=0;if(h&&h.length)for(var g=0;g<i.assets.length;g++)i.assets[g].assetId===h&&(e=g);i.current=e,i.play(i.assets[i.current]),a.DEBUG&&console.debug("endTime = "+performance.now())},onStateChange:function(a){if("tvp:media:videoended"===a){i.current++,i.assets[i.current]||(i.current=0);var b=i.assets[i.current];i.play(b,!0),i.onNext&&i.onNext(b)}},divId:i.el.id,controls:{active:!0,floater:{removeControls:i.removeControls,transcript:i.transcript}}}):++j<50?b():console.log("limit reached")},150)}()}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c},e=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},f=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}};a.Player=c}(window,document),function(a){function b(){a.body.classList.contains("dynamic")&&!function(b,c){i(b,a.body),h(c,b,function(a){c.data=a||[],e({src:c.domain+"/solo-cta/options.json",cbName:"tvpcallback"},function(a){if(a){var d=a.option,e={};for(var g in d){var h=d[g];e[h.code]=h.value}c=f(c,e),new Player("tvp-player-el-"+b,c)}})})}(c(),g("dynamic"))}var c=function(){return"tvp_"+Math.floor(50005*Math.random())},d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c},e=function(b,c){var d=a.createElement("script");if(d.src=b.src,c&&"function"==typeof c){window[b.cbName||"callback"]=c;var e=b.body||a.body;e.appendChild(d)}},f=function(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},g=function(b){var c=function(a){var b={};return d(a)&&d(a,"__TVPage__")&&d(a.__TVPage__,"config")?b=a.__TVPage__.config:console.log("need config")},e={};if("dynamic"===b){var f=c(parent),g=a.body.getAttribute("data-id");if(!d(f,g))return console.log("need settings");e=f[g],e.name=g,e.domain=a.body.getAttribute("data-domain")||""}else if("inline"===b&&b&&b.length){var f=c(parent);e=f[b],e.name=b}else if("static"===b){var f=c(window),g=a.body.getAttribute("data-id");if(!d(f,g))return console.log("need settings");e=f[g],e.name=g}return e},h=function(a,b,c){e({src:function(){var c=a.channel,d=c.parameters,e="//api.tvpage.com/v1/channels/"+c.id+"/videos?X-login-id="+a.loginid;for(var f in d)e+="&"+f+"="+d[f];return e+="&callback="+b}(),cbName:b},c)},i=function(b,c){if(!b||!c)return console.log("need target");var d=a.createDocumentFragment(),e=a.createElement("div");e.classList.add("tvp-player"),e.innerHTML='<div id="tvp-player-el-'+b+'" class="tvp-player-el"></div></div>',d.appendChild(e),c.appendChild(d)};b()}(document);