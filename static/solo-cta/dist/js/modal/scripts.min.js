!function(a,b){function c(){this.getByClass=function(a){return b.getElementsByClassName(a||"")[0]},this.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),void 0!==c}},this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},this.tmpl=function(a,b){var c=b.title||"";if(c=c.length>40?c.substring(0,40)+"...":c,b.title=c,a&&"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return void 0!==e&&null!==e?e:""})}}a.Utils=new c}(window,document),function(a,b){function c(){this.initConfig=function(a){if(!(d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)))return console.log("need config");_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){if(!a||!b||!_tvpa)return console.log("no data");_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c};a.Analytics=c}(window,document),function(a,b){function c(c,g,h){if(!c||!d(g)||!d(g.data)||g.data.length<=0)return console.log("bad args");this.options=g,this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!d(g.autoplay)&&Number(g.autoplay),this.autonext=!d(g.autonext)||Number(g.autonext),this.version=d(g.player_version)?g.player_version:null,this.progressColor=d(g.progress_color)?g.progress_color:null,this.transcript=d(g.transcript)?g.transcript:null,this.removeControls=d(g.remove_controls)?g.remove_controls:null,this.analytics=d(g.analytics)?g.analytics:null,this.overlay=d(g.overlay)?g.overlay:null,this.onResize=d(g.onResize)&&f(g.onResize)?g.onResize:null,this.onNext=d(g.onNext)&&f(g.onNext)?g.onNext:null,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var f=a[c];if(e(f))break;var h=f.asset;h.assetId=f.id,h.assetTitle=f.title,h.loginId=f.loginId,d(f,"events")&&f.events.length?(h.analyticsLogUrl=f.analytics,h.analyticsObj=f.events[1].data):h.analyticsObj={pg:d(f,"parentId")?f.parentId:d(g,"channel")?g.channel.id:0,vd:f.id,li:f.loginId},h.sources||(h.sources=[{file:h.videoId}]),h.type=h.type||"youtube",b.push(h)}return b}(g.data);var i=this;this.getOption=function(a){return this.options.hasOwnProperty(a)?this.options.hasOwnProperty(a):null},this.addOverlay=function(a){var c=b.createElement("div");c.className="tvp-overlay",c.style.backgroundImage='url("'+a.thumbnailUrl+'")',c.innerHTML='<div class="tvp-overlay-cover"></div><svg class="tvp-play" viewBox="0 0 200 200"><polygon points="70, 55 70, 145 145, 100"></polygon></svg>';var d=function(){(function(){this.removeEventListener("click",d,!1),this.parentNode.removeChild(this)}).call(this),i.instance&&i.instance.play()};c.removeEventListener("click",d,!1),c.addEventListener("click",d,!1),this.el.appendChild(c)},this.play=function(a,b){if(!a)return console.log("need asset");var c=!1,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(e||d(this.autonext)&&!this.autonext)&&(c=!0):(e||d(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:d(location,"hostname")?location.hostname:"",loginId:a.loginId};d(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?(this.instance.cueVideo(a),("mp4"===a.type||this.overlay)&&this.addOverlay(a)):this.instance.loadVideo(a)},this.resize=function(){if(i.instance&&!i.isFullScreen){var a,b;if(arguments.length>1&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=i.el.parentNode;a=c.clientWidth,b=c.clientHeight}i.instance.resize(a,b),i.onResize&&(i.onResize(i.initialResize,[a,b]),i.initialResize=!1)}};var j=0;!function b(){setTimeout(function(){if(d(a,"TVPage")&&d(a,"_tvpa")){var c,e={techOrder:"html5,flash",mediaProviders:"tvpage,youtube",analytics:{tvpa:i.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+i.version+"-flash.swf",onReady:function(b,c){if(i.instance=c,i.resize(),d(a,"BigScreen")&&(BigScreen.onchange=function(){i.isFullScreen=!i.isFullScreen}),a.location!==a.parent.location&&/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(navigator.userAgent)&&!a.MSStream){var e=function(a){if(a&&d(a,"data")&&d(a.data,"event")&&"tvp_"+g.id.replace(/-/g,"_")+":modal_holder_resize"===a.data.event){var b=a.data.size||[];i.resize(b[0],b[1])}};a.removeEventListener("message",e,!1),a.addEventListener("message",e,!1)}else{var f=Utils.debounce(i.resize,50);a.removeEventListener("message",f,!1),a.addEventListener("resize",f)}i.el.querySelector(".tvp-progress-bar").style.backgroundColor=i.progressColor;var j=0;if(h&&h.length)for(var k=0;k<i.assets.length;k++)i.assets[k].assetId===h&&(j=k);i.current=j,i.play(i.assets[i.current])},onStateChange:function(a){if("tvp:media:videoended"===a){i.current++,i.assets[i.current]||(i.current=0);var b=i.assets[i.current];i.play(b,!0),i.onNext&&i.onNext(b)}},divId:i.el.id,controls:{active:!0,floater:{removeControls:i.removeControls,transcript:i.transcript}}},f={techOrder:1,analytics:1,apiBaseUrl:1,swf:1,controls:1,width:1,height:1,mediaProviders:1,preload:1};for(c in i.options)e.hasOwnProperty(c)&&!f.hasOwnProperty(c)||(e[c]=i.options[c]);i.player=new TVPage.player(e)}else++j<50?b():console.log("limit reached")},150)}()}var d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},e=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},f=function(a){return void 0!==a};a.Player=c}(window,document),function(a,b){var c=null,d="tvp_"+(b.body.getAttribute("data-id")||"").replace(/-/g,"_"),e=function(){var b=Utils.getByClass("iframe-content"),e=function(c){var e=JSON.parse(JSON.stringify(c.runTime));e.data=c.data,e.onResize=function(){setTimeout(function(){a.parent&&a.parent.postMessage({event:d+":modal_resize",height:b.offsetHeight+"px"},"*")},0)},e.onNext=function(b){b&&setTimeout(function(){a.parent&&a.parent.postMessage({event:d+":player_next",next:b},"*")},0)},new Player("tvp-player-el",e,c.selectedVideo.id)};a.addEventListener("message",function(a){if(a&&Utils.isset(a,"data")&&Utils.isset(a.data,"event")){var b=a.data;if(d+":modal_data"===b.event){e(b);var f=b.runTime;f.loginid||f.loginId;c=Utils.isset(f.channel)&&Utils.isset(f.channel.id)?f.channel.id:f.channelId}}}),setTimeout(function(){a.parent&&a.parent.postMessage({event:d+":modal_initialized",height:b.offsetHeight+20+"px"},"*")},0)},f=function(a){return void 0===a};if(f(a.TVPage)||f(a._tvpa)||f(a.Utils)||f(a.Analytics)||f(a.Player)){var g=0;!function b(){setTimeout(function(){f(a.TVPage)||f(a._tvpa)||f(a.Utils)||f(a.Analytics)||f(a.Player)?++g<50?b():console.log("limit reached"):e()},150)}()}else e()}(window,document);