!function(a,b){function c(){this.getByClass=function(a){return b.getElementsByClassName(a||"")[0]},this.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),"undefined"!=typeof c}},this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},this.tmpl=function(a,b){var c=b.title||"";if(c=c.length>40?c.substring(0,40)+"...":c,b.title=c,a&&"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return"undefined"!=typeof e&&null!==e?e:""})}}a.Utils=new c}(window,document),function(a,b){function c(){this.initConfig=function(a){return d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)?void _tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}]):console.log("need config")},this.track=function(a,b){return a&&b&&_tvpa?void _tvpa.push(["track",a,b]):console.log("no data")}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c};a.Analytics=c}(window,document),function(a,b){function c(c,h,i){if(!c||!d(h)||!d(h.data)||h.data.length<=0)return console.log("bad args");this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!d(h.autoplay)&&Number(h.autoplay),this.autonext=!d(h.autonext)||Number(h.autonext),this.version=d(h.player_version)?h.player_version:null,this.progressColor=d(h.progress_color)?h.progress_color:null,this.transcript=d(h.transcript)?h.transcript:null,this.removeControls=d(h.remove_controls)?h.remove_controls:null,this.analytics=d(h.analytics)?h.analytics:null,this.overlay=d(h.overlay)?h.overlay:null,this.overlayColor=d(h.overlay_color)?h.overlay_color:null,this.overlayOpacity=d(h.overlay_opacity)?h.overlay_opacity:null,this.playButtonBackgroundColor=d(h.play_button_background_color)?h.play_button_background_color:null,this.playButtonBorderRadius=d(h.play_button_border_radius)?h.play_button_border_radius:null,this.playButtonBorderWidth=d(h.play_button_border_width)?h.play_button_border_width:null,this.playButtonBorderColor=d(h.play_button_border_color)?h.play_button_border_color:null,this.playButtonIconColor=d(h.play_button_icon_color)?h.play_button_icon_color:null,this.playButtonWidth=d(h.play_button_width)?h.play_button_width:null,this.playButtonHeight=d(h.play_button_height)?h.play_button_height:null,this.playText=d(h.play_text)?h.play_text:null,this.playTextSize=d(h.play_text_size)?h.play_text_size:null,this.playTextColor=d(h.play_text_color)?h.play_text_color:null,this.playTextFontFamily=d(h.play_text_font_family)?h.play_text_font_family:null,this.playTextPosition=d(h.play_text_position)?h.play_text_position:null,this.onClick=d(h.onClick)&&e(h.onClick)?h.onClick:null,this.onResize=d(h.onResize)&&e(h.onResize)?h.onResize:null,this.onNext=d(h.onNext)&&e(h.onNext)?h.onNext:null,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var e=a[c];if(f(e))break;var g=e.asset;g.assetId=e.id,g.assetTitle=e.title,g.loginId=e.loginId,d(e,"events")&&e.events.length?(g.analyticsLogUrl=e.analytics,g.analyticsObj=e.events[1].data):g.analyticsObj={pg:d(e,"parentId")?e.parentId:d(h,"channel")?h.channel.id:0,vd:e.id,li:e.loginId},g.sources||(g.sources=[{file:g.videoId}]),g.type=g.type||"youtube",b.push(g)}return b}(h.data);var j=this;this.addOverlay=function(a){var c=b.createElement("div");c.classList.add("tvp-overlay"),c.style.backgroundImage='url("'+a.thumbnailUrl+'")';var d=this.overlayColor?"#"+this.overlayColor:"transparent",e='<div class="tvp-overlay-cover" style="opacity:'+this.overlayOpacity+";background-image:linear-gradient(to bottom right,"+d+","+d+');"></div><div class="tvp-play-holder" style="height:'+this.playButtonHeight+';"><svg class="tvp-play" style="width:'+this.playButtonWidth+";height:"+this.playButtonHeight+";background-color:#"+this.playButtonBackgroundColor+";border:"+this.playButtonBorderWidth+" solid #"+this.playButtonBorderColor+";border-radius:"+this.playButtonBorderRadius+'%;" viewBox="0 0 200 200"><polygon fill="#'+this.playButtonIconColor+'" points="70, 55 70, 145 145, 100"></polygon></svg>',f='<div class="tvp-play-text',g="font-family:"+this.playTextFontFamily+";font-size:"+this.playTextSize+";color:#"+this.playTextColor+";";if(this.playTextPosition){var h=this.playTextPosition.split(" ");f+=' abs" style=" '+g+"bottom:"+h[0]+";left:"+h[1]+'; ">'+a.title+"</span></div>",e=f+e}else f+='" style=" '+g+' ">'+this.playText+"</span></div>",e+=f;c.innerHTML=e;var i=function(){var a=function(){this.removeEventListener("click",i,!1),this.parentNode.removeChild(this)};j.onClick?j.onClick():j.instance&&(a.call(this),j.instance.play())};c.addEventListener("click",i),this.el.appendChild(c)},this.play=function(a,b){if(!a)return console.log("need asset");var c=!1,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(e||d(this.autonext)&&!this.autonext)&&(c=!0):(e||d(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:d(location,"hostname")?location.hostname:"",loginId:a.loginId};d(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?(this.instance.cueVideo(a),("mp4"===a.type||this.overlay)&&this.addOverlay(a)):this.instance.loadVideo(a)},this.resize=function(){if(j.instance&&!j.isFullScreen){var a,b;if(arguments.length&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=j.el.parentNode;a=c.clientWidth,b=c.clientHeight}j.instance.resize(a,b),this.onResize&&(this.onResize(j.initialResize,[a,b]),j.initialResize=!1)}};var k=0;!function b(){setTimeout(function(){d(a,"TVPage")&&d(a,"_tvpa")?new TVPage.player({techOrder:"html5,flash",analytics:{tvpa:j.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+j.version+"-flash.swf",onReady:function(b,c){j.instance=c,j.resize(),d(a,"BigScreen")&&(BigScreen.onchange=function(){j.isFullScreen=!j.isFullScreen}),a.location!==a.parent.location?a.addEventListener("message",function(a){if(a&&d(a,"data")&&d(a.data,"event")&&"_tvp_widget_holder_resize"===a.data.event){var b=a.data.size||[];j.resize(b[0],b[1])}}):a.addEventListener("resize",g(function(){j.resize()},60)),j.el.querySelector(".tvp-progress-bar").style.backgroundColor=j.progressColor;var e=0;if(i&&i.length)for(var f=0;f<j.assets.length;f++)j.assets[f].assetId===i&&(e=f);j.current=e,j.play(j.assets[j.current]),a.DEBUG&&console.debug("endTime = "+performance.now())},onStateChange:function(a){if("tvp:media:videoended"===a){j.current++,j.assets[j.current]||(j.current=0);var b=j.assets[j.current];j.play(b,!0),j.onNext&&j.onNext(b)}},divId:j.el.id,controls:{active:!0,floater:{removeControls:j.removeControls,transcript:j.transcript}}}):++k<50?b():console.log("limit reached")},150)}()}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c},e=function(a){return"undefined"!=typeof a},f=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},g=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}};a.Player=c}(window,document),function(a,b){var c,d,e=function(){var b=Utils.getByClass("iframe-content"),e=function(c){var d=JSON.parse(JSON.stringify(c.runTime));d.data=c.data,d.onResize=function(c,d){a.parent&&a.parent.postMessage({event:"tvp_solo_cta:modal_resized",height:b.offsetHeight+"px"},"*")},d.onNext=function(b){a.parent&&b&&a.parent.postMessage({event:"tvp_solo_cta:player_next",next:b},"*")};var e=new Player("tvp-player-el",d,c.selectedVideo.id);a.addEventListener("resize",Utils.debounce(function(){e.resize()},85))};a.addEventListener("message",function(a){if(a&&Utils.isset(a,"data")&&Utils.isset(a.data,"event")){var b=a.data;if("tvp_solo_cta:modal_data"===b.event){e(b);var f=b.runTime.loginid||b.runTime.loginId;d=b.runTime.channel.id||b.runTime.channelid,c=new Analytics,c.initConfig({logUrl:"//api.tvpage.com/v1/__tvpa.gif",domain:Utils.isset(location,"hostname")?location.hostname:"",loginId:f})}}}),setTimeout(function(){a.parent&&a.parent.postMessage({event:"tvp_solo_cta:modal_initialized",height:b.offsetHeight+"px"},"*")},0)},f=function(a){return"undefined"==typeof a};if(f(a.TVPage)||f(a._tvpa)||f(a.Utils)||f(a.Analytics)||f(a.Player)){var g=0;!function b(){setTimeout(function(){f(a.TVPage)||f(a._tvpa)||f(a.Utils)||f(a.Analytics)||f(a.Player)?++g<50?b():console.log("limit reached"):e()},150)}()}else e()}(window,document);