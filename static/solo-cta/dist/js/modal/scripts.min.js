!function(a,b){function c(){this.getByClass=function(a){return b.getElementsByClassName(a||"")[0]},this.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),void 0!==c}},this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},this.tmpl=function(a,b){var c=b.title||"";if(c=c.length>40?c.substring(0,40)+"...":c,b.title=c,a&&"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return void 0!==e&&null!==e?e:""})}}a.Utils=new c}(window,document),function(a,b){function c(){this.initConfig=function(a){if(!(d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)))return console.log("need config");_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){if(!a||!b||!_tvpa)return console.log("no data");_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c};a.Analytics=c}(window,document),function(a,b){function c(c,h,i){if(!c||!d(h)||!d(h.data)||h.data.length<=0)return console.log("bad args");this.options=h,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!d(h.autoplay)&&Number(h.autoplay),this.autonext=!d(h.autonext)||Number(h.autonext),this.version=d(h.player_version)?h.player_version:null,this.removeControls=d(h.remove_controls)?h.remove_controls:null,this.techOrder=d(h.tech_order)?h.tech_order:null,this.analytics=d(h.analytics)?h.analytics:null,this.apiBaseUrl=d(h.api_base_url)?h.api_base_url:null,this.mediaProviders=d(h.media_providers)?h.media_providers:null,this.preload=d(h.preload)?h.preload:null,this.poster=d(h.poster)?h.poster:null,this.overlay=d(h.overlay)?h.overlay:null,this.playbutton=g({height:d(h.play_button_height)?h.play_button_height:null,width:d(h.play_button_width)?h.play_button_width:null,backgroundColor:d(h.play_button_background_color)?h.play_button_background_color:null,borderRadius:d(h.play_button_border_radius)?h.play_button_border_radius:null,borderWidth:d(h.play_button_border_width)?h.play_button_border_width:null,borderColor:d(h.play_button_border_color)?h.play_button_border_color:null,borderStyle:d(h.play_button_border_style)?h.play_button_border_style:null,iconColor:d(h.play_button_icon_color)?h.play_button_icon_color:null}),this.floater=g({controlbarColor:d(h.control_bar_color)?h.control_bar_color:null,iconColor:d(h.icon_color)?h.icon_color:null,removeControls:d(h.remove_controls)?h.remove_controls:null}),this.seekBar=g({progressColor:d(h.progress_color)?h.progress_color:null}),this.controls=g({active:!0,seekBar:this.seekBar,floater:this.floater,playbutton:this.playbutton,overlayColor:d(h.overlay_color)?h.overlay_color:null,overlayOpacity:d(h.overlay_opacity)?h.overlay_opacity:null}),this.onResize=d(h.onResize)&&f(h.onResize)?h.onResize:null,this.onNext=d(h.onNext)&&f(h.onNext)?h.onNext:null,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var f=a[c];if(e(f))break;var g=f.asset;g.assetId=f.id,g.assetTitle=f.title,g.loginId=f.loginId,d(f,"events")&&f.events.length?(g.analyticsLogUrl=f.analytics,g.analyticsObj=f.events[1].data):g.analyticsObj={pg:d(f,"parentId")?f.parentId:d(h,"channel")?h.channel.id:0,vd:f.id,li:f.loginId},g.sources||(g.sources=[{file:g.videoId}]),g.type=g.type||"youtube",b.push(g)}return b}(h.data);var j=this;this.getOption=function(a){return this.options.hasOwnProperty(a)?this.options.hasOwnProperty(a):null},this.play=function(a,b){if(!a)return console.log("need asset");var c=!1,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(e||d(this.autonext)&&!this.autonext)&&(c=!0):(e||d(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:d(location,"hostname")?location.hostname:"",loginId:a.loginId};d(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?this.instance.cueVideo(a):this.instance.loadVideo(a)},this.resize=function(){if(j.instance&&!j.isFullScreen){var a,b;if(arguments.length>1&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=j.el.parentNode;a=c.clientWidth,b=c.clientHeight}j.instance.resize(a,b),j.onResize&&(j.onResize(j.initialResize,[a,b]),j.initialResize=!1)}};var k=0;!function b(){setTimeout(function(){if(d(a,"TVPage")&&d(a,"_tvpa")){for(var c={techOrder:j.techOrder,mediaProviders:j.mediaProviders,analytics:{tvpa:j.analytics},apiBaseUrl:j.apiBaseUrl,swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+j.version+"-flash.swf",onReady:function(b,c){if(j.instance=c,j.resize(),d(a,"BigScreen")&&(BigScreen.onchange=function(){j.isFullScreen=!j.isFullScreen}),a.location!==a.parent.location&&/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(navigator.userAgent)&&!a.MSStream){var e=function(a){if(a&&d(a,"data")&&d(a.data,"event")&&"tvp_"+h.id.replace(/-/g,"_")+":modal_holder_resize"===a.data.event){var b=a.data.size||[];j.resize(b[0],b[1])}};a.removeEventListener("message",e,!1),a.addEventListener("message",e,!1)}else{var f=j.resize;a.removeEventListener("message",f,!1),a.addEventListener("resize",f)}j.el.querySelector(".tvp-progress-bar").style.backgroundColor=j.progressColor;var g=0;if(i&&i.length)for(var k=0;k<j.assets.length;k++)j.assets[k].assetId===i&&(g=k);j.current=g,j.play(j.assets[j.current])},onStateChange:function(a){if("tvp:media:videoended"===a){j.current++,j.assets[j.current]||(j.current=0);var b=j.assets[j.current];j.play(b,!0),j.onNext&&j.onNext(b)}},divId:j.el.id,controls:j.controls},e=["preload","poster","overlay"],f=0;f<e.length;f++){var g=e[f];null!==j[g]&&(c[g]=j[g])}var f,l={techOrder:1,analytics:1,apiBaseUrl:1,swf:1,controls:1,width:1,height:1,mediaProviders:1,preload:1,poster:1,overlay:1};for(f in j.options)c.hasOwnProperty(f)&&!l.hasOwnProperty(f)||(c[f]=j.options[f]);j.player=new TVPage.player(c)}else++k<50?b():console.log("limit reached")},150)}()}var d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},e=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},f=function(a){return void 0!==a},g=function(a){if(a||"object"==typeof a){for(var b in a)a[b]||delete a[b];return a}};a.Player=c}(window,document),function(a,b){var c=null,d="tvp_"+(b.body.getAttribute("data-id")||"").replace(/-/g,"_"),e=function(){var b=Utils.getByClass("iframe-content"),e=function(c){var e=JSON.parse(JSON.stringify(c.runTime));e.data=c.data,e.onResize=function(){setTimeout(function(){a.parent&&a.parent.postMessage({event:d+":modal_resize",height:b.offsetHeight+"px"},"*")},0)},e.onNext=function(b){b&&setTimeout(function(){a.parent&&a.parent.postMessage({event:d+":player_next",next:b},"*")},0)},new Player("tvp-player-el",e,c.selectedVideo.id)};a.addEventListener("message",function(a){if(a&&Utils.isset(a,"data")&&Utils.isset(a.data,"event")){var b=a.data;if(d+":modal_data"===b.event){e(b);var f=b.runTime;f.loginid||f.loginId;c=Utils.isset(f.channel)&&Utils.isset(f.channel.id)?f.channel.id:f.channelId}}}),setTimeout(function(){a.parent&&a.parent.postMessage({event:d+":modal_initialized",height:b.offsetHeight+20+"px"},"*")},0)},f=function(a){return void 0===a};if(f(a.TVPage)||f(a._tvpa)||f(a.Utils)||f(a.Analytics)||f(a.Player)){var g=0;!function b(){setTimeout(function(){f(a.TVPage)||f(a._tvpa)||f(a.Utils)||f(a.Analytics)||f(a.Player)?++g<50?b():console.log("limit reached"):e()},150)}()}else e()}(window,document);