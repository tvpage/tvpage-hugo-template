!function(a, b) {
    function c() {
        this.getByClass = function(a) {
            return b.getElementsByClassName(a || "")[0];
        }, this.isset = function(a, b) {
            if (arguments.length) {
                var c = a;
                return b && (c = a[b]), void 0 !== c;
            }
        };
    }
    a.Utils = new c();
}(window, document), function(a, b) {
    function c() {
        this.initConfig = function(a) {
            if (!(d(a) && d(a.loginId) && d(a.domain) && d(a.logUrl))) return console.warn("need config");
            var b = {
                logUrl: a.logUrl,
                li: a.loginId,
                gaDomain: a.domain
            };
            a.firstPartyCookies && (b.firstPartyCookieDomain = a.cookieDomain), _tvpa.push([ "config", b ]);
        }, this.track = function(a, b) {
            a && d(b) && d(_tvpa) && _tvpa.push([ "track", a, b ]);
        };
    }
    var d = function(a, b) {
        var c = a;
        return b && (c = a[b]), void 0 !== c;
    };
    a.Analytics = c;
}(window, document), function(a, b) {
    function c(c, i, j) {
        if (c && d(i) && d(i.data) && !(i.data.length <= 0)) {
            this.options = i, this.instance = null, this.el = "string" == typeof c ? b.getElementById(c) : c, 
            this.isFullScreen = !1, this.initialResize = !0, this.autoplay = !!d(i.autoplay) && Number(i.autoplay), 
            this.autonext = !d(i.autonext) || Number(i.autonext), this.version = d(i.player_version) ? i.player_version : null, 
            this.removeControls = d(i.remove_controls) ? i.remove_controls : null, this.techOrder = d(i.tech_order) ? i.tech_order : null, 
            this.analytics = d(i.analytics) ? i.analytics : null, this.apiBaseUrl = d(i.api_base_url) ? i.api_base_url : null, 
            this.mediaProviders = d(i.media_providers) ? i.media_providers : null, this.preload = d(i.preload) ? i.preload : null, 
            this.poster = d(i.poster) ? i.poster : null, this.overlay = d(i.overlay) ? i.overlay : null, 
            this.playbutton = g({
                height: d(i.play_button_height) ? i.play_button_height : null,
                width: d(i.play_button_width) ? i.play_button_width : null,
                backgroundColor: d(i.play_button_background_color) ? i.play_button_background_color : null,
                borderRadius: d(i.play_button_border_radius) ? i.play_button_border_radius : null,
                borderWidth: d(i.play_button_border_width) ? i.play_button_border_width : null,
                borderColor: d(i.play_button_border_color) ? i.play_button_border_color : null,
                borderStyle: d(i.play_button_border_style) ? i.play_button_border_style : null,
                iconColor: d(i.play_button_icon_color) ? i.play_button_icon_color : null
            }), this.floater = g({
                controlbarColor: d(i.control_bar_color) ? i.control_bar_color : null,
                iconColor: d(i.icon_color) ? i.icon_color : null,
                removeControls: d(i.remove_controls) ? i.remove_controls : null
            }), this.seekBar = g({
                progressColor: d(i.progress_color) ? i.progress_color : null
            }), this.controls = g({
                active: !0,
                seekBar: this.seekBar,
                floater: this.floater,
                playbutton: this.playbutton,
                overlayColor: d(i.overlay_color) ? i.overlay_color : null,
                overlayOpacity: d(i.overlay_opacity) ? i.overlay_opacity : null
            });
            var k = d(i.advertising) && "object" == typeof i.advertising && !e(i.advertising) ? i.advertising : {};
            this.advertising = g({
                enabled: !!d(k.enabled) && k.enabled,
                adServerUrl: k.adServerUrl || k.adserverurl || null,
                adTimeout: k.adTimeout || k.adtimeout || "2000",
                maxAds: k.maxAds || k.maxads || "100",
                adInterval: k.adInterval || k.adinterval || "0"
            }), this.onResize = d(i.onResize) && f(i.onResize) ? i.onResize : null, this.onNext = d(i.onNext) && f(i.onNext) ? i.onNext : null, 
            this.assets = function(a) {
                for (var b = [], c = 0; c < a.length; c++) {
                    var f = a[c];
                    if (e(f)) break;
                    var g = f.asset;
                    if (g.assetId = f.id, g.assetTitle = f.title, g.loginId = f.loginId, d(f, "events") && f.events.length) g.analyticsLogUrl = f.analytics, 
                    g.analyticsObj = f.events[1].data; else {
                        var h = d(f, "parentId") ? f.parentId : d(i, "channel") ? i.channel.id : 0;
                        h || !i.channelId && !i.channelid || (h = i.channelId || i.channelid), g.analyticsObj = {
                            pg: h,
                            vd: f.id,
                            li: f.loginId
                        };
                    }
                    g.sources || (g.sources = [ {
                        file: g.videoId
                    } ]), g.type = g.type || "youtube", b.push(g);
                }
                return b;
            }(i.data);
            var l = this;
            this.getOption = function(a) {
                return this.options.hasOwnProperty(a) ? this.options.hasOwnProperty(a) : null;
            }, this.willCue = function(a) {
                var b = !1, c = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                return a ? (c || d(this.autonext) && !this.autonext) && (b = !0) : (c || d(this.autoplay) && !this.autoplay) && (b = !0), 
                b;
            }, this.play = function(a, b) {
                if (!d(a)) return console.warn("Needs Asset");
                l.willCue(b) ? this.instance.cueVideo(a) : this.instance.loadVideo(a);
            }, this.getCurrentIndex = function(a) {
                for (var b = 0, c = 0; c < this.assets.length; c++) this.assets[c].assetId === (a || "") && (b = c);
                return b;
            }, this.resize = function() {
                if (l.instance && !l.isFullScreen) {
                    var a, b;
                    if (arguments.length > 1 && arguments[0] && arguments[1]) a = arguments[0], b = arguments[1]; else {
                        var c = l.el.parentNode;
                        a = c.clientWidth, b = c.clientHeight;
                    }
                    l.instance.resize(a, b), l.onResize && (l.onResize(l.initialResize, [ a, b ]), l.initialResize = !1);
                }
            };
            var m = 0;
            !function b() {
                setTimeout(function() {
                    if (d(a, "TVPage") && d(a, "_tvpa")) {
                        for (var c = {
                            techOrder: l.techOrder,
                            mediaProviders: l.mediaProviders,
                            analytics: {
                                tvpa: l.analytics
                            },
                            apiBaseUrl: l.apiBaseUrl,
                            swf: "//cdnjs.tvpage.com/tvplayer/tvp-" + l.version + ".swf",
                            onReady: function(b, c) {
                                l.analytics = new Analytics();
                                var e = i.loginId || i.loginid;
                                if (l.analytics.initConfig({
                                    domain: h,
                                    logUrl: l.apiBaseUrl + "/__tvpa.gif",
                                    loginId: e,
                                    firstPartyCookies: i.firstpartycookies,
                                    cookieDomain: i.cookiedomain
                                }), l.analytics.track("ci", {
                                    li: e
                                }), l.instance = c, l.resize(), d(a, "BigScreen") && (BigScreen.onchange = function() {
                                    l.isFullScreen = !l.isFullScreen;
                                }), a.location !== a.parent.location && /iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(navigator.userAgent) && !a.MSStream) {
                                    var f = function(a) {
                                        if (a && d(a, "data") && d(a.data, "event") && "tvp_" + i.id.replace(/-/g, "_") + ":modal_holder_resize" === a.data.event) {
                                            var b = a.data.size || [];
                                            l.resize(b[0], b[1]);
                                        }
                                    };
                                    a.removeEventListener("message", f, !1), a.addEventListener("message", f, !1);
                                } else {
                                    var g = l.resize;
                                    a.removeEventListener("message", g, !1), a.addEventListener("resize", g);
                                }
                                var k = l.el.querySelector(".tvp-progress-bar");
                                k && (k.style.backgroundColor = l.progressColor);
                                if (j && j.length) for (var m = 0; m < l.assets.length; m++) l.assets[m].assetId === j && m;
                            },
                            onStateChange: function(a) {
                                if ("tvp:media:videoended" === a) {
                                    l.current++, l.assets[l.current] || (l.current = 0);
                                    var b = l.assets[l.current];
                                    l.play(b, !0), l.onNext && l.onNext(b);
                                }
                            },
                            divId: l.el.id,
                            controls: l.controls,
                            version: l.version,
                            advertising: l.advertising,
                            preload: l.preload
                        }, e = [ "preload", "poster", "overlay" ], f = 0; f < e.length; f++) {
                            var g = e[f];
                            null !== l[g] && (c[g] = l[g]);
                        }
                        var k = {
                            techOrder: 1,
                            analytics: 1,
                            apiBaseUrl: 1,
                            swf: 1,
                            controls: 1,
                            width: 1,
                            height: 1,
                            mediaProviders: 1,
                            preload: 1,
                            poster: 1,
                            overlay: 1
                        };
                        for (var n in l.options) c.hasOwnProperty(n) && !k.hasOwnProperty(n) || (c[n] = l.options[n]);
                        l.player = new TVPage.player(c), l.current = l.getCurrentIndex(j), l.willCue() ? l.player.cueVideo(l.assets[l.current]) : l.player.loadVideo(l.assets[l.current]);
                    } else ++m < 50 && b();
                }, 150);
            }();
        }
    }
    var d = function(a, b) {
        var c = a;
        return b && (c = a[b]), void 0 !== c;
    }, e = function(a) {
        for (var b in a) if (a.hasOwnProperty(b)) return !1;
        return !0;
    }, f = function(a) {
        return void 0 !== a;
    }, g = function(a) {
        if (a || "object" == typeof a) {
            for (var b in a) a.hasOwnProperty(b) || delete a[b];
            return a;
        }
    }, h = d(location, "hostname") ? location.hostname : "";
    a.Player = c;
}(window, document), function(a, b) {
    var c = null, d = "tvp_" + (b.body.getAttribute("data-id") || "").replace(/-/g, "_"), e = function() {
        var b = Utils.getByClass("iframe-content"), e = function(c) {
            var e = JSON.parse(JSON.stringify(c.runTime));
            e.data = c.data, e.onResize = function() {
                setTimeout(function() {
                    a.parent && a.parent.postMessage({
                        event: d + ":modal_resize",
                        height: b.offsetHeight + "px"
                    }, "*");
                }, 0);
            }, e.onNext = function(b) {
                b && setTimeout(function() {
                    a.parent && a.parent.postMessage({
                        event: d + ":player_next",
                        next: b
                    }, "*");
                }, 0);
            }, new Player("tvp-player-el", e, c.selectedVideo.id);
        };
        a.addEventListener("message", function(a) {
            if (a && Utils.isset(a, "data") && Utils.isset(a.data, "event")) {
                var b = a.data;
                if (d + ":modal_data" === b.event) {
                    e(b);
                    var f = b.runTime;
                    f.loginid || f.loginId;
                    c = Utils.isset(f.channel) && Utils.isset(f.channel.id) ? f.channel.id : f.channelId;
                }
            }
        }), setTimeout(function() {
            a.parent && a.parent.postMessage({
                event: d + ":modal_initialized",
                height: b.offsetHeight + 20 + "px"
            }, "*");
        }, 0);
    }, f = function(a) {
        return void 0 === a;
    };
    if (f(a.TVPage) || f(a._tvpa) || f(a.Utils) || f(a.Analytics) || f(a.Player)) {
        var g = 0;
        !function b() {
            setTimeout(function() {
                f(a.TVPage) || f(a._tvpa) || f(a.Utils) || f(a.Analytics) || f(a.Player) ? ++g < 50 && b() : e();
            }, 150);
        }();
    } else e();
}(window, document);