!function(a,b){function c(){this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.getByClass=function(a){return b.getElementsByClassName(a||"")[0]},this.isFunction=function(a){return"function"==typeof a},this.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},this.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),"undefined"!=typeof c}},this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},this.trimText=function(a,b){var c=a||"",d=b?Number(b):0;return a.length>d&&(c=c.substring(0,Number(d))+"..."),c},this.trimPrice=function(a){var b=a||"";return b=b.toString().replace(/[^0-9.]+/g,""),b=parseFloat(b).toFixed(2),b=b>0?"$"+b:""},this.tmpl=function(a,b){if(a&&"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return"undefined"!=typeof e&&null!==e?e:""})}}a.Utils=new c}(window,document),function(a,b){function c(){this.initConfig=function(a){d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)&&_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){a&&b&&_tvpa&&_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c};a.Analytics=c}(window,document),function(a,b){function c(c,h,i){if(c&&d(h)&&d(h.data)&&!(h.data.length<=0)){this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!d(h.autoplay)&&Number(h.autoplay),this.autonext=!d(h.autonext)||Number(h.autonext),this.version=d(h.player_version)?h.player_version:null,this.progressColor=d(h.progress_color)?h.progress_color:null,this.transcript=d(h.transcript)?h.transcript:null,this.removeControls=d(h.remove_controls)?h.remove_controls:null,this.analytics=d(h.analytics)?h.analytics:null,this.overlay=d(h.overlay)?h.overlay:null,this.overlayColor=d(h.overlay_color)?h.overlay_color:null,this.overlayOpacity=d(h.overlay_opacity)?h.overlay_opacity:null,this.playButtonBackgroundColor=d(h.play_button_background_color)?h.play_button_background_color:null,this.playButtonBorderRadius=d(h.play_button_border_radius)?h.play_button_border_radius:null,this.playButtonBorderWidth=d(h.play_button_border_width)?h.play_button_border_width:null,this.playButtonBorderColor=d(h.play_button_border_color)?h.play_button_border_color:null,this.playButtonIconColor=d(h.play_button_icon_color)?h.play_button_icon_color:null,this.playButtonWidth=d(h.play_button_width)?h.play_button_width:null,this.playButtonHeight=d(h.play_button_height)?h.play_button_height:null,this.onResize=d(h.onResize)&&f(h.onResize)?h.onResize:null,this.onNext=d(h.onNext)&&f(h.onNext)?h.onNext:null,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var f=a[c];if(e(f))break;var g=f.asset;g.assetId=f.id,g.assetTitle=f.title,g.loginId=f.loginId,d(f,"events")&&f.events.length?(g.analyticsLogUrl=f.analytics,g.analyticsObj=f.events[1].data):g.analyticsObj={pg:d(f,"parentId")?f.parentId:d(h,"channel")?h.channel.id:0,vd:f.id,li:f.loginId},g.sources||(g.sources=[{file:g.videoId}]),g.type=g.type||"youtube",b.push(g)}return b}(h.data);var j=this;this.addOverlay=function(a){var c=b.createElement("div");c.classList.add("tvp-overlay"),c.style.backgroundImage='url("'+a.thumbnailUrl+'")',c.innerHTML='<div class="tvp-overlay-cover" style="opacity:'+this.overlayOpacity+";background-image:linear-gradient(to bottom right,"+this.overlayColor+","+this.overlayColor+');"></div><div class="tvp-play-holder" style="height:'+this.playButtonHeight+';"><svg class="tvp-play" style="width:'+this.playButtonWidth+";height:"+this.playButtonHeight+";background-color:"+this.playButtonBackgroundColor+";border:"+this.playButtonBorderWidth+" solid "+this.playButtonBorderColor+";border-radius:"+this.playButtonBorderRadius+';" viewBox="0 0 200 200"><polygon fill="'+this.playButtonIconColor+'" points="70, 55 70, 145 145, 100"></polygon></svg>';var d=function(){var a=function(){this.removeEventListener("click",d,!1),this.parentNode.removeChild(this)};j.onClick?j.onClick():j.instance&&(a.call(this),j.instance.play())};c.removeEventListener("click",d,!1),c.addEventListener("click",d,!1),this.el.appendChild(c)},this.play=function(a,b){if(a){var c=!1,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(e||d(this.autonext)&&!this.autonext)&&(c=!0):(e||d(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:d(location,"hostname")?location.hostname:"",loginId:a.loginId};d(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?(this.instance.cueVideo(a),("mp4"===a.type||this.overlay)&&this.addOverlay(a)):this.instance.loadVideo(a)}},this.resize=function(){if(j.instance&&!j.isFullScreen){var a,b;if(arguments.length>1&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=j.el.parentNode;a=c.clientWidth,b=c.clientHeight}j.instance.resize(a,b),j.onResize&&(j.onResize(j.initialResize,[a,b]),j.initialResize=!1)}};var k=0;!function b(){setTimeout(function(){d(a,"TVPage")&&d(a,"_tvpa")?j.player=new TVPage.player({techOrder:"html5,flash",analytics:{tvpa:j.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+j.version+"-flash.swf",onReady:function(b,c){if(j.instance=c,j.resize(),d(a,"BigScreen")&&(BigScreen.onchange=function(){j.isFullScreen=!j.isFullScreen}),a.location!==a.parent.location&&/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(navigator.userAgent)&&!a.MSStream){var e=function(a){if(a&&d(a,"data")&&d(a.data,"event")&&"tvp_carousel:modal_holder_resize"===a.data.event){var b=a.data.size||[];j.resize(b[0],b[1])}};a.removeEventListener("message",e,!1),a.addEventListener("message",e,!1)}else{var f=g(j.resize,50);a.removeEventListener("message",f,!1),a.addEventListener("resize",f)}j.el.querySelector(".tvp-progress-bar").style.backgroundColor=j.progressColor;var h=0;if(i&&i.length)for(var k=0;k<j.assets.length;k++)j.assets[k].assetId===i&&(h=k);j.current=h,j.play(j.assets[j.current]),a.DEBUG},onStateChange:function(a){if("tvp:media:videoended"===a){j.current++,j.assets[j.current]||(j.current=0);var b=j.assets[j.current];j.play(b,!0),j.onNext&&j.onNext(b)}},divId:j.el.id,controls:{active:!0,floater:{removeControls:j.removeControls,transcript:j.transcript}}}):++k<50?b():void 0},150)}()}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c},e=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},f=function(a){return"undefined"!=typeof a},g=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}};a.Player=c}(window,document),!function(a,b){function c(a){a.hasOwnProperty("data-simple-scrollbar")||Object.defineProperty(a,"data-simple-scrollbar",new SimpleScrollbar(a))}function d(a,c){function d(a){var b=a.pageY-f;f=a.pageY,g(function(){c.el.scrollTop+=b/c.scrollRatio})}function e(){a.classList.remove("ss-grabbed"),b.body.classList.remove("ss-grabbed"),b.removeEventListener("mousemove",d),b.removeEventListener("mouseup",e)}var f;a.addEventListener("mousedown",function(c){return f=c.pageY,a.classList.add("ss-grabbed"),b.body.classList.add("ss-grabbed"),b.addEventListener("mousemove",d),b.addEventListener("mouseup",e),!1})}function e(a){for(this.target=a,this.bar='<div class="ss-scroll">',this.wrapper=b.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=b.createElement("div"),this.el.setAttribute("class","ss-content"),this.wrapper.appendChild(this.el);this.target.firstChild;)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild,d(this.bar,this),this.moveBar(),this.el.addEventListener("scroll",this.moveBar.bind(this)),this.el.addEventListener("mouseenter",this.moveBar.bind(this)),this.target.classList.add("ss-container");var c=window.getComputedStyle(a);"0px"===c.height&&"0px"!==c["max-height"]&&(a.style.height=c["max-height"])}function f(){for(var a=b.querySelectorAll("*[ss-container]"),d=0;d<a.length;d++)c(a[d])}var g=a.requestAnimationFrame||a.setImmediate||function(a){return setTimeout(a,0)};e.prototype={moveBar:function(a){var b=this.el.scrollHeight,c=this.el.clientHeight,d=this;this.scrollRatio=c/b,g(function(){d.scrollRatio>=1?d.bar.classList.add("ss-hidden"):(d.bar.classList.remove("ss-hidden"),d.bar.style.cssText="height:"+100*d.scrollRatio+"%; top:"+d.el.scrollTop/b*100+"%;right:-"+(d.target.clientWidth-d.bar.clientWidth)+"px;")})}},b.addEventListener("DOMContentLoaded",f),e.initEl=c,e.initAll=f,a.SimpleScrollbar=e}(window,document),function(a,b){var c,d,e=function(){c.track("pk",{vd:this.getAttribute("data-vd"),ct:this.id.split("-").pop(),pg:d})},f=function(c,d,e){if(c){var f="//api.tvpage.com/v1/videos/"+c+"/products?X-login-id="+d,g="tvp_"+Math.floor(555*Math.random());f+="&callback="+g;var h=b.createElement("script");h.src=f,a[g||"callback"]=function(a){e(a&&a.length&&"function"==typeof e?a:[])},b.body.appendChild(h)}},g=function(e){var f=Utils.getByClass("iframe-content"),g=Utils.getByClass("tvp-products"),i=!1;e&&e.length&&(i=!0);var j=function(){setTimeout(function(){a.parent&&a.parent.postMessage({event:"tvp_carousel:modal"+(i?"":"_no")+"_products"},"*")},0)};if(!i)return f.classList.add("tvp-no-products"),void j();f.classList.remove("tvp-no-products"),j();for(var k=b.createDocumentFragment(),l=b.createDocumentFragment(),m=0;m<e.length;m++){var n=e[m],o=n.id,p=n.linkUrl,q="style=\"background-image:url('"+n.imageUrl+"');\"",r=n.entityIdParent,s=b.createElement("a");s.classList.add("tvp-product"),s.id="tvp-product-"+o,s.setAttribute("data-vd",r),s.href=p,s.innerHTML='<div class="tvp-product-image" '+q+'><div class="tvp-product-image-overlay"></div></div>',k.appendChild(s);var t=n.title||"";t=Utils.trimText(t,50);var u=n.price||"";u=Utils.trimPrice(u);var v=b.createElement("a");v.classList.add("tvp-product-popup"),v.id="tvp-product-popup-"+o,v.setAttribute("data-vd",r),v.href=p,v.innerHTML='<div class="tvp-product-popup-image" '+q+'></div><p class="tvp-product-title">'+t+'</p><div class="tvp-clearfix"><p class="tvp-product-price">'+u+'</p></div><button class="tvp-product-cta">View Details</button>',l.appendChild(v),c.track("pi",{vd:r,ct:o,pg:d})}var w=b.createElement("div");w.classList.add("tvp-arrow-indicator"),g.innerHTML="",g.appendChild(k),g.parentNode.appendChild(l),g.parentNode.insertBefore(w,g.nextSibling),SimpleScrollbar.initEl(g),h()},h=function(){var a,c,d=Utils.getByClass("tvp-products-holder"),f=["tvp-product","tvp-product-popup"],g=b.querySelectorAll(".tvp-arrow-indicator")[0];showPopUp=function(a){if(a.target.classList.contains("tvp-product-image")){removeClass();var c=a.target.parentNode,e=c.id.split("-").pop();c.classList.add("active");var f=b.getElementById("tvp-product-popup-"+e),h=c.getBoundingClientRect().top;f.classList.add("active");var i=h+f.offsetHeight,j=d.offsetHeight;h<=10?h=-10:i>j&&(h-=i-j,h+=10),f.classList.add("active"),f.style.top=h+"px",g.classList.add("active"),g.style.top=c.getBoundingClientRect().top+20+"px"}},removeClass=function(){for(var a=c.length;a--;)c[a].classList.remove("active"),g.classList.remove("active")};for(var h=0;h<f.length;h++){c=d.getElementsByClassName(f[h]);for(var i=0;i<c.length;i++)c[i].addEventListener("click",e,!1),c[i].onmouseover=function(b){clearTimeout(a),showPopUp(b)},c[i].onmouseleave=function(){a=setTimeout(function(){removeClass()},100)}}},i=function(){var b=Utils.getByClass("iframe-content"),e=Utils.getByClass("tvp-products-holder"),h=function(a){e.style.height=a+"px"},i=Utils.getByClass("tvp-player-holder");h(i.offsetHeight);var j=function(c){var d=JSON.parse(JSON.stringify(c.runTime)),e=null;d.data=c.data,d.onResize=function(c,d){h(d[1]),a.parent&&a.parent.postMessage({event:"tvp_carousel:modal_resized",height:b.offsetHeight+20+"px"},"*")},d.onNext=function(b){b&&(Utils.isset(b,"products")?g(b.products):f(b.assetId,c.runTime.loginid,function(a){setTimeout(function(){g(a),e.resize()},0)}),a.parent&&a.parent.postMessage({event:"tvp_carousel:player_next",next:b},"*"))},e=new Player("tvp-player-el",d,c.selectedVideo.id),a.addEventListener("resize",Utils.debounce(function(){e.resize()},85))};a.addEventListener("message",function(a){if(a&&Utils.isset(a,"data")&&Utils.isset(a.data,"event")){var b=a.data;if("tvp_carousel:modal_data"===b.event){var e=b.runTime.loginid||b.runTime.loginId;d=b.runTime.channel.id||b.runTime.channelid,c=new Analytics,c.initConfig({logUrl:"//api.tvpage.com/v1/__tvpa.gif",domain:Utils.isset(location,"hostname")?location.hostname:"",loginId:e});var h=b.selectedVideo;Utils.isset(h,"products")?(g(h.products),j(b)):f(h.id,e,function(a){setTimeout(function(){g(a)},0),j(b)})}}}),setTimeout(function(){a.parent&&a.parent.postMessage({event:"tvp_carousel:modal_initialized",height:b.offsetHeight+20+"px"},"*")},0)},j=function(a){return"undefined"==typeof a};if(j(a.TVPage)||j(a._tvpa)||j(a.Utils)||j(a.Analytics)||j(a.Player)){var k=0;!function b(){setTimeout(function(){j(a.TVPage)||j(a._tvpa)||j(a.Utils)||j(a.Analytics)||j(a.Player)?++k<50?b():void 0:i()},150)}()}else i()}(window,document);