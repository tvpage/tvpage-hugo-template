!function(a,b){function c(){this.initConfig=function(a){if(!(d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)))return console.log("need config");_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){if(!a||!b||!_tvpa)return console.log("no data");_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c};a.Analytics=c}(window,document),function(a,b){function c(c,h,i){var j=a.parent.document.getElementById(h.name+"-holder");if(!c||!f(h)||!f(h.data)||h.data.length<=0)return void a.parent.postMessage({event:"tvp_solo_click:no_data"},"*");j.style.display="block",this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!f(h.autoplay)&&Number(h.autoplay),this.autonext=!f(h.autonext)||Number(h.autonext),this.version=f(h.player_version)?h.player_version:null,this.progressColor=f(h.progressColor)?h.progressColor:null,this.transcript=f(h.transcript)?h.transcript:null,this.removeControls=f(h.removeControls)?h.removeControls:null,this.analytics=f(h.analytics)?h.analytics:null,this.overlay=!!f(h.overlay)&&h.overlay,this.overlayColor=f(h.overlayColor)?h.overlayColor:null,this.overlayOpacity=e?1:f(h.overlayOpacity)?h.overlayOpacity:"0.5",this.playButtonBackgroundColor=f(h.playButtonBackgroundColor)?h.playButtonBackgroundColor:"fff",this.playButtonBorderRadius=f(h.playButtonBorderRadius)?h.playButtonBorderRadius:"0",this.playButtonBorderWidth=f(h.playButtonBorderWidth)?h.playButtonBorderWidth:"0",this.playButtonBorderColor=f(h.playButtonBorderColor)?h.playButtonBorderColor:"000",this.playButtonIconColor=f(h.playButtonIconColor)?h.playButtonIconColor:"000",this.playButtonWidth=f(h.playButtonWidth)?h.playButtonWidth:"55px",this.playButtonHeight=f(h.playButtonHeight)?h.playButtonHeight:"55px",this.playText=f(h.playText)?h.playText:"Watch Video",this.playTextSize=f(h.playTextSize)?h.playTextSize:"12px",this.playTextColor=f(h.playTextColor)?h.playTextColor:"000",this.playTextFontFamily=f(h.playTextFontFamily)?h.playTextFontFamily:"Helvetica",this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(g(d))break;var e=d.asset;e.assetId=d.id,e.assetTitle=d.title,e.loginId=d.loginId,e.transcripts=f(d.transcripts)?d.transcripts:"",f(d,"events")&&d.events.length?(e.analyticsLogUrl=d.analytics,e.analyticsObj=d.events[1].data):e.analyticsObj={pg:f(d,"parentId")?d.parentId:f(h,"channel")?h.channel.id:0,vd:d.id,li:d.loginId},e.sources||(e.sources=[{file:e.videoId}]),e.type=e.type||"youtube",b.push(e)}return b}(h.data);var k=this;this.addOverlay=function(a){var c=b.createElement("div");c.classList.add("tvp-overlay"),c.style.backgroundImage='url("'+a+'")';var d=this.overlayColor?"#"+this.overlayColor:"transparent";c.innerHTML='<div class="tvp-overlay-cover" style="opacity:'+this.overlayOpacity+";background-image:linear-gradient(to bottom right,"+d+","+d+');"></div><div class="tvp-play-holder" style="height:'+this.playButtonHeight+';"><svg class="tvp-play" style="width:'+this.playButtonWidth+";height:"+this.playButtonHeight+";background-color:#"+this.playButtonBackgroundColor+";border:"+this.playButtonBorderWidth+" solid #"+this.playButtonBorderColor+";border-radius:"+this.playButtonBorderRadius+'%;" viewBox="0 0 200 200"><polygon fill="#'+this.playButtonIconColor+'" points="70, 55 70, 145 145, 100"></polygon></svg><div class="tvp-play-text" style="font-family:'+this.playTextFontFamily+";font-size:"+this.playTextSize+";color:#"+this.playTextColor+'">'+this.playText+"</span></div>";var e=function(){k.instance&&(this.removeEventListener("click",e,!1),this.parentNode.removeChild(this),k.instance.play())};c.addEventListener("click",e),this.el.appendChild(c)},this.play=function(a,b){if(a){var c=!1;b?(e||f(this.autonext)&&!this.autonext)&&(c=!0):(e||f(this.autoplay)&&!this.autoplay)&&(c=!0);var d=new Analytics,g={domain:f(location,"hostname")?location.hostname:"",loginId:a.loginId};f(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,d.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",d.initConfig(g)),c?(this.instance.cueVideo(a),("mp4"===a.type||this.overlay)&&this.addOverlay(a.thumbnailUrl)):this.instance.loadVideo(a)}},this.resize=function(){if(k.instance&&!k.isFullScreen){var a,b;if(arguments.length&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=k.el.parentNode;a=c.clientWidth,b=c.clientHeight}k.instance.resize(a,b),this.onResize&&this.onResize(k.initialResize,[a,b]),k.initialResize=!1}},this.onReady=function(b,c){if(k.instance=c,k.resize(),f(a,"BigScreen")&&(BigScreen.onchange=function(){k.isFullScreen=!k.isFullScreen}),a.location!==a.parent.location&&d){var e=function(a){if(a&&f(a,"data")&&"tvp_solo_click:holder_resize"===(a.data.event||"")){var b=a.data.size||[];k.resize(b[0],b[1])}};a.removeEventListener("message",e,!1),a.addEventListener("message",e,!1)}else{var g=k.resize;a.removeEventListener("resize",g,!1),a.addEventListener("resize",g)}k.el.querySelector(".tvp-progress-bar").style.backgroundColor=k.progressColor;for(var h=0,j=0;j<k.assets.length;j++)k.assets[j].assetId===(i||"")&&(h=j);k.current=h,k.play(k.assets[k.current])},k.onStateChange=function(a){"tvp:media:videoended"===a&&(k.current++,k.assets[k.current]||(k.current=0),k.play(k.assets[k.current],!0))};var l=0;!function b(){setTimeout(function(){f(a,"TVPage")&&f(a,"_tvpa")||!(++l<50)?k.player=new TVPage.player({techOrder:"html5,flash",analytics:{tvpa:k.analytics},apiBaseUrl:"//api.tvpage.com/v1",apiTranscript:"//api.tvpage.com/v1/videos/transcript",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+k.version+"-flash.swf",onReady:k.onReady,onStateChange:k.onStateChange,divId:k.el.id,controls:{active:!0,floater:{removeControls:k.removeControls,transcript:k.transcript}}}):b()},150)}()}var d=/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(navigator.userAgent)&&!a.MSStream,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),f=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},g=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};a.Player=c}(window,document),function(a){var b=function(){return"tvp_"+Math.floor(50005*Math.random())},c=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},d=function(b,c){var d=a.createElement("script");if(d.src=b.src,c&&"function"==typeof c){window[b.cbName||"callback"]=c;(b.body||a.body).appendChild(d)}},e=function(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},f=function(b){var d=function(a){return c(a)&&c(a,"__TVPage__")&&c(a.__TVPage__,"config")?a.__TVPage__.config:console.log("need config")},e={};if("dynamic"===b){var f=d(parent),g=a.body.getAttribute("data-id");if(!c(f,g))return console.log("need settings");e=f[g],e.name=g,e.domain=a.body.getAttribute("data-domain")||""}else if("inline"===b&&b&&b.length){var f=d(parent);e=f[b],e.name=b}else if("static"===b){var f=d(window),g=a.body.getAttribute("data-id");if(!c(f,g))return console.log("need settings");e=f[g],e.name=g}return e},g=function(a,b,c){d({src:function(){var c=a.channel,d=c.parameters,e="//api.tvpage.com/v1/channels/"+c.id+"/videos?X-login-id="+a.loginid;for(var f in d)e+="&"+f+"="+d[f];return e+="&callback="+b}(),cbName:b},c)},h=function(b,c){if(!b||!c)return console.log("need target");var d=a.createDocumentFragment(),e=a.createElement("div");e.classList.add("tvp-player"),e.innerHTML='<div id="tvp-player-el-'+b+'" class="tvp-player-el"></div></div>',d.appendChild(e),c.appendChild(d)};!function(){a.body.classList.contains("dynamic")&&function(b,c){h(b,a.body),g(c,b,function(a){c.data=a||[],d({src:c.domain+"/solo-click/options.json",cbName:"tvpcallback"},function(a){if(a){var d=a.option,f={};for(var g in d){var h=d[g];f[h.code]=h.value}c=e(c,f),new Player("tvp-player-el-"+b,c)}})})}(b(),f("dynamic"))}()}(document);