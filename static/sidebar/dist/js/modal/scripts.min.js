!function(a,b){function c(){this.getByClass=function(a){return b.getElementsByClassName(a||"")[0]},this.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),"undefined"!=typeof c}},this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},this.trimTitle=function(a,b){return a=a.length>b?a.substring(0,b)+"...":a},this.trimPrice=function(a){return a=a.toString().replace(/[^0-9.]+/g,""),a=parseFloat(a).toFixed(2),a=a>0?"$"+a:""},this.tmpl=function(a,b){var c=this;if(b.title=c.trimTitle(b.title,52),a&&"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return"undefined"!=typeof e&&null!==e?e:""})}}a.Utils=new c}(window,document),function(a,b){function c(){this.initConfig=function(a){d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)&&_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){a&&b&&_tvpa&&_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c};a.Analytics=c}(window,document),function(a,b){function c(c,f,g){if(c&&d(f)&&d(f.data)&&!(f.data.length<=0)){this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!d(f.autoplay)&&f.autoplay,this.autonext=!d(f.autonext)||f.autonext,this.version=d(f.version)?f.version:"1.8.5",this.progresscolor=d(f.progresscolor)?f.progresscolor:"#E57211",this.transcript=!!d(f.transcript)&&f.transcript,this.removecontrols=d(f.removecontrols)?f.removecontrols:["hd"],this.analytics=!d(f.analytics)||f.analytics,this.onResize=d(f.onResize)&&"function"==typeof f.onResize?f.onResize:null,this.onNext=d(f.onNext)&&"function"==typeof f.onNext?f.onNext:null,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var g=a[c];if(e(g))break;var h=g.asset;h.assetId=g.id,h.assetTitle=g.title,h.loginId=g.loginId,d(g,"events")&&g.events.length?(h.analyticsLogUrl=g.analytics,h.analyticsObj=g.events[1].data):h.analyticsObj={pg:d(g,"parentId")?g.parentId:d(f,"channel")?f.channel.id:0,vd:g.id,li:g.loginId},h.sources||(h.sources=[{file:h.videoId}]),h.type=h.type||"youtube",b.push(h)}return b}(f.data);var h=this;this.showPlayBtn=function(){var a=b.createElement("div");a.innerHTML='<svg class="tvp-play" viewBox="0 0 200 200"><polygon points="70, 55 70, 145 145, 100"></polygon></svg>';var c=function(){h.instance&&(a.removeEventListener("click",c,!1),a.parentNode.removeChild(a),h.instance.play())};a.addEventListener("click",c),this.el.appendChild(a)},this.play=function(a,b){if(a){var c=!1,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(e||d(this.autonext)&&!this.autonext)&&(c=!0):(e||d(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:d(location,"hostname")?location.hostname:"",loginId:a.loginId};d(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?(this.instance.cueVideo(a),"mp4"===a.type&&this.showPlayBtn(a.thumbnailUrl)):this.instance.loadVideo(a)}},this.resize=function(){if(h.instance&&!h.isFullScreen){var a,b;if(arguments.length&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=h.el.parentNode;a=c.clientWidth,b=c.clientHeight}h.instance.resize(a,b),this.onResize&&(this.onResize(h.initialResize,[a,b]),h.initialResize=!1)}};var i=0;!function b(){setTimeout(function(){d(a,"TVPage")&&d(a,"_tvpa")?new TVPage.player({poster:!0,techOrder:"html5,flash",analytics:{tvpa:h.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+h.version+"-flash.swf",onReady:function(b,c){h.instance=c,h.resize(),d(a,"BigScreen")&&(BigScreen.onchange=function(){h.isFullScreen=!h.isFullScreen}),a.location!==a.parent.location?a.addEventListener("message",function(a){if(a&&d(a,"data")&&d(a.data,"event")&&"_tvp_widget_holder_resize"===a.data.event){var b=a.data.size||[];h.resize(b[0],b[1])}}):a.addEventListener("resize",resize),h.el.querySelector(".tvp-progress-bar").style.backgroundColor=h.progresscolor;var e=0;if(g&&g.length)for(var f=0;f<h.assets.length;f++)h.assets[f].assetId===g&&(e=f);h.current=e,h.play(h.assets[h.current]),a.DEBUG},onStateChange:function(a){if("tvp:media:videoended"===a){h.current++,h.assets[h.current]||(h.current=0);var b=h.assets[h.current];h.play(b,!0),h.onNext&&h.onNext(b)}},divId:h.el.id,controls:{active:!0,floater:{removeControls:h.removecontrols,transcript:h.transcript}}}):++i<50?b():void 0},150)}()}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c},e=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};a.Player=c}(window,document),!function(a,b){function c(a){a.hasOwnProperty("data-simple-scrollbar")||Object.defineProperty(a,"data-simple-scrollbar",new SimpleScrollbar(a))}function d(a,c){function d(a){var b=a.pageY-f;f=a.pageY,g(function(){c.el.scrollTop+=b/c.scrollRatio})}function e(){a.classList.remove("ss-grabbed"),b.body.classList.remove("ss-grabbed"),b.removeEventListener("mousemove",d),b.removeEventListener("mouseup",e)}var f;a.addEventListener("mousedown",function(c){return f=c.pageY,a.classList.add("ss-grabbed"),b.body.classList.add("ss-grabbed"),b.addEventListener("mousemove",d),b.addEventListener("mouseup",e),!1})}function e(a){for(this.target=a,this.bar='<div class="ss-scroll">',this.wrapper=b.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=b.createElement("div"),this.el.setAttribute("class","ss-content"),this.wrapper.appendChild(this.el);this.target.firstChild;)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild,d(this.bar,this),this.moveBar(),this.el.addEventListener("scroll",this.moveBar.bind(this)),this.el.addEventListener("mouseenter",this.moveBar.bind(this)),this.target.classList.add("ss-container");var c=window.getComputedStyle(a);"0px"===c.height&&"0px"!==c["max-height"]&&(a.style.height=c["max-height"])}function f(){for(var a=b.querySelectorAll("*[ss-container]"),d=0;d<a.length;d++)c(a[d])}var g=a.requestAnimationFrame||a.setImmediate||function(a){return setTimeout(a,0)};e.prototype={moveBar:function(a){var b=this.el.scrollHeight,c=this.el.clientHeight,d=this;this.scrollRatio=c/b,g(function(){d.scrollRatio>=1?d.bar.classList.add("ss-hidden"):(d.bar.classList.remove("ss-hidden"),d.bar.style.cssText="height:"+100*d.scrollRatio+"%; top:"+d.el.scrollTop/b*100+"%;right:-"+(d.target.clientWidth-d.bar.clientWidth)+"px;")})}},b.addEventListener("DOMContentLoaded",f),e.initEl=c,e.initAll=f,a.SimpleScrollbar=e}(window,document),function(a,b){var c,d,e=function(){c.track("pk",{vd:this.getAttribute("data-vd"),ct:this.id.split("-").pop(),pg:d})},f=function(c,d,e){if(c){var f="//api.tvpage.com/v1/videos/"+c+"/products?X-login-id="+d,g="tvp_"+Math.floor(555*Math.random());f+="&callback="+g;var h=b.createElement("script");h.src=f,a[g||"callback"]=function(a){e(a&&a.length&&"function"==typeof e?a:[])},b.body.appendChild(h)}},g=function(a){var b=parent.document.querySelector(".tvp-title p"),c=Utils.getByClass("tvp-products-holder"),d=Utils.getByClass("tvp-player-holder");a.length?(b.style.display="",c.style.display="",d.style.width=""):(b.style.display="none",c.style.display="none",d.style.width="100%")},h=function(a){for(var f=Utils.getByClass("tvp-products"),g=b.createDocumentFragment(),h=b.createDocumentFragment(),i=0;i<a.length;i++){var j=a[i],k=j.id,l=j.linkUrl,m="style=\"background-image:url('"+j.imageUrl+"');\"",n=j.entityIdParent,o=b.createElement("a");o.classList.add("tvp-product"),o.id="tvp-product-"+k,o.setAttribute("data-vd",n),o.href=l,o.innerHTML='<div class="tvp-product-image" '+m+"><div/>",g.appendChild(o);var p=j.title||"";p=Utils.trimTitle(p,50);var q=j.price||"";q=Utils.trimPrice(q);var r=b.createElement("a");r.classList.add("tvp-product-popup"),r.id="tvp-product-popup-"+k,r.setAttribute("data-vd",n),r.href=l,r.innerHTML='<div class="tvp-product-popup-image" '+m+'></div><p class="tvp-product-title">'+p+'</p><div class="tvp-clearfix"><p class="tvp-product-price">'+q+'</p></div><button class="tvp-product-cta">View Details</button>',h.appendChild(r),c.track("pi",{vd:n,ct:k,pg:d})}for(var s=["tvp-product","tvp-product-popup"],i=0;i<s.length;i++)for(var t=f.getElementsByClassName(s[i]),u=0;u<t.length;u++)t[u].removeEventListener("click",e,!1);f.innerHTML="";var v=b.createElement("div");v.classList.add("tvp-arrow-indicator"),f.appendChild(g),f.parentNode.appendChild(h),f.parentNode.insertBefore(v,f.nextSibling),SimpleScrollbar.initEl(f),setTimeout(function(){for(var a=Utils.getByClass("tvp-products-holder"),c=["tvp-product","tvp-product-popup"],d=0;d<c.length;d++)for(var f=a.getElementsByClassName(c[d]),g=0;g<f.length;g++)f[g].addEventListener("click",e,!1);a.onmouseover=function(c){if(c.target.classList.contains("tvp-product-image")){for(var d=b.querySelectorAll(".tvp-product-popup.active"),e=d.length-1;e>=0;e--)d[e].classList.remove("active");var f=c.target.parentNode,g=f.id.split("-").pop();f.classList.add("active");var h=b.getElementById("tvp-product-popup-"+g),i=f.getBoundingClientRect().top;h.classList.add("active");var j=i+h.offsetHeight,k=a.offsetHeight;i<=10?i=-10:j>k&&(i-=j-k,i+=10),h.classList.add("active"),h.style.top=i+"px",v.classList.add("active"),v.style.top=f.getBoundingClientRect().top+20+"px"}},a.onmouseleave=function(a){for(var c=b.querySelectorAll(".tvp-product.active"),d=c.length-1;d>=0;d--)c[d].classList.remove("active");v.classList.remove("active");for(var e=b.querySelectorAll(".tvp-product-popup.active"),d=e.length-1;d>=0;d--)e[d].classList.remove("active")}},0)},i=function(){var b=Utils.getByClass("iframe-content"),e=Utils.getByClass("tvp-products-holder"),i=function(a){e.style.height=a+"px"},j=Utils.getByClass("tvp-player-holder");i(j.offsetHeight);var k=function(c){var d=JSON.parse(JSON.stringify(c.runTime));d.data=c.data,d.onResize=function(c,d){i(d[1]),a.parent&&a.parent.postMessage({event:"tvp_sidebar:modal_resized",height:b.offsetHeight+20+"px"},"*")},d.onNext=function(b){b&&(Utils.isset(b,"products")?h(b.products):f(b.assetId,c.runTime.loginid,function(a){setTimeout(function(){g(a),h(a),e.resize()},0)}),a.parent&&a.parent.postMessage({event:"tvp_sidebar:player_next",next:b},"*"))};var e=new Player("tvp-player-el",d,c.selectedVideo.id);a.addEventListener("resize",Utils.debounce(function(){e.resize()},85))};a.addEventListener("message",function(a){if(a&&Utils.isset(a,"data")&&Utils.isset(a.data,"event")){var b=a.data;if("_tvp_sidebar_modal_data"===b.event){k(b);var e=b.runTime.loginid||b.runTime.loginId;d=b.runTime.channel.id||b.runTime.channelid,c=new Analytics,c.initConfig({logUrl:"//api.tvpage.com/v1/__tvpa.gif",domain:Utils.isset(location,"hostname")?location.hostname:"",loginId:e});var i=b.selectedVideo;Utils.isset(i,"products")?h(i.products):f(i.id,e,function(a){setTimeout(function(){h(a),g(a)},0)})}}}),setTimeout(function(){a.parent&&a.parent.postMessage({event:"tvp_sidebar:modal_initialized",height:b.offsetHeight+20+"px"},"*")},0)},j=function(a){return"undefined"==typeof a};if(j(a.TVPage)||j(a._tvpa)||j(a.Utils)||j(a.Analytics)||j(a.Player)){var k=0;!function b(){setTimeout(function(){j(a.TVPage)||j(a._tvpa)||j(a.Utils)||j(a.Analytics)||j(a.Player)?++k<50?b():void 0:i()},150)}()}else i()}(window,document);