!function(a,b){function c(){this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),"undefined"!=typeof c}},this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},this.tmpl=function(a,b){if(a&&"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return"undefined"!=typeof e&&null!==e?e:""})}}a.Utils=new c}(window,document),function(a,b){function c(){this.initConfig=function(a){d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)&&_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){a&&b&&_tvpa&&_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c};a.Analytics=c}(window,document),function(a,b){function c(c,f,g){if(c&&d(f)&&d(f.data)&&!(f.data.length<=0)){this.isFullScreen=!1,this.isReady=!1,this.autoplay=!!d(f.autoplay)&&f.autoplay,this.autonext=!d(f.autonext)||f.autonext,this.version=d(f.version)?f.version:"1.8.5",this.progresscolor=d(f.progresscolor)?f.progresscolor:"#E57211",this.transcript=!!d(f.transcript)&&f.transcript,this.removecontrols=d(f.removecontrols)?f.removecontrols:["hd"],this.analytics=!d(f.analytics)||f.analytics,this.onResize=d(f.onResize)&&"function"==typeof f.onResize?f.onResize:null,this.onNext=d(f.onNext)&&"function"==typeof f.onNext?f.onNext:null,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var g=a[c];if(e(g))break;var h=g.asset;h.assetId=g.id,h.assetTitle=g.title,h.loginId=g.loginId,d(g,"events")&&g.events.length?(h.analyticsLogUrl=g.analytics,h.analyticsObj=g.events[1].data):h.analyticsObj={pg:d(g,"parentId")?g.parentId:d(f,"channel")?f.channel.id:0,vd:g.id,li:g.loginId},h.sources||(h.sources=[{file:h.videoId}]),h.type=h.type||"youtube",b.push(h)}return b}(f.data);var h=this;this.showPlayBtn=function(){var a=b.createElement("div");a.innerHTML='<svg class="tvp-play" viewBox="0 0 200 200"><polygon points="70, 55 70, 145 145, 100"></polygon></svg>';var c=function(){h.instance&&(a.removeEventListener("click",c,!1),a.parentNode.removeChild(a),h.instance.play())};a.addEventListener("click",c),this.el.appendChild(a)},this.play=function(a,b){if(a){var c=!1,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(e||d(this.autonext)&&!this.autonext)&&(c=!0):(e||d(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:d(location,"hostname")?location.hostname:"",loginId:a.loginId};d(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?(this.instance.cueVideo(a),"mp4"===a.type&&this.showPlayBtn(a.thumbnailUrl)):this.instance.loadVideo(a)}},this.resize=function(){if(h.instance&&!h.isFullScreen){var a,b;if(arguments.length&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=h.el.parentNode;a=c.clientWidth,b=c.clientHeight}h.instance.resize(a,b),this.onResize&&this.onResize([a,b])}};var i=0;!function b(){setTimeout(function(){d(a,"TVPage")&&d(a,"_tvpa")?new TVPage.player({poster:!0,techOrder:"html5,flash",analytics:{tvpa:h.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+h.version+"-flash.swf",onReady:function(b,c){h.isReady=!0,h.instance=c,h.resize(),d(a,"BigScreen")&&(BigScreen.onchange=function(){h.isFullScreen=!h.isFullScreen}),a.location!==a.parent.location?a.addEventListener("message",function(a){if(a&&d(a,"data")&&d(a.data,"event")&&"_tvp_widget_holder_resize"===a.data.event){var b=a.data.size||[];h.resize(b[0],b[1])}}):a.addEventListener("resize",resize),h.el.querySelector(".tvp-progress-bar").style.backgroundColor=h.progresscolor;var e=0;if(g&&g.length)for(var f=0;f<h.assets.length;f++)h.assets[f].assetId===g&&(e=f);h.current=e,h.play(h.assets[h.current]),a.DEBUG},onStateChange:function(a){if("tvp:media:videoended"===a){h.current++,h.assets[h.current]||(h.current=0);var b=h.assets[h.current];h.play(b,!0),h.onNext&&h.onNext(b)}},divId:h.el.id,controls:{active:!0,floater:{removeControls:h.removecontrols,transcript:h.transcript}}}):++i<50?b():void 0},150)}()}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c},e=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};a.Player=c}(window,document),function(a,b){var c=function(a,b){return"undefined"!=typeof a[b]},d=function(a){return b.getElementsByClassName(a||"")[0]},e=function(c,e){for(var f=d("iframe-content"),g=d("tvp-products-carousel"),h=b.createDocumentFragment(),i=0;i<c.length;i++){var j=c[i],k=b.createElement("div");k.innerHTML='<a class="tvp-product" href="'+j.linkUrl+'"><div class="tvp-product-image" style="background-image:url('+j.imageUrl+')"></div><div class="tvp-product-data"><p>'+j.title+"</p><h2>$"+j.price+"</h2><button>View Details</button></div></a>",h.appendChild(k)}g.innerHTML="",g.appendChild(h);var l=b.getElementsByTagName("body")[0];$.ajax({dataType:"script",cache:!0,url:l.getAttribute("data-domain")+"/sidebar/js/vendor/slick-min.js"}).done(function(){var b=!1,d=$(g),e={slidesToSlide:1,slidesToShow:1,arrows:!1};c.length>1&&(e.centerMode=!0,e.centerPadding="25px"),d.on("setPosition",function(){b&&a.parent&&a.parent.parent&&a.parent.parent.postMessage({event:"tvp_sidebar:modal_resized",height:f.offsetHeight+"px"},"*")}),d.on("init",function(){b=!0,setTimeout(function(){a.parent&&a.parent.parent&&a.parent.parent.postMessage({event:"tvp_sidebar:modal_resized",height:f.offsetHeight+"px"},"*")},0)}),d.slick(e)})},f=function(){var f=d("iframe-content"),g=function(a){var b=JSON.parse(JSON.stringify(a.runTime));b.data=a.data,new Player("tvp-player-el",b,a.selectedVideo.id)};a.addEventListener("message",function(d){if(d&&c(d,"data")&&c(d.data,"event")){var f=d.data;if("_tvp_sidebar_modal_data"===f.event){g(f);var h=f.selectedVideo;if(Utils.isset(h,"products"))e(h.products);else{var i="//api.tvpage.com/v1/videos/"+h.id+"/products?X-login-id="+f.runTime.loginid,j="tvp_"+Math.floor(555*Math.random());i+="&callback="+j;var k=b.createElement("script");k.src=i,a[j||"callback"]=function(a){(a||a.length)&&setTimeout(function(){e(a)},0)},b.body.appendChild(k)}}}}),setTimeout(function(){a.parent&&a.parent.parent&&a.parent.parent.postMessage({event:"tvp_sidebar:modal_initialized",height:f.offsetHeight+20+"px"},"*")},0)},g=function(a){return"undefined"==typeof a};if(g(a.TVPage)||g(a.jQuery)||g(a.Utils)||g(a.Analytics)||g(a.Player)){var h=0;!function b(){setTimeout(function(){g(a.TVPage)||g(a.jQuery)||g(a.Utils)||g(a.Analytics)||g(a.Player)?++h<50?b():void 0:f()},150)}()}else f()}(window,document);