!function(a,b){function c(){this.getByClass=function(a){return b.getElementsByClassName(a||"")[0]},this.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),"undefined"!=typeof c}},this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},this.trimText=function(a,b){var c=a||"",d=b?Number(b):0;return a.length>d&&(c=c.substring(0,Number(d))+"..."),c},this.trimPrice=function(a){var b=a||"";return b=b.toString().replace(/[^0-9.]+/g,""),b=parseFloat(b).toFixed(2),b=b>0?"$"+b:""},this.tmpl=function(a,b){if(a&&"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return"undefined"!=typeof e&&null!==e?e:""})}}a.Utils=new c}(window,document),function(a,b){function c(){this.initConfig=function(a){d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)&&d(window,"_tvpa")&&_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){a&&b&&d(window,"_tvpa")&&_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c};a.Analytics=c}(window,document),function(a,b){function c(c,g,h){if(c&&d(g)&&d(g.data)&&!(g.data.length<=0)){this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!d(g.autoplay)&&g.autoplay,this.autonext=!d(g.autonext)||g.autonext,this.version=d(g.version)?g.version:"1.8.5",this.progresscolor=d(g.progresscolor)?g.progresscolor:"#E57211",this.transcript=!!d(g.transcript)&&g.transcript,this.removecontrols=d(g.removecontrols)?g.removecontrols:["hd"],this.analytics=!d(g.analytics)||g.analytics,this.onResize=d(g.onResize)&&"function"==typeof g.onResize?g.onResize:null,this.onNext=d(g.onNext)&&"function"==typeof g.onNext?g.onNext:null,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var f=a[c];if(e(f))break;var h=f.asset;h.assetId=f.id,h.assetTitle=f.title,h.loginId=f.loginId,d(f,"events")&&f.events.length?(h.analyticsLogUrl=f.analytics,h.analyticsObj=f.events[1].data):h.analyticsObj={pg:d(f,"parentId")?f.parentId:d(g,"channel")?g.channel.id:0,vd:f.id,li:f.loginId},h.sources||(h.sources=[{file:h.videoId}]),h.type=h.type||"youtube",b.push(h)}return b}(g.data);var i=this;this.showPlayBtn=function(){var a=b.createElement("div");a.innerHTML='<svg class="tvp-play" viewBox="0 0 200 200"><polygon points="70, 55 70, 145 145, 100"></polygon></svg>';var c=function(){i.instance&&(a.removeEventListener("click",c,!1),a.parentNode.removeChild(a),i.instance.play())};a.addEventListener("click",c),this.el.appendChild(a)},this.play=function(a,b){if(a){var c=!1,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(e||d(this.autonext)&&!this.autonext)&&(c=!0):(e||d(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:d(location,"hostname")?location.hostname:"",loginId:a.loginId};d(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?(this.instance.cueVideo(a),"mp4"===a.type&&this.showPlayBtn(a.thumbnailUrl)):this.instance.loadVideo(a)}},this.resize=function(){if(i.instance&&!i.isFullScreen){var a,b;if(arguments.length&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=i.el.parentNode;a=c.clientWidth,b=c.clientHeight}i.instance.resize(a,b),this.onResize&&(this.onResize(i.initialResize,[a,b]),i.initialResize=!1)}};var j=0;!function b(){setTimeout(function(){d(a,"TVPage")&&d(a,"_tvpa")?new TVPage.player({poster:!0,techOrder:"html5,flash",analytics:{tvpa:i.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+i.version+"-flash.swf",onReady:function(b,c){i.instance=c,i.resize(),d(a,"BigScreen")&&(BigScreen.onchange=function(){i.isFullScreen=!i.isFullScreen}),a.location!==a.parent.location?a.addEventListener("message",function(a){if(a&&d(a,"data")&&d(a.data,"event")&&"tvp_sidebar:modal_holder_resize"===a.data.event){var b=a.data.size||[];i.resize(b[0],b[1])}}):a.addEventListener("resize",f(function(){i.resize()},65)),i.el.querySelector(".tvp-progress-bar").style.backgroundColor=i.progresscolor;var e=0;if(h&&h.length)for(var g=0;g<i.assets.length;g++)i.assets[g].assetId===h&&(e=g);i.current=e,i.play(i.assets[i.current]),a.DEBUG},onStateChange:function(a){if("tvp:media:videoended"===a){i.current++,i.assets[i.current]||(i.current=0);var b=i.assets[i.current];i.play(b,!0),i.onNext&&i.onNext(b)}},divId:i.el.id,controls:{active:!0,floater:{removeControls:i.removecontrols,transcript:i.transcript}}}):++j<50?b():void 0},150)}()}}var d=function(a,b){var c=a;return b&&(c=a[b]),"undefined"!=typeof c},e=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},f=function(a,b,c){var d=null;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}};a.Player=c}(window,document),function(a,b){var c,d,e=function(){c.track("pk",{vd:this.getAttribute("data-vd"),ct:this.id.split("-").pop(),pg:d})},f=function(c,d,e){if(c){var f="//api.tvpage.com/v1/videos/"+c+"/products?X-login-id="+d,g="tvp_"+Math.floor(555*Math.random());f+="&callback="+g;var h=b.createElement("script");h.src=f,a[g||"callback"]=function(a){e(a&&a.length&&"function"==typeof e?a:[])},b.body.appendChild(h)}},g=function(a,b){a&&a.length?b.classList.remove("tvp-no-products"):b.classList.add("tvp-no-products")},h=function(f){for(var g=Utils.getByClass("iframe-content"),h=Utils.getByClass("tvp-products"),i=b.createDocumentFragment(),j=0;j<f.length;j++){var k=f[j],l=k.id,m=k.entityIdParent;c.track("pi",{vd:k.entityIdParent,ct:l,pg:d});var n=k.title||"";n=Utils.trimText(n,50);var o=k.price||"";o=Utils.trimPrice(o);var p=b.createElement("div");p.innerHTML='<a id="tvp-product-'+l+'" class="tvp-product" data-vd="'+m+'" href="'+k.linkUrl+'"><div class="tvp-product-image" style="background-image:url('+k.imageUrl+')"></div><div class="tvp-product-data"><p>'+n+"</p><h2>"+o+"</h2><button>View Details</button></div></a>",i.appendChild(p)}for(var q=h.getElementsByClassName("tvp-product"),r=0;r<q.length;r++)q[r].removeEventListener("click",e,!1);if(h.innerHTML="",f.length){var s=b.createElement("p");s.classList.add("tvp-products-headline"),s.innerHTML="Related Products",h.appendChild(s)}var t=b.createElement("div");t.classList.add("tvp-products-carousel"),t.appendChild(i),h.appendChild(t);for(var u=h.getElementsByClassName("tvp-product"),r=0;r<u.length;r++)u[r].addEventListener("click",e,!1);var v=function(){setTimeout(function(){var b=$(t),c={slidesToSlide:1,slidesToShow:1,arrows:!1};f.length>1&&(c.centerMode=!0,c.centerPadding="25px"),b.on("init",function(){setTimeout(function(){a.parent&&a.parent.postMessage({event:"tvp_sidebar:modal_resized",height:g.offsetHeight+"px"},"*")},0)}),b.slick(c)},10)};"undefined"==typeof $.fn.slick?$.ajax({dataType:"script",cache:!0,url:b.body.getAttribute("data-domain")+"/sidebar/js/vendor/slick-min.js"}).done(v):v()},i=function(){var b=Utils.getByClass("iframe-content"),e=function(c){var d=JSON.parse(JSON.stringify(c.runTime));d.data=c.data,d.onResize=function(c){!c&&a.parent&&a.parent.postMessage({event:"tvp_sidebar:modal_resized",height:b.offsetHeight+"px"},"*")},d.onNext=function(d){d&&(Utils.isset(d,"products")?h(d.products):f(d.assetId,c.runTime.loginid||c.runTime.loginId,function(a){setTimeout(function(){g(a,b),h(a)},0)}),a.parent&&a.parent.postMessage({event:"tvp_sidebar:player_next",next:d},"*"))};new Player("tvp-player-el",d,c.selectedVideo.id)};a.addEventListener("message",function(a){if(a&&Utils.isset(a,"data")&&Utils.isset(a.data,"event")){var b=a.data;if("tvp_sidebar:modal_data"===b.event){e(b);var i=b.runTime.loginid||b.runTime.loginId;d=b.runTime.channel.id||b.runTime.channelid,c=new Analytics,c.initConfig({logUrl:"//api.tvpage.com/v1/__tvpa.gif",domain:Utils.isset(location,"hostname")?location.hostname:"",loginId:i});var j=b.selectedVideo;Utils.isset(j,"products")?h(j.products):f(j.id,i,function(a){setTimeout(function(){h(a),g(a,Utils.getByClass("iframe-content"))},0)})}}}),setTimeout(function(){a.parent&&a.parent.postMessage({event:"tvp_sidebar:modal_initialized",height:b.offsetHeight+"px"},"*")},0)},j=function(a){return"undefined"==typeof a};if(j(a.TVPage)||j(a._tvpa)||j(a.jQuery)||j(a.Utils)||j(a.Analytics)||j(a.Player)){var k=0;!function b(){setTimeout(function(){j(a.TVPage)||j(a._tvpa)||j(a.jQuery)||j(a.Utils)||j(a.Analytics)||j(a.Player)?++k<50?b():void 0:i()},150)}()}else i()}(window,document);