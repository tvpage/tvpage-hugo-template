!function(){function a(a){return document.getElementById(a)}function b(a,b){return a.hasOwnProperty(b)}function c(a){return"null"==typeof a}function d(a,b){return a.classList&&a.classList.contains(b)}function e(){return window.parent&&b(window.parent,"__TVPage__")?window.parent.__TVPage__:null}function f(a){return"object"==typeof a}function g(a){return"function"==typeof a}function h(a,b){return a&&(b(a)?a:h(a.parentNode,b))}function i(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a}function j(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function k(a,b){var c;return a.currentStyle?c=a.currentStyle[b]:window.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b)),c}function l(a,b){var c=document.createElement("script"),d=a.base||"",e=a.params||{},f=0;for(var h in e)e.hasOwnProperty(h)&&(d+=(f>0?"&":"?")+h+"="+e[h],++f);if(g(b)){var i="tvp_callback_"+Math.random().toString(36).substring(7);window[i]=function(a){g(b)&&b(a)},d+="&callback="+i}c.src=d,n.appendChild(c)}var m=navigator.userAgent,n=document.body,o={};o.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(m),o.isIOS=/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(m)&&!window.MSStream,o.getWidgetHeight=function(){return Math.floor(a("skeleton").getBoundingClientRect().height)},o.now=function(a){var b=window;if("parent"===a&&b.parent&&(b=b.parent),b.performance)return b.performance.now()},o.isNull=c,o.isObject=f,o.attr=function(a,b){return a.getAttribute(b)},o.createEl=function(a){return document.createElement(a)},o.isEmptyObject=j,o.stopEvent=function(a){a&&(a.preventDefault(),a.stopPropagation())},o.closest=h,o.getRealTargetByClass=function(a,b){return d(a,b)?a:h(a,function(a){return d(a,b)})},o.remove=function(a){a&&a.parentNode.removeChild(a)},o.addClass=function(a,b){a&&a.classList.add(b)},o.removeClass=function(a,b){a&&a.classList.remove(b)},o.removeObjNulls=function(a){for(var b in a)a.hasOwnProperty(b)&&null===a[b]&&delete a[b];return a},o.getById=a,o.hasClass=d,o.loadScript=l,o.sendMessage=function(a){window.parent&&window.parent.postMessage(a,"*")},o.getByClass=function(a){return document.getElementsByClassName(a||"")[0]},o.isUndefined=function(a){return void 0===a},o.isFunction=g,o.copy=function(a){return JSON.parse(JSON.stringify(a))},o.hasKey=b,o.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},o.formatDuration=function(a){if(void 0!==a){var b=new Date(0,0,0);b.setSeconds(Number(a));var c=function(a){return a<10?"0"+a:a};return(b.getHours()||"")+c(b.getMinutes())+":"+c(b.getSeconds())}},o.formatDate=function(a){var b=new Date(1e3*Number(a)),c=""+(b.getMonth()+1),d=""+b.getDate(),e=b.getFullYear();return c.length<2&&(c="0"+c),d.length<2&&(d="0"+d),[c,d,e].join("/")},o.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),void 0!==c}},o.extend=i,o.debounce=function(a,b,c){var d=null;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},o.trimText=function(a,b){var c=a||"",d=b?Number(b):0;return a.length>d&&(c=c.substring(0,Number(d))+"..."),c},o.profile=function(a,c){b(a,"profile")&&a.profile&&l({base:a.profile_base_url,params:i({loc_id:a.id,loginId:a.loginId,channelId:a.channelId,type_id:a.type,run_id:a.runId,url:location.hostname},c)})},o.trimPrice=function(a){var b=a||"";return b=b.toString().replace(/[^0-9.]+/g,""),b=parseFloat(b).toFixed(2),b=b>0?"$"+b:""},o.rowerize=function(a,b){for(var c=[],d=a.length,e=0;e<d;e+=b)c.push(a.slice(e,e+b));return c},o.isEvent=function(a){return a&&a.data&&a.data.event},o.getWindowWidth=function(a){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},o.getWindowHeight=function(a){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},o.addProps=function(a,b){if(j(b)||j(b))return a;for(var c in b)a[c]=b[c];return a},o.getParentConfig=function(a){var c=e();if(!c||!c.config||!b(c.config,a))throw new Error("no config");return c.config[a]},o.tmpl=function(a,b){return!(!a||"object"!=typeof b)&&a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return void 0!==e&&null!==e?e:""})},o.getStyle=k,window.Utils=o}(),function(){function a(){this.config=null}a.prototype.getGlobal=function(){return window._tvpa||[]},a.prototype.getConfigBase=function(a){var b=a||{};return{logUrl:b.logUrl||"",li:b.li||b.loginId||b.loginid,gaDomain:b.domain||""}},a.prototype.initConfig=function(a){this.config=this.getConfigBase(a),a&&a.firstPartyCookies&&a.cookieDomain&&(this.config.firstPartyCookieDomain=a.cookieDomain),this.getGlobal().push(["config",this.config])},a.prototype.track=function(a,b){void 0!==a&&void 0!==b&&this.getGlobal().push(["track",a,b])},window.Analytics=a}(),function(){function a(a,b,c){this.options=b||{},this.data=this.options.data||[],this.config=c||{},this.eventPrefix=c.events.prefix,this.templates=this.options.templates,this.channel=this.config.channel||{},this.loading=!1,this.el="string"==typeof a?document.getElementById(a):a,this.loadMoreButton=Utils.getById("load-more"),this.itemClass=".sidebar-item",this.itemsPerPage=this.config.items_per_page||6,this.itemsPerRow=this.config.items_per_row||2,this.onLoad=Utils.isFunction(b.onLoad)?b.onLoad:null,this.onItemClick=Utils.isFunction(b.onItemClick)?b.onItemClick:null,this.onReadyCalled=!1,this.page=0,this.isLastPage=!1}a.prototype.parse=function(){for(var a=this.data.length,b=0;b<a;b++)Utils.isFunction(this.options.parse)&&this.options.parse(this.data[b])},a.prototype.onReady=function(){if(!this.onReadyCalled){var a=this.options.onReady;Utils.isFunction(a)&&a(),this.data.length>=this.itemsPerPage?(Utils.addClass(this.loadMoreButton,"ready"),this.handleLoadMoreClick()):Utils.remove(this.loadMoreButton),this.onReadyCalled=!0}},a.prototype.render=function(){function a(a){for(var b='<div class="row mt-2">',c=a.length,d=0;d<c;d++)b+=Utils.tmpl(this.templates.item,a[d]);return b+="</div>"}function b(){for(var b="",c=0;c<e;c++)for(var f=d[c],g=Utils.rowerize(f,this.itemsPerRow),h=g.length,i=0;i<h;i++)b+=a.call(this,g[i]);return b}var c=this.data;if(c.length){this.parse();var d=Utils.rowerize(c,this.itemsPerPage),e=d.length;this.el.innerHTML=Utils.tmpl(this.templates.list,this.config),this.el.querySelector("#sidebar-container").innerHTML=b.call(this),this.onReady(),this.handleClick()}},a.prototype.load=function(a){this.loading=!0;var b=this;Utils.loadScript({base:this.config.api_base_url+"/channels/"+this.config.channelId+"/videos",params:Utils.extend(this.channel.parameters||{},{"X-login-id":this.config.loginId,p:this.page,n:this.itemsPerPage,o:this.config.videos_order_by,od:this.config.videos_order_direction,callback:"tvpcallback"})},function(c){b.onLoad&&b.onLoad(c),(!c.length||c.length<b.itemsPerPage)&&(b.isLastPage=!0),b.loading=!1,b.data=c,a(c)})},a.prototype.next=function(){this.isLastPage?(this.page=0,this.isLastPage=!1):this.page++},a.prototype.handleClick=function(){for(var a=this.options.clickDefaultStop,b=this.options.onClick,c=Utils.isFunction(b)?b:function(b){a&&Utils.stopEvent(b)},d=this.el.querySelectorAll(this.itemClass),e=d.length,f=0;f<e;f++)d[f].removeEventListener("click",c,!1),d[f].addEventListener("click",c,!1)},a.prototype.handleLoadMoreClick=function(){function a(){b.loading||(b.next(),b.load(function(a){a.length?b.render(a):(b.next(),b.load(function(a){b.render(a)}))}))}var b=this;this.loadMoreButton.removeEventListener("click",a,!1),this.loadMoreButton.addEventListener("click",a,!1)},a.prototype.initialize=function(){},window.Grid=a}(),function(){function a(){Utils.sendMessage({event:h+":widget_resize",height:Utils.getWidgetHeight()})}function b(){function a(a){return a.title=Utils.trimText(a.title,25),a}function b(){Utils.remove(k.querySelector(".videos-skel-delete"))}function c(a){f.channel.videos=f.channel.videos.concat(a)}function d(a){a&&a.target&&(Utils.sendMessage({event:h+":widget_modal_open",clicked:Utils.attr(Utils.getRealTargetByClass(a.target,"video"),"data-id")}),f.profiling.modal_ready={start:Utils.now("parent")})}var e=new Grid("videos",{data:g,templates:{list:j.videos.list,item:j.videos.item},parse:a,onReady:b,onClick:d,onLoad:c},f);e.initialize(),e.render()}function c(){var a=new Analytics,b={domain:location.hostname||"",logUrl:i+"/__tvpa.gif",li:f.loginId};f.firstPartyCookies&&f.cookieDomain&&(b.firstPartyCookieDomain=f.cookieDomain),a.initConfig(b),a.track("ci",{li:f.loginId})}var d=document.body,e=d.getAttribute("data-id"),f=window.parent.__TVPage__.config[e],g=f.channel.videos,h=(f.channel.parameters,f.events.prefix),i=f.api_base_url,j=(f.channelId,f.templates),k=document.getElementById("skeleton"),l=0;!function b(){setTimeout(function(){f.debug&&console.log("css loaded poll...");var c=document.getElementById("bscheck");if("hidden"===getComputedStyle(c,null).getPropertyValue("visibility")){var d=document.getElementById("widget-title");d.innerHTML=f.title_text,d.classList.add("ready"),k.style.visibility="visible",k.style.opacity="1",a(),f.profiling.skeleton_shown=Utils.now("parent")}else++l<1e3&&b()},5)}();var m=0,n=["Utils","Analytics","Grid"];!function d(){setTimeout(function(){console.log("deps poll...");for(var e=!0,f=0;f<n.length;f++)void 0===window[n[f]]&&(e=!1);if(e){c(),b();var g=!0;window.addEventListener("resize",function(){if(g)return void(g=!1);a()})}else++m<1e3&&d()},5)}()}();