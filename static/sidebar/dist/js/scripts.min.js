!function(){function a(a,b){if(this.options=a||{},this.config=b||{},Utils.isUndefined(this.options.domain))throw new Error("need domain")}a.prototype.initialize=function(){var a=this;Utils.globalPoll(["_tvpa"],function(){var b=a.options;b.firstPartyCookies&&b.cookieDomain&&(b.firstPartyCookieDomain=b.cookieDomain);var c="";if(b.logUrl?c=b.logUrl:a.config.api_base_url&&(c=a.config.api_base_url+"/__tvpa.gif"),!c)throw new Error("can't build logUrl");_tvpa.push(["config",{li:b.loginId,domain:b.domain,logUrl:c,firstPartyCookies:a.config.firstpartycookies,cookieDomain:a.config.cookiedomain}])})},a.prototype.track=function(a,b){var c=this.config.loginId;if(Utils.isUndefined(a)||Utils.isUndefined(c))throw new Error("bad event or loginId",a);Utils.globalPoll(["_tvpa"],function(){_tvpa.push(a,b||{li:c})})},window.Analytics=a}(),function(){function a(a,b,c){this.options=b||{},this.data=this.options.data||[],this.config=c||{},this.eventPrefix=c.events.prefix,this.templates=this.options.templates,this.channel=this.config.channel||{},this.loading=!1,this.el="string"==typeof a?document.getElementById(a):a,this.loadMoreButton=Utils.getById("load-more"),this.itemClass=".sidebar-item",this.itemsPerPage=this.config.items_per_page||6,this.itemsPerRow=this.config.items_per_row||2,this.onLoad=Utils.isFunction(b.onLoad)?b.onLoad:null,this.onItemClick=Utils.isFunction(b.onItemClick)?b.onItemClick:null,this.onReadyCalled=!1,this.page=0,this.isLastPage=!1}a.prototype.parse=function(){for(var a=this.data.length,b=0;b<a;b++)Utils.isFunction(this.options.parse)&&this.options.parse(this.data[b])},a.prototype.onReady=function(){if(!this.onReadyCalled){var a=this.options.onReady;Utils.isFunction(a)&&a(),this.data.length>=this.itemsPerPage?(Utils.addClass(this.loadMoreButton,"ready"),this.handleLoadMoreClick()):Utils.remove(this.loadMoreButton),this.onReadyCalled=!0}},a.prototype.render=function(){function a(a){for(var b='<div class="row mt-2">',c=a.length,d=0;d<c;d++)b+=Utils.tmpl(this.templates.item,a[d]);return b+="</div>"}function b(){for(var b="",c=0;c<e;c++)for(var f=d[c],g=Utils.rowerize(f,this.itemsPerRow),h=g.length,i=0;i<h;i++)b+=a.call(this,g[i]);return b}var c=this.data;if(c.length){this.parse();var d=Utils.rowerize(c,this.itemsPerPage),e=d.length;this.el.innerHTML=Utils.tmpl(this.templates.list,this.config),this.el.querySelector("#sidebar-container").innerHTML=b.call(this),this.onReady(),this.handleClick()}},a.prototype.load=function(a){this.loading=!0;var b=this;Utils.loadScript({base:this.config.api_base_url+"/channels/"+this.config.channelId+"/videos",params:Utils.extend(this.channel.parameters||{},{"X-login-id":this.config.loginId,p:this.page,n:this.itemsPerPage,o:this.config.videos_order_by,od:this.config.videos_order_direction,callback:"tvpcallback"})},function(c){b.onLoad&&b.onLoad(c),(!c.length||c.length<b.itemsPerPage)&&(b.isLastPage=!0),b.loading=!1,b.data=c,a(c)})},a.prototype.next=function(){this.isLastPage?(this.page=0,this.isLastPage=!1):this.page++},a.prototype.handleClick=function(){for(var a=this.options.clickDefaultStop,b=this.options.onClick,c=Utils.isFunction(b)?b:function(b){a&&Utils.stopEvent(b)},d=this.el.querySelectorAll(this.itemClass),e=d.length,f=0;f<e;f++)d[f].removeEventListener("click",c,!1),d[f].addEventListener("click",c,!1)},a.prototype.handleLoadMoreClick=function(){function a(){b.loading||(b.next(),b.load(function(a){a.length?b.render(a):(b.next(),b.load(function(a){b.render(a)}))}))}var b=this;this.loadMoreButton.removeEventListener("click",a,!1),this.loadMoreButton.addEventListener("click",a,!1)},a.prototype.initialize=function(){},window.Grid=a}();