!function(){function a(a){return document.getElementById(a)}function b(a,b){return a.hasOwnProperty(b)}function c(a,b){return a.classList&&a.classList.contains(b)}function d(){return window.parent&&b(window.parent,"__TVPage__")?window.parent.__TVPage__:null}function e(a){return"function"==typeof a}function f(a,b){return a&&(b(a)?a:f(a.parentNode,b))}function g(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function h(a,b){var c;return a.currentStyle?c=a.currentStyle[b]:window.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b)),c}var i=navigator.userAgent,j=document.body,k={};k.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(i),k.isIOS=/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(i)&&!window.MSStream,k.getWidgetHeight=function(){return Math.floor(a("skeleton").getBoundingClientRect().height)},k.logSnapshot=function(a){window.performance&&"undefined"!=typeof startTime&&console.log(a,performance.now()-startTime)},k.attr=function(a,b){return a.getAttribute(b)},k.createEl=function(a){return document.createElement(a)},k.isEmptyObject=g,k.stopEvent=function(a){a&&(a.preventDefault(),a.stopPropagation())},k.closest=f,k.getRealTargetByClass=function(a,b){return c(a,b)?a:f(a,function(a){return c(a,b)})},k.remove=function(a){a.parentNode.removeChild(a)},k.addClass=function(a,b){a.classList.add(b)},k.removeClass=function(a,b){a.classList.remove(b)},k.removeObjNulls=function(a){for(var b in a)a.hasOwnProperty(b)&&null===a[b]&&delete a[b];return a},k.getById=a,k.hasClass=c,k.loadScript=function(a,b){var c=document.createElement("script"),d=a.base||"",f=a.params||{},g=0;for(var h in f)f.hasOwnProperty(h)&&(d+=(g>0?"&":"?")+h+"="+f[h],++g);var i="tvp_callback_"+Math.random().toString(36).substring(7);window[i]=function(a){e(b)&&b(a)},d+="&callback="+i,c.src=d,j.appendChild(c)},k.sendMessage=function(a){window.parent&&window.parent.postMessage(a,"*")},k.getByClass=function(a){return document.getElementsByClassName(a||"")[0]},k.isUndefined=function(a){return void 0===a},k.isFunction=e,k.copy=function(a){return JSON.parse(JSON.stringify(a))},k.hasKey=b,k.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},k.formatDuration=function(a){if(void 0!==a){var b=new Date(0,0,0);b.setSeconds(Number(a));var c=function(a){return a<10?"0"+a:a};return(b.getHours()||"")+c(b.getMinutes())+":"+c(b.getSeconds())}},k.formatDate=function(a){var b=new Date(1e3*Number(a)),c=""+(b.getMonth()+1),d=""+b.getDate(),e=b.getFullYear();return c.length<2&&(c="0"+c),d.length<2&&(d="0"+d),[c,d,e].join("/")},k.isset=function(a,b){if(arguments.length){var c=a;return b&&(c=a[b]),void 0!==c}},k.extend=function(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},k.debounce=function(a,b,c){var d=null;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},k.trimText=function(a,b){var c=a||"",d=b?Number(b):0;return a.length>d&&(c=c.substring(0,Number(d))+"..."),c},k.trimPrice=function(a){var b=a||"";return b=b.toString().replace(/[^0-9.]+/g,""),b=parseFloat(b).toFixed(2),b=b>0?"$"+b:""},k.rowerize=function(a,b){for(var c=[],d=a.length,e=0;e<d;e+=b)c.push(a.slice(e,e+b));return c},k.isEvent=function(a){return a&&a.data&&a.data.event},k.getWindowWidth=function(a){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},k.getWindowHeight=function(a){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},k.addProps=function(a,b){if(g(b)||g(b))return a;for(var c in b)a[c]=b[c];return a},k.getParentConfig=function(a){var c=d();if(!c||!c.config||!b(c.config,a))throw new Error("no config");return c.config[a]},k.tmpl=function(a,b){return!(!a||"object"!=typeof b)&&a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return void 0!==e&&null!==e?e:""})},k.getStyle=h,window.Utils=k}(),function(){function a(){this.config=null}a.prototype.getGlobal=function(){return window._tvpa||[]},a.prototype.getConfigBase=function(a){var b=a||{};return{logUrl:b.logUrl||"",li:b.li||b.loginId||b.loginid,gaDomain:b.domain||""}},a.prototype.initConfig=function(a){this.config=this.getConfigBase(a),a&&a.firstPartyCookies&&a.cookieDomain&&(this.config.firstPartyCookieDomain=a.cookieDomain),this.getGlobal().push(["config",this.config])},a.prototype.track=function(a,b){void 0!==a&&void 0!==b&&this.getGlobal().push(["track",a,b])},window.Analytics=a}(),function(){function a(a,b,c){this.options=b||{},this.data=this.options.data||[],this.config=c||{},this.eventPrefix=c.events.prefix,this.templates=this.options.templates,this.channel=this.config.channel||{},this.loading=!1,this.el="string"==typeof a?document.getElementById(a):a,this.loadMoreButton=Utils.getById("load-more"),this.itemClass=".sidebar-item",this.itemsPerPage=this.config.items_per_page||6,this.itemsPerRow=this.config.items_per_row||2,this.onLoad=Utils.isFunction(b.onLoad)?b.onLoad:null,this.onItemClick=Utils.isFunction(b.onItemClick)?b.onItemClick:null,this.onReadyCalled=!1,this.page=0,this.isLastPage=!1}a.prototype.parse=function(){for(var a=this.data.length,b=0;b<a;b++)Utils.isFunction(this.options.parse)&&this.options.parse(this.data[b])},a.prototype.onReady=function(){if(!this.onReadyCalled){var a=this.options.onReady;Utils.isFunction(a)&&a(),this.data.length>=this.itemsPerPage?(Utils.addClass(this.loadMoreButton,"ready"),this.handleLoadMoreClick()):Utils.remove(this.loadMoreButton),this.onReadyCalled=!0}},a.prototype.render=function(){function a(a){for(var b='<div class="row mt-2">',c=a.length,d=0;d<c;d++)b+=Utils.tmpl(this.templates.item,a[d]);return b+="</div>"}function b(){for(var b="",c=0;c<e;c++)for(var f=d[c],g=Utils.rowerize(f,this.itemsPerRow),h=g.length,i=0;i<h;i++)b+=a.call(this,g[i]);return b}var c=this.data;if(c.length){this.parse();var d=Utils.rowerize(c,this.itemsPerPage),e=d.length;this.el.innerHTML=Utils.tmpl(this.templates.list,this.config),this.el.querySelector("#sidebar-container").innerHTML=b.call(this),this.onReady(),this.handleClick()}},a.prototype.load=function(a){this.loading=!0;var b=this;Utils.loadScript({base:this.config.api_base_url+"/channels/"+this.config.channelId+"/videos",params:Utils.extend(this.channel.parameters||{},{"X-login-id":this.config.loginId,p:this.page,n:this.itemsPerPage,o:this.config.videos_order_by,od:this.config.videos_order_direction,callback:"tvpcallback"})},function(c){b.onLoad&&b.onLoad(c),(!c.length||c.length<b.itemsPerPage)&&(b.isLastPage=!0),b.loading=!1,b.data=c,a(c)})},a.prototype.next=function(){this.isLastPage?(this.page=0,this.isLastPage=!1):this.page++},a.prototype.handleClick=function(){for(var a=this.options.clickDefaultStop,b=this.options.onClick,c=Utils.isFunction(b)?b:function(b){a&&Utils.stopEvent(b)},d=this.el.querySelectorAll(this.itemClass),e=d.length,f=0;f<e;f++)d[f].removeEventListener("click",c,!1),d[f].addEventListener("click",c,!1)},a.prototype.handleLoadMoreClick=function(){function a(){b.loading||(b.next(),b.load(function(a){a.length?b.render(a):(b.next(),b.load(function(a){b.render(a)}))}))}var b=this;this.loadMoreButton.removeEventListener("click",a,!1),this.loadMoreButton.addEventListener("click",a,!1)},a.prototype.initialize=function(){},window.Grid=a}(),function(){function a(){function a(a){return a.title=Utils.trimText(a.title,25),a}function b(){Utils.remove(j.querySelector(".videos-skel-delete"))}function c(a){e.channel.videos=f.concat(a)}function d(a){if(a&&a.target){var b=Utils.getRealTargetByClass(a.target,"video");b&&Utils.sendMessage({event:g+":widget_videos_sidebar_click",clicked:Utils.attr(b,"data-id")})}}var h=new Grid("videos",{data:f,templates:{list:i.videos.list,item:i.videos.item},parse:a,onReady:b,onClick:d,onLoad:c},e);h.initialize(),h.render()}function b(){var a=new Analytics,b={domain:location.hostname||"",logUrl:h+"/__tvpa.gif",li:e.loginId};e.firstPartyCookies&&e.cookieDomain&&(b.firstPartyCookieDomain=e.cookieDomain),a.initConfig(b),a.track("ci",{li:e.loginId})}var c=document.body,d=c.getAttribute("data-id"),e=window.parent.__TVPage__.config[d],f=e.channel.videos,g=(e.channel.parameters,e.events.prefix),h=e.api_base_url,i=(e.channelId,e.templates),j=document.getElementById("skeleton"),k=0,l=["Utils","Analytics","Grid"];!function d(){setTimeout(function(){console.log("deps poll...");for(var e=!0,f=0;f<l.length;f++)void 0===window[l[f]]&&(e=!1);if(e){Utils.isMobile&&Utils.addClass(c,"mobile"),b(),a();var h=!0;window.addEventListener("resize",function(){if(h)return void(h=!1);Utils.sendMessage({event:g+":widget_resize",height:Utils.getWidgetHeight()+10})})}else++k<1e3&&d()},5)}();var m=0;!function a(){setTimeout(function(){if(console.log("css loaded poll..."),"hidden"===Utils.getStyle(Utils.getById("bs-checker"),"visibility")){var b=Utils.getById("widget-title");b.innerHTML=e.title_text,Utils.addClass(b,"ready"),Utils.sendMessage({event:g+":widget_resize",height:Utils.getWidgetHeight()+10})}else++m<1e3&&a()},10)}()}();