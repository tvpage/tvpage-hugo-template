!function(){function a(a){return document.getElementById(a)}function b(a,b){return a.hasOwnProperty(b)}function c(a){return void 0===a}function d(a,b){return a.classList&&a.classList.contains(b)}function e(a){return"object"==typeof a}function f(a){return"function"==typeof a}function g(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a}function h(a,b,c){var d;return a.currentStyle?d=a.currentStyle[c]:window.getComputedStyle&&(d=document.defaultView.getComputedStyle(a,null).getPropertyValue(b)),d}function i(a,b){var c=document.createElement("script"),d=a.base||"",e=a.params||{},g=0;for(var h in e)e.hasOwnProperty(h)&&(d+=(g>0?"&":"?")+h+"="+e[h],++g);if(f(b)){var i="tvp_callback_"+Math.random().toString(36).substring(7);window[i]=function(a){f(b)&&b(a)},d+="&callback="+i}c.src=d,document.body.appendChild(c)}function j(a,b){return a&&(b(a)?a:j(a.parentNode,b))}function k(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function l(a){console&&console.log&&console.log("%c "+(a||""),o)}function m(a,c){b(a,"profile")&&a.profile&&l(c.metric_type+": "+c.metric_value+"ms")}var n={isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isIOS:/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(navigator.userAgent)&&!window.MSStream},o="color: blue;font-size: 14px;font-weight: bold;display: block;";n.getById=a,n.hasKey=b,n.hasClass=d,n.isObject=e,n.isFunction=f,n.extend=g,n.getStyle=h,n.loadScript=i,n.getWidgetHeight=function(){return Math.floor(a("skeleton").getBoundingClientRect().height)},n.now=function(a){var b=window;if("parent"===a&&b.parent&&(b=b.parent),b.performance)return b.performance.now()},n.isString=function(a){return"string"==typeof a},n.isNumber=function(a){return"number"==typeof a},n.isNull=function(a){return null===a},n.isUndefined=c,n.hasDot=function(a){return a.search(/\./)},n.compact=function(a){for(var b in a)a.hasOwnProperty(b)&&!a[b]&&delete a[b];return a},n.inDom=function(a){return document.body.contains(a)},n.attr=function(a,b){return a.getAttribute(b)},n.createEl=function(a){return document.createElement(a)},n.stopEvent=function(a){a&&(a.preventDefault(),a.stopPropagation())},n.closest=j,n.getRealTargetByClass=function(a,b){return d(a,b)?a:j(a,function(a){return d(a,b)})},n.remove=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},n.addClass=function(a,b){a&&a.classList.add(b)},n.removeClass=function(a,b){a&&a.classList.remove(b)},n.removeNulls=function(a){for(var b in a)a.hasOwnProperty(b)&&null===a[b]&&delete a[b];return a},n.sendMessage=function(a){window.parent&&window.parent.postMessage(a,"*")},n.getByClass=function(a){return document.getElementsByClassName(a||"")[0]},n.copy=function(a){return JSON.parse(JSON.stringify(a))},n.isEmpty=k,n.formatDuration=function(a){if(!c(a)){var b=new Date(0,0,0);b.setSeconds(Number(a));var d=function(a){return a<10?"0"+a:a};return(b.getHours()||"")+d(b.getMinutes())+":"+d(b.getSeconds())}},n.debounce=function(a,b,c){var d=null;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},n.trimText=function(a,b){var c=a||"",d=b?Number(b):0;return a.length>d&&(c=c.substring(0,Number(d))+"..."),c},n.log=l,n.profile=m,n.sendProfileData=function(a){setTimeout(function(){if(a&&e(a)){var b=a.profiling||{};for(var c in b)e(b[c])||m(a,{metric_type:c,metric_value:b[c]})}},1e3)},n.trimPrice=function(a){var b=a||"";return b=b.toString().replace(/[^0-9.]+/g,""),b=parseFloat(b).toFixed(2),b=b>0?"$"+b:""},n.rowerize=function(a,b){for(var c=[],d=a.length,e=0;e<d;e+=b)c.push(a.slice(e,e+b));return c},n.isEvent=function(a){return a&&a.data&&a.data.event},n.getWindowWidth=function(a){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},n.getWindowHeight=function(a){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},n.tmpl=function(a,b){return!(!a||"object"!=typeof b)&&a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return void 0!==e&&null!==e?e:""})},n.poll=function(a,b){if(!f(a))throw"need function for check argument";var c=0;!function d(){setTimeout(function(){if(a()&&f(b))b();else{if(!(++c<1e3))throw new Error("poll condition not met after checking 1000 times");d()}},10)}()},n.getUrlParams=function(){if(window.location){for(var a={},b=location.search.substr(1).split("&"),c=b.length,d=[],e=0;e<c;e++)d.push(b[e]);for(var f=d.length,e=0;e<f;e++){var g=d[e].split("=");g[1]&&(a[g[0]]=g[1])}return a}},n.globalPoll=function(a,b){a=(a||[]).filter(Boolean);var c=a.length,d=0;!function e(){setTimeout(function(){for(var g,h=!0,i=0;i<c;i++){var j=a[i];void 0===window[j]&&(h=!1,g=j)}if(h)f(b)&&b();else{if(!(++d<1e4))throw new Error("missing global: "+g);e()}},10)}()},window.Utils=n}(),function(){function a(a,b){if(!b||!Utils.isObject(b))throw new Error("bad global config");var c=b.loginId;if(!c||isNaN(Number(c)))throw new Error("bad loginId");var d=b.api_base_url,e=a&&a.logUrl?a.logUrl:d?d+"/__tvpa.gif":null;if(!e)throw"can't build url";this.options=a||{},this.config=b,this.logUrl=e}a.prototype.getCookiesConfig=function(){var a=!!this.config.firstPartyCookies;if(a){var b=this.config.cookieDomain;if(Utils.hasDot(b))return{firstPartyCookies:a,cookieDomain:b};throw"bad cookie domain"}return{}},a.prototype.initialize=function(){var a={domain:this.options.domain,li:this.config.loginId,logUrl:this.logUrl};a=Utils.extend(a,this.getCookiesConfig()),Utils.globalPoll(["_tvpa"],function(){_tvpa.push(["config",a])}),this.options.ciTrack&&this.track("ci")},a.prototype.track=function(a,b){function c(a,b){if("pi"===a||"pk"===a)return{vd:b.entityIdParent,ct:b.id,pg:e.config.channelId}}if(!a)throw"need event";b=b||{li:this.config.loginId};var d,e=this;if(Array.isArray(b))d=function(){var a,d=b.length;for(a=0;a<d;a++)e.track("pi",c("pi",b[a]))};else{if(!Utils.isObject(b))throw"bad track data";d=function(){_tvpa.push(["track",a,c(b)])}}Utils.globalPoll(["_tvpa"],d)},window.Analytics=a}(),function(){function a(a,b){if(!b||!Utils.isObject(b))throw new Error("bad global config");if(!(a&&Utils.isObject(b)&&Utils.hasKey(a,"selector")&&a.selector))throw"need selector";var c,d=a.selector;if(Utils.isString(d)){if(!(c=Utils.getById(d)))throw"element not in dom"}else{if(!d||!Utils.inDom(d))throw"element not in dom";c=d}this.config=b,this.options=a,this.el=c,this.assets=[],this.initialResize=!0,this.startWith=this.options.startWith||null,this.currentIndex=null}a.prototype.getOption=function(a){return Utils.isUndefined(this.config[a])?null:this.config[a]},a.prototype.getCallableOption=function(a){return Utils.isFunction(this.options[a])?this.options[a]:null},a.prototype.getPlayButtonOptions=function(){return Utils.compact({height:this.getOption("play_button_height"),width:this.getOption("play_button_width"),backgroundColor:this.getOption("play_button_background_color"),borderRadius:this.getOption("play_button_border_radius"),borderWidth:this.getOption("play_button_border_width"),borderColor:this.getOption("play_button_border_color"),borderStyle:this.getOption("play_button_border_style"),iconColor:this.getOption("play_button_icon_color")})},a.prototype.setControlsOptions=function(){this.controls=Utils.compact({active:!0,seekBar:Utils.compact({progressColor:this.getOption("progress_color")}),floater:Utils.compact({controlbarColor:this.getOption("control_bar_color"),iconColor:this.getOption("icon_color"),removeControls:this.getOption("remove_controls")}),playbutton:this.getPlayButtonOptions(),overlayColor:this.getOption("overlay_color"),overlayOpacity:this.getOption("overlay_opacity")})},a.prototype.setAdvertisingOptions=function(){if(this.options.advertising&&!Utils.isEmpty(this.options.advertising)){var a=this.options.advertising;this.advertising=Utils.compact({enabled:!!a.enabled,adServerUrl:a.adserverurl||null,adTimeout:a.adtimeout||"2000",maxAds:a.maxads||"100",adInterval:Utils.isUndefined(a.adinterval)?"0":String(a.adinterval)})}},a.prototype.shallCue=function(a){return Utils.isMobile||a&&!this.autonext||!this.autoplay},a.prototype.play=function(a,b){if("string"==typeof a){var c=this.getAssetById(a);a=c.asset,this.currentIndex=c.index}else this.currentIndex=this.assets.indexOf(a);this.instance&&(this.shallCue(b)?this.instance.cueVideo(a):this.instance.loadVideo(a))},a.prototype.controlBarZindex=function(){var a=this.el.querySelector("#ControlBarFloater");a&&a.parentNode&&(a.parentNode.style.zIndex="9999")},a.prototype.getParentSize=function(a){var b=this.el.parentNode,c=null;return"width"===a?c=b.offsetWidth:"height"===a&&(c=b.offsetHeight),c},a.prototype.resize=function(){if(this.getParentSize){var a=arguments[0]||this.getParentSize("width"),b=arguments[1]||this.getParentSize("height"),c=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;this.instance&&!c&&this.instance.resize(a,b),this.initialResize=!1,this.onResize&&this.onResize(this.initialResize,[a,b])}},a.prototype.handleWindowResize=function(){var a=this,b=function(){setTimeout(function(){a.resize.call(a)},0)};window.removeEventListener("resize",b,!1),window.addEventListener("resize",b,!1)},a.prototype.handleClick=function(){var a=this.options.clickDefaultStop,b=this.options.onClick,c=Utils.isFunction(b)?b:function(b){a&&Utils.stopEvent(b)};this.el.removeEventListener("click",c,!1),this.el.addEventListener("click",c,!1)},a.prototype.analyticsConfig=function(){var a=this.config,b=this.options,c=a.loginId,d={domain:location.hostname||"",logUrl:a.api_base_url+"/__tvpa.gif",li:c};a.firstPartyCookies&&a.cookieDomain&&(d.firstPartyCookieDomain=a.cookieDomain),Utils.globalPoll(["_tvpa"],function(){_tvpa.push(["config",d]),b.ciTrack&&_tvpa.push(["track","ci",{li:c}])})},a.prototype.getCurrentAsset=function(){return this.assets[this.currentIndex]},a.prototype.getAssetById=function(a){var b,c=this.assets,d=c.length;for(b=0;b<d;b++)if(c[b].assetId==a)return{index:b,asset:c[b]}},a.prototype.onReady=function(a,b){this.onReadyCalled?this.resize.call(this):(this.resize.call(this),this.analyticsConfig(),this.controlBarZindex(),this.handleWindowResize(),this.handleClick(),this.onPlayerReady&&this.onPlayerReady(this))},a.prototype.handleVideoEnded=function(){this.currentIndex++,this.assets[this.currentIndex]||(this.currentIndex=0);var a=this.assets[this.currentIndex];this.play(a,!0),this.onNext&&this.onNext(a)},a.prototype.onStateChange=function(a){if("tvp:media:videoended"===a&&this.handleVideoEnded(),this.onChange){(this.getCurrentAsset()||{}).currentTime=this.instance.getCurrentTime(),this.onChange(a)}},a.prototype.getConfig=function(){return Utils.compact({sharing:this.sharing,techOrder:this.getOption("tech_order"),mediaProviders:this.getOption("media_providers"),analytics:{tvpa:this.getOption("analytics")},apiBaseUrl:this.getOption("api_base_url"),swf:this.flashUrl,divId:this.el.id,controls:this.controls,version:this.version,advertising:this.advertising,preload:this.getOption("preload"),poster:this.getOption("poster"),overlay:this.getOption("overlay")})},a.prototype.startPlayer=function(){var a=this.getConfig(),b=this;Utils.globalPoll(["TVPage"],function(){a.onReady=function(a,c){b.onReady(a,c),b.onReadyCalled=!0,b.config.player=b.player},a.onStateChange=function(a){b.onStateChange(a)},b.player=new TVPage.player(a);var c=b.player.options.globalRunId;b.instance=TVPage.instances[c];var d=0,e=b.assets[d];if(b.startWith){var f=b.getAssetById(b.startWith);d=f.index,e=f.asset}b.currentIndex=d,b.play(e)})},a.prototype.getChannelId=function(){var a=0,b=this.options;return b.channel?a=b.channel.id:b.channelId?a=b.channelId:b.channelid&&(a=b.channelid),a},a.prototype.buildAsset=function(a){if(Utils.isEmpty(a))return{};var b=a.asset;return b.assetId=a.id,b.assetTitle=a.title,b.assetTitleTextEncoded=a.titleTextEncoded,b.loginId=a.loginId,b.type=b.type||"youtube",b.analyticsObj={pg:a.parentId||this.getChannelId(),vd:b.assetId,li:b.loginId},b.sources=b.sources||[{file:b.videoId}],b},a.prototype.addAssets=function(a){a=a||[];var b,c,d=a.length;for(b=0;b<d;b++)c=a[b],this.getAssetById(c.id)||this.assets.push(this.buildAsset(c))},a.prototype.setConfig=function(){this.version=this.getOption("player_version"),this.flashUrl="//cdnjs.tvpage.com/tvplayer/tvp-"+this.version+".swf",this.autoplay=this.getOption("autoplay"),this.autonext=this.getOption("autonext"),this.sharing=this.getOption("sharing"),this.onChange=this.getCallableOption("onChange"),this.onResize=this.getCallableOption("onResize"),this.onNext=this.getCallableOption("onNext"),this.onPlayerReady=this.getCallableOption("onPlayerReady"),this.onClick=this.getCallableOption("onClick")},a.prototype.initialize=function(){this.setControlsOptions(),this.setAdvertisingOptions(),this.setConfig();var a=this.options.data;Array.isArray(a)&&a.length&&(this.addAssets(a),this.startPlayer())},window.Player=a}(),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("../main");"function"==typeof define&&define.amd?define(d):(window.PerfectScrollbar=d,void 0===window.Ps&&(window.Ps=d))},{"../main":6}],2:[function(a,b,c){"use strict";function d(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle&&window.getComputedStyle(a,null)?window.getComputedStyle(a,null).getPropertyValue(b):a.style[b]}function e(a,b,c){return"number"==typeof c&&(c=c.toString()+"px"),a.style[b]=c,a}function f(a,b){for(var c in b){var d=b[c];"number"==typeof d&&(d=d.toString()+"px"),a.style[c]=d}return a}var g={};g.create=function(a,b){var c=document.createElement(a);return c.className=b,c},g.appendTo=function(a,b){return b.appendChild(a),a},g.css=function(a,b,c){return"object"==typeof b?f(a,b):void 0===c?d(a,b):e(a,b,c)},g.matches=function(a,b){return void 0!==a.matches?a.matches(b):a.msMatchesSelector(b)},g.remove=function(a){void 0!==a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a)},g.queryChildren=function(a,b){return Array.prototype.filter.call(a.childNodes,function(a){return g.matches(a,b)})},b.exports=g},{}],3:[function(a,b,c){"use strict";var d=function(a){this.element=a,this.events={}};d.prototype.bind=function(a,b){void 0===this.events[a]&&(this.events[a]=[]),this.events[a].push(b),this.element.addEventListener(a,b,!1)},d.prototype.unbind=function(a,b){var c=void 0!==b;this.events[a]=this.events[a].filter(function(d){return!(!c||d===b)||(this.element.removeEventListener(a,d,!1),!1)},this)},d.prototype.unbindAll=function(){for(var a in this.events)this.unbind(a)};var e=function(){this.eventElements=[]};e.prototype.eventElement=function(a){var b=this.eventElements.filter(function(b){return b.element===a})[0];return void 0===b&&(b=new d(a),this.eventElements.push(b)),b},e.prototype.bind=function(a,b,c){this.eventElement(a).bind(b,c)},e.prototype.unbind=function(a,b,c){this.eventElement(a).unbind(b,c)},e.prototype.unbindAll=function(){for(var a=0;a<this.eventElements.length;a++)this.eventElements[a].unbindAll()},e.prototype.once=function(a,b,c){var d=this.eventElement(a),e=function(a){d.unbind(b,e),c(a)};d.bind(b,e)},b.exports=e},{}],4:[function(a,b,c){"use strict";b.exports=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}()},{}],5:[function(a,b,c){"use strict";function d(a){var b,c=["ps--in-scrolling"];return b=void 0===a?["ps--x","ps--y"]:["ps--"+a],c.concat(b)}var e=a("./dom"),f=c.toInt=function(a){return parseInt(a,10)||0};c.isEditable=function(a){return e.matches(a,"input,[contenteditable]")||e.matches(a,"select,[contenteditable]")||e.matches(a,"textarea,[contenteditable]")||e.matches(a,"button,[contenteditable]")},c.removePsClasses=function(a){for(var b=0;b<a.classList.length;b++){var c=a.classList[b];0===c.indexOf("ps-")&&a.classList.remove(c)}},c.outerWidth=function(a){return f(e.css(a,"width"))+f(e.css(a,"paddingLeft"))+f(e.css(a,"paddingRight"))+f(e.css(a,"borderLeftWidth"))+f(e.css(a,"borderRightWidth"))},c.startScrolling=function(a,b){for(var c=d(b),e=0;e<c.length;e++)a.classList.add(c[e])},c.stopScrolling=function(a,b){for(var c=d(b),e=0;e<c.length;e++)a.classList.remove(c[e])},c.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},{"./dom":2}],6:[function(a,b,c){"use strict";var d=a("./plugin/destroy"),e=a("./plugin/initialize"),f=a("./plugin/update");b.exports={initialize:e,update:f,destroy:d}},{"./plugin/destroy":8,"./plugin/initialize":16,"./plugin/update":20}],7:[function(a,b,c){"use strict";b.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},{}],8:[function(a,b,c){"use strict";var d=a("../lib/helper"),e=a("../lib/dom"),f=a("./instances");b.exports=function(a){var b=f.get(a);b&&(b.event.unbindAll(),e.remove(b.scrollbarX),e.remove(b.scrollbarY),e.remove(b.scrollbarXRail),e.remove(b.scrollbarYRail),d.removePsClasses(a),f.remove(a))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17}],9:[function(a,b,c){"use strict";function d(a,b){function c(a){return a.getBoundingClientRect()}var d=function(a){a.stopPropagation()};b.event.bind(b.scrollbarY,"click",d),b.event.bind(b.scrollbarYRail,"click",function(d){var e=d.pageY-window.pageYOffset-c(b.scrollbarYRail).top,h=e>b.scrollbarYTop?1:-1;g(a,"top",a.scrollTop+h*b.containerHeight),f(a),d.stopPropagation()}),b.event.bind(b.scrollbarX,"click",d),b.event.bind(b.scrollbarXRail,"click",function(d){var e=d.pageX-window.pageXOffset-c(b.scrollbarXRail).left,h=e>b.scrollbarXLeft?1:-1;g(a,"left",a.scrollLeft+h*b.containerWidth),f(a),d.stopPropagation()})}var e=a("../instances"),f=a("../update-geometry"),g=a("../update-scroll");b.exports=function(a){d(a,e.get(a))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],10:[function(a,b,c){"use strict";function d(a,b){function c(c){var e=d+c*b.railXRatio,g=Math.max(0,b.scrollbarXRail.getBoundingClientRect().left)+b.railXRatio*(b.railXWidth-b.scrollbarXWidth);b.scrollbarXLeft=e<0?0:e>g?g:e;var h=f.toInt(b.scrollbarXLeft*(b.contentWidth-b.containerWidth)/(b.containerWidth-b.railXRatio*b.scrollbarXWidth))-b.negativeScrollAdjustment;j(a,"left",h)}var d=null,e=null,h=function(b){c(b.pageX-e),i(a),b.stopPropagation(),b.preventDefault()},k=function(){f.stopScrolling(a,"x"),b.event.unbind(b.ownerDocument,"mousemove",h)};b.event.bind(b.scrollbarX,"mousedown",function(c){e=c.pageX,d=f.toInt(g.css(b.scrollbarX,"left"))*b.railXRatio,f.startScrolling(a,"x"),b.event.bind(b.ownerDocument,"mousemove",h),b.event.once(b.ownerDocument,"mouseup",k),c.stopPropagation(),c.preventDefault()})}function e(a,b){function c(c){var e=d+c*b.railYRatio,g=Math.max(0,b.scrollbarYRail.getBoundingClientRect().top)+b.railYRatio*(b.railYHeight-b.scrollbarYHeight);b.scrollbarYTop=e<0?0:e>g?g:e;var h=f.toInt(b.scrollbarYTop*(b.contentHeight-b.containerHeight)/(b.containerHeight-b.railYRatio*b.scrollbarYHeight));j(a,"top",h)}var d=null,e=null,h=function(b){c(b.pageY-e),i(a),b.stopPropagation(),b.preventDefault()},k=function(){f.stopScrolling(a,"y"),b.event.unbind(b.ownerDocument,"mousemove",h)};b.event.bind(b.scrollbarY,"mousedown",function(c){e=c.pageY,d=f.toInt(g.css(b.scrollbarY,"top"))*b.railYRatio,f.startScrolling(a,"y"),b.event.bind(b.ownerDocument,"mousemove",h),b.event.once(b.ownerDocument,"mouseup",k),c.stopPropagation(),c.preventDefault()})}var f=a("../../lib/helper"),g=a("../../lib/dom"),h=a("../instances"),i=a("../update-geometry"),j=a("../update-scroll");b.exports=function(a){var b=h.get(a);d(a,b),e(a,b)}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],11:[function(a,b,c){"use strict";function d(a,b){function c(c,d){var e=a.scrollTop;if(0===c){if(!b.scrollbarYActive)return!1;if(0===e&&d>0||e>=b.contentHeight-b.containerHeight&&d<0)return!b.settings.wheelPropagation}var f=a.scrollLeft;if(0===d){if(!b.scrollbarXActive)return!1;if(0===f&&c<0||f>=b.contentWidth-b.containerWidth&&c>0)return!b.settings.wheelPropagation}return!0}var d=!1;b.event.bind(a,"mouseenter",function(){d=!0}),b.event.bind(a,"mouseleave",function(){d=!1});var g=!1;b.event.bind(b.ownerDocument,"keydown",function(j){if(!(j.isDefaultPrevented&&j.isDefaultPrevented()||j.defaultPrevented)){var k=f.matches(b.scrollbarX,":focus")||f.matches(b.scrollbarY,":focus");if(d||k){var l=document.activeElement?document.activeElement:b.ownerDocument.activeElement;if(l){if("IFRAME"===l.tagName)l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(e.isEditable(l))return}var m=0,n=0;switch(j.which){case 37:m=j.metaKey?-b.contentWidth:j.altKey?-b.containerWidth:-30;break;case 38:n=j.metaKey?b.contentHeight:j.altKey?b.containerHeight:30;break;case 39:m=j.metaKey?b.contentWidth:j.altKey?b.containerWidth:30;break;case 40:n=j.metaKey?-b.contentHeight:j.altKey?-b.containerHeight:-30;break;case 33:n=90;break;case 32:n=j.shiftKey?90:-90;break;case 34:n=-90;break;case 35:n=j.ctrlKey?-b.contentHeight:-b.containerHeight;break;case 36:n=j.ctrlKey?a.scrollTop:b.containerHeight;break;default:return}i(a,"top",a.scrollTop-n),i(a,"left",a.scrollLeft+m),h(a),(g=c(m,n))&&j.preventDefault()}}})}var e=a("../../lib/helper"),f=a("../../lib/dom"),g=a("../instances"),h=a("../update-geometry"),i=a("../update-scroll");b.exports=function(a){d(a,g.get(a))}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],12:[function(a,b,c){"use strict";function d(a,b){function c(c,d){var e=a.scrollTop;if(0===c){if(!b.scrollbarYActive)return!1;if(0===e&&d>0||e>=b.contentHeight-b.containerHeight&&d<0)return!b.settings.wheelPropagation}var f=a.scrollLeft;if(0===d){if(!b.scrollbarXActive)return!1;if(0===f&&c<0||f>=b.contentWidth-b.containerWidth&&c>0)return!b.settings.wheelPropagation}return!0}function d(a){var b=a.deltaX,c=-1*a.deltaY;return void 0!==b&&void 0!==c||(b=-1*a.wheelDeltaX/6,c=a.wheelDeltaY/6),a.deltaMode&&1===a.deltaMode&&(b*=10,c*=10),b!==b&&c!==c&&(b=0,c=a.wheelDelta),a.shiftKey?[-c,-b]:[b,c]}function e(b,c){var d=a.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(d){var e=window.getComputedStyle(d);if(![e.overflow,e.overflowX,e.overflowY].join("").match(/(scroll|auto)/))return!1;var f=d.scrollHeight-d.clientHeight;if(f>0&&!(0===d.scrollTop&&c>0||d.scrollTop===f&&c<0))return!0;var g=d.scrollLeft-d.clientWidth;if(g>0&&!(0===d.scrollLeft&&b<0||d.scrollLeft===g&&b>0))return!0}return!1}function h(h){var j=d(h),k=j[0],l=j[1];e(k,l)||(i=!1,b.settings.useBothWheelAxes?b.scrollbarYActive&&!b.scrollbarXActive?(l?g(a,"top",a.scrollTop-l*b.settings.wheelSpeed):g(a,"top",a.scrollTop+k*b.settings.wheelSpeed),i=!0):b.scrollbarXActive&&!b.scrollbarYActive&&(k?g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed):g(a,"left",a.scrollLeft-l*b.settings.wheelSpeed),i=!0):(g(a,"top",a.scrollTop-l*b.settings.wheelSpeed),g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed)),f(a),(i=i||c(k,l))&&(h.stopPropagation(),h.preventDefault()))}var i=!1;void 0!==window.onwheel?b.event.bind(a,"wheel",h):void 0!==window.onmousewheel&&b.event.bind(a,"mousewheel",h)}var e=a("../instances"),f=a("../update-geometry"),g=a("../update-scroll");b.exports=function(a){d(a,e.get(a))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],13:[function(a,b,c){"use strict";function d(a,b){b.event.bind(a,"scroll",function(){f(a)})}var e=a("../instances"),f=a("../update-geometry");b.exports=function(a){d(a,e.get(a))}},{"../instances":17,"../update-geometry":18}],14:[function(a,b,c){"use strict";function d(a,b){function c(){var a=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===a.toString().length?null:a.getRangeAt(0).commonAncestorContainer}function d(){j||(j=setInterval(function(){return f.get(a)?(h(a,"top",a.scrollTop+k.top),h(a,"left",a.scrollLeft+k.left),void g(a)):void clearInterval(j)},50))}function i(){j&&(clearInterval(j),j=null),e.stopScrolling(a)}var j=null,k={top:0,left:0},l=!1;b.event.bind(b.ownerDocument,"selectionchange",function(){a.contains(c())?l=!0:(l=!1,i())}),b.event.bind(window,"mouseup",function(){l&&(l=!1,i())}),b.event.bind(window,"keyup",function(){l&&(l=!1,i())}),b.event.bind(window,"mousemove",function(b){if(l){var c={x:b.pageX,y:b.pageY},f={left:a.offsetLeft,right:a.offsetLeft+a.offsetWidth,top:a.offsetTop,bottom:a.offsetTop+a.offsetHeight};c.x<f.left+3?(k.left=-5,e.startScrolling(a,"x")):c.x>f.right-3?(k.left=5,e.startScrolling(a,"x")):k.left=0,c.y<f.top+3?(k.top=f.top+3-c.y<5?-5:-20,e.startScrolling(a,"y")):c.y>f.bottom-3?(k.top=c.y-f.bottom+3<5?5:20,e.startScrolling(a,"y")):k.top=0,0===k.top&&0===k.left?i():d()}})}var e=a("../../lib/helper"),f=a("../instances"),g=a("../update-geometry"),h=a("../update-scroll");b.exports=function(a){d(a,f.get(a))}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],15:[function(a,b,c){"use strict";function d(a,b,c,d){function e(c,d){var e=a.scrollTop,f=a.scrollLeft,g=Math.abs(c),h=Math.abs(d);if(h>g){if(d<0&&e===b.contentHeight-b.containerHeight||d>0&&0===e)return!b.settings.swipePropagation}else if(g>h&&(c<0&&f===b.contentWidth-b.containerWidth||c>0&&0===f))return!b.settings.swipePropagation;return!0}function i(b,c){h(a,"top",a.scrollTop-c),h(a,"left",a.scrollLeft-b),g(a)}function j(){u=!0}function k(){u=!1}function l(a){return a.targetTouches?a.targetTouches[0]:a}function m(a){return!(a.pointerType&&"pen"===a.pointerType&&0===a.buttons||(!a.targetTouches||1!==a.targetTouches.length)&&(!a.pointerType||"mouse"===a.pointerType||a.pointerType===a.MSPOINTER_TYPE_MOUSE))}function n(a){if(m(a)){v=!0;var b=l(a);q.pageX=b.pageX,q.pageY=b.pageY,r=(new Date).getTime(),null!==t&&clearInterval(t),a.stopPropagation()}}function o(a){if(!v&&b.settings.swipePropagation&&n(a),!u&&v&&m(a)){var c=l(a),d={pageX:c.pageX,pageY:c.pageY},f=d.pageX-q.pageX,g=d.pageY-q.pageY;i(f,g),q=d;var h=(new Date).getTime(),j=h-r;j>0&&(s.x=f/j,s.y=g/j,r=h),e(f,g)&&(a.stopPropagation(),a.preventDefault())}}function p(){!u&&v&&(v=!1,b.settings.swipeEasing&&(clearInterval(t),t=setInterval(function(){return f.get(a)&&(s.x||s.y)?Math.abs(s.x)<.01&&Math.abs(s.y)<.01?void clearInterval(t):(i(30*s.x,30*s.y),s.x*=.8,void(s.y*=.8)):void clearInterval(t)},10)))}var q={},r=0,s={},t=null,u=!1,v=!1;c?(b.event.bind(window,"touchstart",j),b.event.bind(window,"touchend",k),b.event.bind(a,"touchstart",n),b.event.bind(a,"touchmove",o),b.event.bind(a,"touchend",p)):d&&(window.PointerEvent?(b.event.bind(window,"pointerdown",j),b.event.bind(window,"pointerup",k),b.event.bind(a,"pointerdown",n),b.event.bind(a,"pointermove",o),b.event.bind(a,"pointerup",p)):window.MSPointerEvent&&(b.event.bind(window,"MSPointerDown",j),b.event.bind(window,"MSPointerUp",k),b.event.bind(a,"MSPointerDown",n),b.event.bind(a,"MSPointerMove",o),b.event.bind(a,"MSPointerUp",p)))}var e=a("../../lib/helper"),f=a("../instances"),g=a("../update-geometry"),h=a("../update-scroll");b.exports=function(a){if(e.env.supportsTouch||e.env.supportsIePointer){d(a,f.get(a),e.env.supportsTouch,e.env.supportsIePointer)}}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],16:[function(a,b,c){"use strict";var d=a("./instances"),e=a("./update-geometry"),f={"click-rail":a("./handler/click-rail"),"drag-scrollbar":a("./handler/drag-scrollbar"),keyboard:a("./handler/keyboard"),wheel:a("./handler/mouse-wheel"),touch:a("./handler/touch"),selection:a("./handler/selection")},g=a("./handler/native-scroll");b.exports=function(a,b){a.classList.add("ps");var c=d.add(a,"object"==typeof b?b:{});a.classList.add("ps--theme_"+c.settings.theme),c.settings.handlers.forEach(function(b){f[b](a)}),g(a),e(a)}},{"./handler/click-rail":9,"./handler/drag-scrollbar":10,"./handler/keyboard":11,"./handler/mouse-wheel":12,"./handler/native-scroll":13,"./handler/selection":14,"./handler/touch":15,"./instances":17,"./update-geometry":18}],17:[function(a,b,c){"use strict";function d(a,b){function c(){a.classList.add("ps--focus")}function d(){a.classList.remove("ps--focus")}var e=this;e.settings=i();for(var f in b)e.settings[f]=b[f];e.containerWidth=null,e.containerHeight=null,e.contentWidth=null,e.contentHeight=null,e.isRtl="rtl"===j.css(a,"direction"),e.isNegativeScroll=function(){var b=a.scrollLeft,c=null;return a.scrollLeft=-1,c=a.scrollLeft<0,a.scrollLeft=b,c}(),e.negativeScrollAdjustment=e.isNegativeScroll?a.scrollWidth-a.clientWidth:0,e.event=new k,e.ownerDocument=a.ownerDocument||document,e.scrollbarXRail=j.appendTo(j.create("div","ps__scrollbar-x-rail"),a),e.scrollbarX=j.appendTo(j.create("div","ps__scrollbar-x"),e.scrollbarXRail),e.scrollbarX.setAttribute("tabindex",0),e.event.bind(e.scrollbarX,"focus",c),e.event.bind(e.scrollbarX,"blur",d),e.scrollbarXActive=null,e.scrollbarXWidth=null,e.scrollbarXLeft=null,e.scrollbarXBottom=h.toInt(j.css(e.scrollbarXRail,"bottom")),e.isScrollbarXUsingBottom=e.scrollbarXBottom===e.scrollbarXBottom,e.scrollbarXTop=e.isScrollbarXUsingBottom?null:h.toInt(j.css(e.scrollbarXRail,"top")),e.railBorderXWidth=h.toInt(j.css(e.scrollbarXRail,"borderLeftWidth"))+h.toInt(j.css(e.scrollbarXRail,"borderRightWidth")),j.css(e.scrollbarXRail,"display","block"),e.railXMarginWidth=h.toInt(j.css(e.scrollbarXRail,"marginLeft"))+h.toInt(j.css(e.scrollbarXRail,"marginRight")),j.css(e.scrollbarXRail,"display",""),e.railXWidth=null,e.railXRatio=null,e.scrollbarYRail=j.appendTo(j.create("div","ps__scrollbar-y-rail"),a),e.scrollbarY=j.appendTo(j.create("div","ps__scrollbar-y"),e.scrollbarYRail),e.scrollbarY.setAttribute("tabindex",0),e.event.bind(e.scrollbarY,"focus",c),e.event.bind(e.scrollbarY,"blur",d),e.scrollbarYActive=null,e.scrollbarYHeight=null,e.scrollbarYTop=null,e.scrollbarYRight=h.toInt(j.css(e.scrollbarYRail,"right")),e.isScrollbarYUsingRight=e.scrollbarYRight===e.scrollbarYRight,e.scrollbarYLeft=e.isScrollbarYUsingRight?null:h.toInt(j.css(e.scrollbarYRail,"left")),e.scrollbarYOuterWidth=e.isRtl?h.outerWidth(e.scrollbarY):null,e.railBorderYWidth=h.toInt(j.css(e.scrollbarYRail,"borderTopWidth"))+h.toInt(j.css(e.scrollbarYRail,"borderBottomWidth")),j.css(e.scrollbarYRail,"display","block"),e.railYMarginHeight=h.toInt(j.css(e.scrollbarYRail,"marginTop"))+h.toInt(j.css(e.scrollbarYRail,"marginBottom")),j.css(e.scrollbarYRail,"display",""),e.railYHeight=null,e.railYRatio=null}function e(a){return a.getAttribute("data-ps-id")}function f(a,b){a.setAttribute("data-ps-id",b)}function g(a){a.removeAttribute("data-ps-id")}var h=a("../lib/helper"),i=a("./default-setting"),j=a("../lib/dom"),k=a("../lib/event-manager"),l=a("../lib/guid"),m={};c.add=function(a,b){var c=l();return f(a,c),m[c]=new d(a,b),m[c]},c.remove=function(a){delete m[e(a)],g(a)},c.get=function(a){return m[e(a)]}},{"../lib/dom":2,"../lib/event-manager":3,"../lib/guid":4,"../lib/helper":5,"./default-setting":7}],18:[function(a,b,c){"use strict";function d(a,b){return a.settings.minScrollbarLength&&(b=Math.max(b,a.settings.minScrollbarLength)),
a.settings.maxScrollbarLength&&(b=Math.min(b,a.settings.maxScrollbarLength)),b}function e(a,b){var c={width:b.railXWidth};b.isRtl?c.left=b.negativeScrollAdjustment+a.scrollLeft+b.containerWidth-b.contentWidth:c.left=a.scrollLeft,b.isScrollbarXUsingBottom?c.bottom=b.scrollbarXBottom-a.scrollTop:c.top=b.scrollbarXTop+a.scrollTop,g.css(b.scrollbarXRail,c);var d={top:a.scrollTop,height:b.railYHeight};b.isScrollbarYUsingRight?b.isRtl?d.right=b.contentWidth-(b.negativeScrollAdjustment+a.scrollLeft)-b.scrollbarYRight-b.scrollbarYOuterWidth:d.right=b.scrollbarYRight-a.scrollLeft:b.isRtl?d.left=b.negativeScrollAdjustment+a.scrollLeft+2*b.containerWidth-b.contentWidth-b.scrollbarYLeft-b.scrollbarYOuterWidth:d.left=b.scrollbarYLeft+a.scrollLeft,g.css(b.scrollbarYRail,d),g.css(b.scrollbarX,{left:b.scrollbarXLeft,width:b.scrollbarXWidth-b.railBorderXWidth}),g.css(b.scrollbarY,{top:b.scrollbarYTop,height:b.scrollbarYHeight-b.railBorderYWidth})}var f=a("../lib/helper"),g=a("../lib/dom"),h=a("./instances"),i=a("./update-scroll");b.exports=function(a){var b=h.get(a);b.containerWidth=a.clientWidth,b.containerHeight=a.clientHeight,b.contentWidth=a.scrollWidth,b.contentHeight=a.scrollHeight;var c;a.contains(b.scrollbarXRail)||(c=g.queryChildren(a,".ps__scrollbar-x-rail"),c.length>0&&c.forEach(function(a){g.remove(a)}),g.appendTo(b.scrollbarXRail,a)),a.contains(b.scrollbarYRail)||(c=g.queryChildren(a,".ps__scrollbar-y-rail"),c.length>0&&c.forEach(function(a){g.remove(a)}),g.appendTo(b.scrollbarYRail,a)),!b.settings.suppressScrollX&&b.containerWidth+b.settings.scrollXMarginOffset<b.contentWidth?(b.scrollbarXActive=!0,b.railXWidth=b.containerWidth-b.railXMarginWidth,b.railXRatio=b.containerWidth/b.railXWidth,b.scrollbarXWidth=d(b,f.toInt(b.railXWidth*b.containerWidth/b.contentWidth)),b.scrollbarXLeft=f.toInt((b.negativeScrollAdjustment+a.scrollLeft)*(b.railXWidth-b.scrollbarXWidth)/(b.contentWidth-b.containerWidth))):b.scrollbarXActive=!1,!b.settings.suppressScrollY&&b.containerHeight+b.settings.scrollYMarginOffset<b.contentHeight?(b.scrollbarYActive=!0,b.railYHeight=b.containerHeight-b.railYMarginHeight,b.railYRatio=b.containerHeight/b.railYHeight,b.scrollbarYHeight=d(b,f.toInt(b.railYHeight*b.containerHeight/b.contentHeight)),b.scrollbarYTop=f.toInt(a.scrollTop*(b.railYHeight-b.scrollbarYHeight)/(b.contentHeight-b.containerHeight))):b.scrollbarYActive=!1,b.scrollbarXLeft>=b.railXWidth-b.scrollbarXWidth&&(b.scrollbarXLeft=b.railXWidth-b.scrollbarXWidth),b.scrollbarYTop>=b.railYHeight-b.scrollbarYHeight&&(b.scrollbarYTop=b.railYHeight-b.scrollbarYHeight),e(a,b),b.scrollbarXActive?a.classList.add("ps--active-x"):(a.classList.remove("ps--active-x"),b.scrollbarXWidth=0,b.scrollbarXLeft=0,i(a,"left",0)),b.scrollbarYActive?a.classList.add("ps--active-y"):(a.classList.remove("ps--active-y"),b.scrollbarYHeight=0,b.scrollbarYTop=0,i(a,"top",0))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-scroll":19}],19:[function(a,b,c){"use strict";var d=a("./instances"),e=function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!0),b};b.exports=function(a,b,c){if(void 0===a)throw"You must provide an element to the update-scroll function";if(void 0===b)throw"You must provide an axis to the update-scroll function";if(void 0===c)throw"You must provide a value to the update-scroll function";"top"===b&&c<=0&&(a.scrollTop=c=0,a.dispatchEvent(e("ps-y-reach-start"))),"left"===b&&c<=0&&(a.scrollLeft=c=0,a.dispatchEvent(e("ps-x-reach-start")));var f=d.get(a);"top"===b&&c>=f.contentHeight-f.containerHeight&&(c=f.contentHeight-f.containerHeight,c-a.scrollTop<=2?c=a.scrollTop:a.scrollTop=c,a.dispatchEvent(e("ps-y-reach-end"))),"left"===b&&c>=f.contentWidth-f.containerWidth&&(c=f.contentWidth-f.containerWidth,c-a.scrollLeft<=2?c=a.scrollLeft:a.scrollLeft=c,a.dispatchEvent(e("ps-x-reach-end"))),void 0===f.lastTop&&(f.lastTop=a.scrollTop),void 0===f.lastLeft&&(f.lastLeft=a.scrollLeft),"top"===b&&c<f.lastTop&&a.dispatchEvent(e("ps-scroll-up")),"top"===b&&c>f.lastTop&&a.dispatchEvent(e("ps-scroll-down")),"left"===b&&c<f.lastLeft&&a.dispatchEvent(e("ps-scroll-left")),"left"===b&&c>f.lastLeft&&a.dispatchEvent(e("ps-scroll-right")),"top"===b&&c!==f.lastTop&&(a.scrollTop=f.lastTop=c,a.dispatchEvent(e("ps-scroll-y"))),"left"===b&&c!==f.lastLeft&&(a.scrollLeft=f.lastLeft=c,a.dispatchEvent(e("ps-scroll-x")))}},{"./instances":17}],20:[function(a,b,c){"use strict";var d=a("../lib/helper"),e=a("../lib/dom"),f=a("./instances"),g=a("./update-geometry"),h=a("./update-scroll");b.exports=function(a){var b=f.get(a);b&&(b.negativeScrollAdjustment=b.isNegativeScroll?a.scrollWidth-a.clientWidth:0,e.css(b.scrollbarXRail,"display","block"),e.css(b.scrollbarYRail,"display","block"),b.railXMarginWidth=d.toInt(e.css(b.scrollbarXRail,"marginLeft"))+d.toInt(e.css(b.scrollbarXRail,"marginRight")),b.railYMarginHeight=d.toInt(e.css(b.scrollbarYRail,"marginTop"))+d.toInt(e.css(b.scrollbarYRail,"marginBottom")),e.css(b.scrollbarXRail,"display","none"),e.css(b.scrollbarYRail,"display","none"),g(a),h(a,"top",a.scrollTop),h(a,"left",a.scrollLeft),e.css(b.scrollbarXRail,"display",""),e.css(b.scrollbarYRail,"display",""))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-geometry":18,"./update-scroll":19}]},{},[1]),function(a,b){function c(a,b){d=this,e=!0,this.settings=b||{},this.player=a,this.playerEl=a.el,this.allVideos=[],this.page=0,this.lastPage=!1,this.isFetching=!1,this.itemsPerPage=b.items_per_page||6}var d,e;c.prototype.initialize=function(){d.appendMenu(),d.render(d.settings.channel.videos),d.bindClickEvents(),d.bindLoadMoreEvent(),d.listenToResize()},c.prototype.appendMenu=function(){var a=d.playerEl.firstChild.lastChild;if(a){var c=b.createDocumentFragment();d.slideMenu=b.createElement("div"),d.slideMenu.setAttribute("id","tvp-slide-menu"),d.slideMenu.innerHTML=d.settings.templates.menu,c.appendChild(d.slideMenu),a.parentNode.insertBefore(c,a.nextSibling)}},c.prototype.render=function(a){if(a&&a.length){d.lastPage=!a.length||a.length<d.settings.items_per_page;for(var b=a||[],c="",f="",g=0;g<b.length;g++){var h=b[g];h.title=Utils.trimText(h.title,100),h.duration=Utils.formatDuration(h.duration),h=d.setTagAttribute(d.settings,h),d.lastPage||(f+='<div class="tvp-no-videos"></div>'),c+=Utils.tmpl(d.settings.templates["menu-item"],h),d.allVideos.push(h)}d.hiddenMenu=d.slideMenu.querySelector("#tvp-hidden-menu"),d.deleteDivs(),d.hiddenMenu.innerHTML+=c+f,e&&(e=!1,d.setMenuHeight(d.playerEl.offsetHeight-36),d.setActiveItem(d.allVideos[0].id),Ps.initialize(d.hiddenMenu))}},c.prototype.setTagAttribute=function(a,b){if(!Utils.isUndefined(a.menu_item_play_category_tag_attribute)){var c=b[a.menu_item_play_category_tag_attribute];c&&(c=c.replace(/_/g," "),b.menuTagAttr=c)}return b},c.prototype.bindLoadMoreEvent=function(a){d.hiddenMenu.addEventListener("scroll",Utils.debounce(function(){var a=d.hiddenMenu.scrollTop,b=d.hiddenMenu.clientHeight-d.hiddenMenu.scrollHeight,c=100*a/b;c=Math.round(c),(c=Math.abs(c))>=55&&c<=100&&d.loadMore()},30))},c.prototype.bindClickEvents=function(){d.playerEl.addEventListener("click",function(a){var b=Utils.getRealTargetByClass(a.target,"tvp-hamburger"),c=Utils.getRealTargetByClass(a.target,"tvp-video");if(b)d.toggleMenu();else if(c){var e=c.id.split("-").pop(),f=d.allVideos.filter(function(a){return a.id===e});d.setActiveItem(e),d.player.play(d.player.buildAsset(f[0])),d.toggleMenu()}})},c.prototype.loadMore=function(){if(!this.lastPage&&!this.isFetching){this.page++,this.isFetching=!0;var a=this.settings.channel||{};Utils.loadScript({base:this.settings.api_base_url+"/channels/"+this.settings.channelId+"/videos",params:Utils.extend(a.parameters||{},{"X-login-id":this.settings.loginId,p:this.page,n:this.itemsPerPage})},function(a){d.isFetching=!1,d.lastPage=!a.length||a.length<d.itemsPerPage,d.player.addAssets(a),d.render(a)})}},c.prototype.toggleMenu=function(){d.slideMenu.classList.contains("active")?d.slideMenu.classList.remove("active"):d.slideMenu.classList.add("active")},c.prototype.hideMenu=function(){d.slideMenu.classList.remove("active")},c.prototype.listenToResize=function(){function b(a){var b=d.playerEl.parentNode.offsetHeight-36;d.setMenuHeight(b),Ps.update(d.hiddenMenu)}a.removeEventListener("resize",b,!1),a.addEventListener("resize",b,!1)},c.prototype.setMenuHeight=function(a){d.hiddenMenu.style.cssText="height:"+a+"px;"},c.prototype.deleteDivs=function(){d.tvpNoVideos=d.tvpNoVideos?d.tvpNoVideos:d.hiddenMenu.getElementsByClassName("tvp-no-videos");for(var a=d.tvpNoVideos.length-1;a>=0;a--)d.hiddenMenu.removeChild(d.tvpNoVideos[a]),Ps.update(d.hiddenMenu)},c.prototype.clearActiveItems=function(a){for(var b=a.length-1;b>=0;b--)a[b].classList.contains("active")&&a[b].classList.remove("active")},c.prototype.setActiveItem=function(a){d.tvpVid=b.querySelectorAll(".tvp-video"),d.clearActiveItems(d.tvpVid);for(var c=d.tvpVid.length-1;c>=0;c--){var e=d.tvpVid[c];e.id.split("-").pop()!==a||e.classList.contains("active")||e.classList.add("active")}},a.Menu=c}(window,document),function(){function a(){function a(){g&&(b=new Menu(c,d),b.initialize()),Utils.remove(Utils.getById("skeleton")),Utils.removeClass(c.el.parentNode,"hide"),d.profiling.widget_ready=Utils.now("parent")}function e(a){a&&g&&(b.setActiveItem(a.assetId),b.hideMenu())}function j(){g&&b.hideMenu()}function k(a,b){if(Utils.sendMessage({event:f,e:a,stateData:b}),"tvp:media:videoplaying"===a&&h){h=!1,d.profiling.video_playing=Utils.now("parent")-d.profiling.video_playing.start;var c=d.profiling;for(var e in c){var g=c[e];Utils.isObject(g)||Utils.profile(d,{metric_type:e,metric_value:g})}}}function l(a){if(a&&a.target){Utils.getRealTargetByClass(a.target,"tvplayer-playbutton")&&i&&(i=!1,d.profiling.video_playing={start:Utils.now("parent")})}}c=new Player({selector:"player",ciTrack:!0,data:d.channel.videos,onPlayerReady:a,onChange:k,onNext:e,onFullscreenChange:j,onClick:l},d),c.initialize(),d.profiling.video_playing={start:Utils.now("parent")}}var b,c,d=window.parent.__TVPage__.config[Utils.attr(document.body,"data-id")],e=d.events.prefix,f=e+":widget_player_change",g=d.playlist,h=!0,i=!0,j=["Utils","Player"];g&&j.push("Ps","Menu"),Utils.globalPoll(j,a)}();