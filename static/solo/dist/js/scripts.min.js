!function(a,b){function c(){this.initConfig=function(a){if(!(d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)))return console.log("need config");_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){if(!a||!b||!_tvpa)return console.log("no data");_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c};a.Analytics=c}(window,document),function(a,b){function c(c,h,i){if(c&&e(h)&&e(h.data)&&!(h.data.length<=0)){this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!e(h.autoplay)&&Number(h.autoplay),this.autonext=!e(h.autonext)||Number(h.autonext),this.version=e(h.player_version)?h.player_version:null,this.progressColor=e(h.progress_color)?h.progress_color:null,this.transcript=e(h.transcript)?h.transcript:null,this.removeControls=e(h.remove_controls)?h.remove_controls:null,this.analytics=e(h.analytics)?h.analytics:null,this.overlay=e(h.overlay)?h.overlay:null,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(f(d))break;var g=d.asset;g.assetId=d.id,g.assetTitle=d.title,g.loginId=d.loginId,e(d,"events")&&d.events.length?(g.analyticsLogUrl=d.analytics,g.analyticsObj=d.events[1].data):g.analyticsObj={pg:e(d,"parentId")?d.parentId:e(h,"channel")?h.channel.id:0,vd:d.id,li:d.loginId},g.sources||(g.sources=[{file:g.videoId}]),g.type=g.type||"youtube",b.push(g)}return b}(h.data);var j=this;this.addOverlay=function(a){var c=b.createElement("div");c.className="tvp-overlay",c.style.backgroundImage='url("'+a.thumbnailUrl+'")',c.innerHTML='<div class="tvp-overlay-cover"></div><svg class="tvp-play" viewBox="0 0 200 200"><polygon points="70, 55 70, 145 145, 100"></polygon></svg>';var d=function(){(function(){this.removeEventListener("click",d,!1),this.parentNode.removeChild(this)}).call(this),j.instance&&j.instance.play()};c.removeEventListener("click",d,!1),c.addEventListener("click",d,!1),this.el.appendChild(c)},this.play=function(a,b){if(a){var c=!1,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(d||e(this.autonext)&&!this.autonext)&&(c=!0):(d||e(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:e(location,"hostname")?location.hostname:"",loginId:a.loginId};e(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?(this.instance.cueVideo(a),("mp4"===a.type||this.overlay)&&this.addOverlay(a)):this.instance.loadVideo(a)}},this.resize=function(){if(j.instance&&!j.isFullScreen){var a,b;if(arguments.length&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=j.el.parentNode;a=c.clientWidth,b=c.clientHeight}j.instance.resize(a,b),this.onResize&&(this.onResize(j.initialResize,[a,b]),j.initialResize=!1)}},this.onReady=function(b,c){if(j.instance=c,j.resize(),e(a,"BigScreen")&&(BigScreen.onchange=function(){j.isFullScreen=!j.isFullScreen}),a.location!==a.parent.location&&d){var f=function(a){if(a&&e(a,"data")&&"tvp_solo:holder_resize"===(a.data.event||"")){var b=a.data.size||[];j.resize(b[0],b[1])}};a.removeEventListener("message",f,!1),a.addEventListener("message",f,!1)}else{var h=g(j.resize,50);a.removeEventListener("resize",h,!1),a.addEventListener("resize",h)}j.el.querySelector(".tvp-progress-bar").style.backgroundColor=j.progressColor;for(var k=0,l=0;l<j.assets.length;l++)j.assets[l].assetId===(i||"")&&(k=l);j.current=k,j.play(j.assets[j.current])},j.onStateChange=function(a){"tvp:media:videoended"===a&&(j.current++,j.assets[j.current]||(j.current=0),j.play(j.assets[j.current],!0))};var k=0;!function b(){setTimeout(function(){e(a,"TVPage")&&e(a,"_tvpa")||!(++k<50)?j.player=new TVPage.player({techOrder:"html5,flash",analytics:{tvpa:j.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+j.version+"-flash.swf",onReady:j.onReady,onStateChange:j.onStateChange,divId:j.el.id,controls:{active:!0,floater:{removeControls:j.removeControls,transcript:j.transcript}}}):b()},150)}()}}var d=/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(navigator.userAgent)&&!a.MSStream,e=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},f=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},g=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}};a.Player=c}(window,document),function(a){function b(){a.body.classList.contains("dynamic")&&function(b,c){h(b,a.body),g(c,b,function(a){c.data=a||[],new Player("tvp-player-el-"+b,c)})}(c(),f("dynamic"))}var c=function(){return"tvp_"+Math.floor(50005*Math.random())},d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},e=function(b,c){var d=a.createElement("script");if(d.src=b.src,c&&"function"==typeof c){window[b.cbName||"callback"]=c;(b.body||a.body).appendChild(d)}},f=function(b){var c=function(a){return d(a)&&d(a,"__TVPage__")&&d(a.__TVPage__,"config")?a.__TVPage__.config:console.log("need config")},e={};if("dynamic"===b){var f=c(parent),g=a.body.getAttribute("data-id");if(!d(f,g))return console.log("need settings");e=f[g],e.name=g}else if("inline"===b&&b&&b.length){var f=c(parent);e=f[b],e.name=b}else if("static"===b){var f=c(window),g=a.body.getAttribute("data-id");if(!d(f,g))return console.log("need settings");e=f[g],e.name=g}return e},g=function(a,b,c){e({src:function(){var c=a.channel,d=c.parameters,e="//api.tvpage.com/v1/channels/"+c.id+"/videos?X-login-id="+a.loginid;for(var f in d)e+="&"+f+"="+d[f];return e+="&callback="+b}(),cbName:b},c)},h=function(b,c){if(!b||!c)return console.log("need target");var d=a.createDocumentFragment(),e=a.createElement("div");e.classList.add("tvp-player"),e.innerHTML='<div id="tvp-player-el-'+b+'" class="tvp-player-el"></div></div>',d.appendChild(e),c.appendChild(d)};if(d(window.Player))b();else{var i=0;!function a(){setTimeout(function(){!d(window.Player)&&++i<50?a():b()},150)}()}}(document);