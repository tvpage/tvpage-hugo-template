!function(a,b){function c(){this.initConfig=function(a){if(!(d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)))return console.log("need config");_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){if(!a||!b||!_tvpa)return console.log("no data");_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c};a.Analytics=c}(window,document),function(a,b){function c(c,g,h){if(!c||!d(g)||!d(g.data)||g.data.length<=0)return console.log("bad args");this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!d(g.autoplay)&&Number(g.autoplay),this.autonext=!d(g.autonext)||Number(g.autonext),this.version=d(g.version)?g.version:"1.8.5",this.progressColor=d(g.progressColor)?g.progressColor:"#E57211",this.transcript=!!d(g.transcript)&&g.transcript,this.removeControls=d(g.removeControls)?g.removeControls:["tvplogo","hd"],this.analytics=!d(g.analytics)||g.analytics,this.onResize=d(g.onResize)&&"function"==typeof g.onResize?g.onResize:null,this.onNext=d(g.onNext)&&"function"==typeof g.onNext?g.onNext:null,this.overlay=!!d(g.overlay)&&g.overlay,this.overlayColor=d(g.overlayColor)?g.overlayColor:null,this.overlayOpacity=d(g.overlayOpacity)?g.overlayOpacity:"0.5",this.playButtonBackgroundColor=d(g.playButtonBackgroundColor)?g.playButtonBackgroundColor:"fff",this.playButtonBorderRadius=d(g.playButtonBorderRadius)?g.playButtonBorderRadius:"0",this.playButtonBorderWidth=d(g.playButtonBorderWidth)?g.playButtonBorderWidth:"0",this.playButtonBorderColor=d(g.playButtonBorderColor)?g.playButtonBorderColor:"000",this.playButtonIconColor=d(g.playButtonIconColor)?g.playButtonIconColor:"000",this.playButtonWidth=d(g.playButtonWidth)?g.playButtonWidth:"55px",this.playButtonHeight=d(g.playButtonHeight)?g.playButtonHeight:"55px",this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var f=a[c];if(e(f))break;var h=f.asset;h.assetId=f.id,h.assetTitle=f.title,h.loginId=f.loginId,d(f,"events")&&f.events.length?(h.analyticsLogUrl=f.analytics,h.analyticsObj=f.events[1].data):h.analyticsObj={pg:d(f,"parentId")?f.parentId:d(g,"channel")?g.channel.id:0,vd:f.id,li:f.loginId},h.sources||(h.sources=[{file:h.videoId}]),h.type=h.type||"youtube",b.push(h)}return b}(g.data);var i=this;this.addOverlay=function(a){var c=b.createElement("div");c.classList.add("tvp-overlay"),c.style.backgroundImage='url("'+a+'")';var d=this.overlayColor?"#"+this.overlayColor:"transparent";c.innerHTML='<div class="tvp-overlay-cover" style="opacity:'+this.overlayOpacity+";background-image:linear-gradient(to bottom right,"+d+","+d+');"></div><svg class="tvp-play" style="width:'+this.playButtonWidth+";height:"+this.playButtonHeight+";background-color:#"+this.playButtonBackgroundColor+";border:"+this.playButtonBorderWidth+" solid #"+this.playButtonBorderColor+";border-radius:"+this.playButtonBorderRadius+'%;" viewBox="0 0 200 200"><polygon fill="#'+this.playButtonIconColor+'" points="70, 55 70, 145 145, 100"></polygon></svg>';var e=function(){i.instance&&(this.removeEventListener("click",e,!1),this.parentNode.removeChild(this),i.instance.play())};c.addEventListener("click",e),this.el.appendChild(c)},this.update=function(a){for(var b=a||"",c=b.assetId,d=0,e=0;e<b.length;e++)b.assetId===c&&(d=e);i.play(b[d])},this.play=function(a,b){if(!a)return console.log("need asset");var c=!1,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(e||d(this.autonext)&&!this.autonext)&&(c=!0):(e||d(this.autoplay)&&!this.autoplay)&&(c=!0);var f=new Analytics,g={domain:d(location,"hostname")?location.hostname:"",loginId:a.loginId};d(a,"analyticsLogUrl")?(g.logUrl=a.analyticsLogUrl,f.initConfig(g)):(g.logUrl="//api.tvpage.com/v1/__tvpa.gif",f.initConfig(g)),c?(this.instance.cueVideo(a),("mp4"===a.type||this.overlay)&&this.addOverlay(a.thumbnailUrl)):this.instance.loadVideo(a)},this.resize=function(){if(i.instance&&!i.isFullScreen){var a,b;if(arguments.length&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=i.el.parentNode;a=c.clientWidth,b=c.clientHeight}i.instance.resize(a,b),this.onResize&&(this.onResize(i.initialResize,[a,b]),i.initialResize=!1)}};var j=0;!function b(){setTimeout(function(){d(a,"TVPage")&&d(a,"_tvpa")?new TVPage.player({techOrder:"html5,flash",analytics:{tvpa:i.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+i.version+"-flash.swf",onReady:function(b,c){if(i.instance=c,i.resize(),d(a,"BigScreen")&&(BigScreen.onchange=function(){i.isFullScreen=!i.isFullScreen}),a.location!==a.parent.location&&/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(navigator.userAgent)&&!a.MSStream){var e=function(a){if(a&&d(a,"data")&&d(a.data,"event")&&"tvp_carousel:modal_holder_resize"===a.data.event){var b=a.data.size||[];i.resize(b[0],b[1])}};a.removeEventListener("message",e,!1),a.addEventListener("message",e,!1)}else{var g=f(i.resize,50);a.removeEventListener("message",g,!1),a.addEventListener("resize",g)}i.el.querySelector(".tvp-progress-bar").style.backgroundColor=i.progressColor;var j=0;if(h&&h.length)for(var k=0;k<i.assets.length;k++)i.assets[k].assetId===h&&(j=k);i.current=j,i.play(i.assets[i.current]),a.DEBUG&&console.debug("endTime = "+performance.now())},onStateChange:function(a){if("tvp:media:videoended"===a){i.current++,i.assets[i.current]||(i.current=0);var b=i.assets[i.current];i.play(b,!0),i.onNext&&i.onNext(b)}},divId:i.el.id,controls:{active:!0,floater:{removeControls:i.removeControls,transcript:i.transcript}}}):++j<50?b():console.log("limit reached")},150)}()}var d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},e=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},f=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}};a.Player=c}(window,document),function(a,b){function c(a){a.hasOwnProperty("data-simple-scrollbar")||Object.defineProperty(a,"data-simple-scrollbar",new SimpleScrollbar(a))}function d(a,c){function d(a){var b=a.pageY-f;f=a.pageY,g(function(){c.el.scrollTop+=b/c.scrollRatio})}function e(){a.classList.remove("ss-grabbed"),b.body.classList.remove("ss-grabbed"),b.removeEventListener("mousemove",d),b.removeEventListener("mouseup",e)}var f;a.addEventListener("mousedown",function(c){return f=c.pageY,a.classList.add("ss-grabbed"),b.body.classList.add("ss-grabbed"),b.addEventListener("mousemove",d),b.addEventListener("mouseup",e),!1})}function e(a){for(this.target=a,this.bar='<div class="ss-scroll">',this.wrapper=b.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=b.createElement("div"),this.el.setAttribute("class","ss-content"),this.wrapper.appendChild(this.el);this.target.firstChild;)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild,d(this.bar,this),this.moveBar(),this.el.addEventListener("scroll",this.moveBar.bind(this)),this.el.addEventListener("mouseenter",this.moveBar.bind(this)),this.target.classList.add("ss-container");var c=window.getComputedStyle(a);"0px"===c.height&&"0px"!==c["max-height"]&&(a.style.height=c["max-height"])}function f(){for(var a=b.querySelectorAll("*[ss-container]"),d=0;d<a.length;d++)c(a[d])}var g=a.requestAnimationFrame||a.setImmediate||function(a){return setTimeout(a,0)};e.prototype={moveBar:function(a){var b=this.el.scrollHeight,c=this.el.clientHeight,d=this;this.scrollRatio=c/b,g(function(){d.scrollRatio>=1?d.bar.classList.add("ss-hidden"):(d.bar.classList.remove("ss-hidden"),d.bar.style.cssText="height:"+100*d.scrollRatio+"%; top:"+d.el.scrollTop/b*100+"%;right:-"+(d.target.clientWidth-d.bar.clientWidth)+"px;")})}},b.addEventListener("DOMContentLoaded",f),e.initEl=c,e.initAll=f,a.SimpleScrollbar=e}(window,document),function(a,b){function c(a,c){var f=this;this.allVideos=[],this.render=function(){var a=c.data||[];if(!(a.length<1)){f.menuFrag=b.createDocumentFragment(),f.slideMenu=b.createElement("div"),f.slideMenu.setAttribute("id","tvp-slide-menu"),f.slideMenu.innerHTML=d,f.hiddenMenu=f.slideMenu.querySelectorAll("#tvp-hidden-menu")[0],f.hamburguer=f.slideMenu.querySelectorAll("#tvp-hamburger-container")[0],f.menuFrag.appendChild(f.slideMenu);for(var g=0;g<a.length;g++){var j=a[g];f.allVideos.push(j),j.title=i(j.title,50);var k=b.createDocumentFragment(),l=b.createElement("div");l.classList.add("tvp-slide-menu-video"),l.innerHTML=h(e,j),k.appendChild(l),f.hiddenMenu.appendChild(k)}b.body.appendChild(f.menuFrag),SimpleScrollbar.initEl(f.hiddenMenu),f.bindMenuEvent(),f.bindClickEvent()}},this.bindMenuEvent=function(){for(var a=b.querySelectorAll(".tvp-hamburger"),c=a.length-1;c>=0;c--)a[c].onclick=function(){f.toggleMenu()}},this.bindClickEvent=function(){var a=b.querySelectorAll(".tvp-video");a[0].classList.add("active");for(var c=a.length-1;c>=0;c--)f.videoClick(a[c])},this.toggleMenu=function(){f.hamburguer.classList.contains("active")?f.hamburguer.classList.remove("active"):f.hamburguer.classList.add("active"),f.hiddenMenu.classList.contains("active")?f.hiddenMenu.classList.remove("active"):f.hiddenMenu.classList.add("active")},this.update=function(a,d){for(var g=a.data||[],i=0;i<g.length;i++){f.allVideos.push(g[i]),c.data.push(g[i]);var j=b.createElement("div");j.classList.add("tvp-slide-menu-video"),j.innerHTML+=h(e,g[i]),d.appendChild(j)}f.bindClickEvent()},this.videoClick=function(d){d.onclick=function(){if(this.classList.contains("tvp-video")){for(var d=b.querySelectorAll(".tvp-video"),e=d.length-1;e>=0;e--)d[e].classList.contains("active")&&d[e].classList.remove("active");this.classList.add("active");var g=this.id.split("-").pop(),h=f.allVideos.filter(function(a){return a.id===g});a.update(j(h,c)),f.toggleMenu()}}},f.render()}var d='<nav id="tvp-hidden-menu"></nav><div id="tvp-hamburger-container"><div class="tvp-hamburger tvp-hamburger-x"><span>.</span></div></div>',e='<div id="tvp-video-{id}" class="tvp-video{className}"><div class="tvp-video-image" style="background-image:url({asset.thumbnailUrl})"><div class="tvp-active-overlay"><p>Now Playing</p></div><svg class="tvp-video-play" viewBox="0 0 200 200" alt="Play video"><polygon points="70, 55 70, 145 145, 100"></polygon></svg></div><div class="tvp-video-details"><p class="tvp-video-title">{title}</p><p class="tvp-video-duration">-{asset.prettyDuration}</p></div></div>',f=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},g=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},h=function(a,b){if(a||"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return void 0!==e&&null!==e?e:""})},i=function(a,b){var c=a||"",d=b?Number(b):0;return a.length>d&&(c=c.substring(0,Number(d))+"..."),c},j=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];if(g(e))break;var h=e.asset;h.assetId=e.id,h.assetTitle=e.title,h.loginId=e.loginId,f(e,"events")&&e.events.length?(h.analyticsLogUrl=e.analytics,h.analyticsObj=e.events[1].data):h.analyticsObj={pg:f(e,"parentId")?e.parentId:f(b,"channel")?b.channel.id:0,vd:e.id,li:e.loginId},h.sources||(h.sources=[{file:h.videoId}]),h.type=h.type||"youtube",c.push(h)}return c};a.Menu=c}(window,document),function(a){var b,c,d=0,e=function(){return"tvp_"+Math.floor(50005*Math.random())},f=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},g=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},h=function(b,d){if(!c){c=!0;var e=a.createElement("script");if(e.src=b.src,!d||"function"!=typeof d)return;window[b.cbName||"callback"]=d;(b.body||a.body).appendChild(e)}},i=function(b){var c=function(a){return g(a)&&g(a,"__TVPage__")&&g(a.__TVPage__,"config")?a.__TVPage__.config:console.log("need config")},d={};if("dynamic"===b){var e=c(parent),f=a.body.getAttribute("data-id");if(!g(e,f))return console.log("need settings");d=e[f],d.name=f}else if("inline"===b&&b&&b.length){var e=c(parent);d=e[b],d.name=b}else if("static"===b){var e=c(window),f=a.body.getAttribute("data-id");if(!g(e,f))return console.log("need settings");d=e[f],d.name=f}return d},j=function(a,b,e){h({src:function(){var c=a.channel,e=c.parameters,f=g(a,"items_per_page")?a.items_per_page:8,h="//api.tvpage.com/v1/channels/"+c.id+"/videos?X-login-id="+a.loginid;for(var i in e)h+="&"+i+"="+e[i];return h+="&n="+f+"&p="+d,h+="&callback="+b}(),cbName:b},e),c=!1},k=function(b,c){if(!b||!c)return console.log("need target");var d=a.createDocumentFragment(),e=a.createElement("div");e.classList.add("tvp-player"),e.innerHTML='<div id="tvp-player-el-'+b+'" class="tvp-player-el"></div></div>',d.appendChild(e),c.appendChild(d)},l=function(c,g){var h=a.querySelectorAll(".ss-content")[0];h.addEventListener("scroll",f(function(){var f=h.scrollTop,g=a.body.clientHeight-h.scrollHeight,k=100*f/g;k=Math.round(k),(k=Math.abs(k))>=55&&k<=100&&(d++,function(a,d){var e=JSON.parse(JSON.stringify(d));b||j(d,a,function(a){b=!a.length||a.length<0,e.data=a||[],c.update(e,h)})}(e(),i("dynamic")))},30))};!function(){a.body.classList.contains("dynamic")&&function(b,c){var d=JSON.parse(JSON.stringify(c)),e=JSON.parse(JSON.stringify(c)),f=g(c,"playlist")?c.playlist:"hide";k(b,a.body),j(c,b,function(a){d.data=a||[];var c=new Player("tvp-player-el-"+b,d);"show"===f&&(e.data=a||[],l(new Menu(c,e)))})}(e(),i("dynamic"))}()}(document);