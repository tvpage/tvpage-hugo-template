!function(a,b){function c(){this.random=function(){return"tvp_"+Math.floor(50005*Math.random())},this.isset=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},this.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},this.tmpl=function(a,b){if(a||"object"==typeof b)return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;f<g;f++)e=e[d[f]];return void 0!==e&&null!==e?e:""})},this.trimText=function(a,b){var c=a||"",d=b?Number(b):0;return a.length>d&&(c=c.substring(0,Number(d))+"..."),c},this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}}a.Utils=new c}(window,document),function(a,b){function c(){this.initConfig=function(a){if(!(d(a)&&d(a.loginId)&&d(a.domain)&&d(a.logUrl)))return console.log("need config");_tvpa.push(["config",{logUrl:a.logUrl,li:a.loginId,gaDomain:a.domain}])},this.track=function(a,b){if(!a||!b||!_tvpa)return console.log("no data");_tvpa.push(["track",a,b])}}var d=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c};a.Analytics=c}(window,document),function(a,b){function c(c,h,i){if(c&&e(h)&&e(h.data)&&!(h.data.length<=0)){this.isFullScreen=!1,this.initialResize=!0,this.autoplay=!!e(h.autoplay)&&Number(h.autoplay),this.autonext=!e(h.autonext)||Number(h.autonext),this.version=e(h.player_version)?h.player_version:null,this.progressColor=e(h.progress_color)?h.progress_color:null,this.transcript=e(h.transcript)?h.transcript:null,this.removeControls=e(h.remove_controls)?h.remove_controls:null,this.analytics=e(h.analytics)?h.analytics:null,this.overlay=e(h.overlay)?h.overlay:null,this.instance=null,this.el="string"==typeof c?b.getElementById(c):c,this.onPlay=e(h.onPlay)&&"function"==typeof h.onPlay?h.onPlay:null;var j=this;this.createAsset=function(a){if(a&&"object"==typeof a&&!f(a)&&e(a,"asset")){var b=a.asset;return b.assetId=a.id,b.assetTitle=a.title,b.loginId=a.loginId,e(a,"events")&&a.events.length?(b.analyticsLogUrl=a.analytics,b.analyticsObj=a.events[1].data):b.analyticsObj={pg:e(a,"parentId")?a.parentId:e(h,"channel")?h.channel.id:0,vd:a.id,li:a.loginId},b.sources||(b.sources=[{file:b.videoId}]),b.type=b.type||"youtube",b}},this.assets=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(f(d))break;b.push(j.createAsset(d))}return b}(h.data),this.addOverlay=function(a){var c=b.createElement("div");c.className="tvp-overlay",c.style.backgroundImage='url("'+a.thumbnailUrl+'")',c.innerHTML='<div class="tvp-overlay-cover"></div><svg class="tvp-play" viewBox="0 0 200 200"><polygon points="70, 55 70, 145 145, 100"></polygon></svg>';var d=function(){(function(){this.removeEventListener("click",d,!1),this.parentNode.removeChild(this)}).call(this),j.instance&&j.instance.play()},e=this.el.querySelector(".tvp-overlay");e&&(e.removeEventListener("click",d,!1),e.parentNode.removeChild(e)),c.removeEventListener("click",d,!1),c.addEventListener("click",d,!1),this.el.appendChild(c)},this.play=function(a,b,c){if(a){var d=!1,f=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);b?(f||e(this.autonext)&&!this.autonext)&&(d=!0):(f||e(this.autoplay)&&!this.autoplay)&&(d=!0);var g=new Analytics,h={domain:e(location,"hostname")?location.hostname:"",loginId:a.loginId};e(a,"analyticsLogUrl")?(h.logUrl=a.analyticsLogUrl,g.initConfig(h)):(h.logUrl="//api.tvpage.com/v1/__tvpa.gif",g.initConfig(h)),c||(this.current=this.getCurrentIndex(a.assetId)),d?(this.instance.cueVideo(a),("mp4"===a.type||this.overlay)&&this.addOverlay(a)):this.instance.loadVideo(a)}},this.addData=function(a){if(a&&a.length){for(var b=[],c=0;c<a.length;c++)b.push(this.createAsset(a[c]));this.assets=this.assets.concat(b)}},this.resize=function(){if(j.instance&&!j.isFullScreen){var a,b;if(arguments.length&&arguments[0]&&arguments[1])a=arguments[0],b=arguments[1];else{var c=j.el.parentNode;a=c.clientWidth,b=c.clientHeight}j.instance.resize(a,b),this.onResize&&(this.onResize(j.initialResize,[a,b]),j.initialResize=!1)}},this.getCurrentIndex=function(a){for(var b=0,c=0;c<this.assets.length;c++)this.assets[c].assetId===(a||"")&&(b=c);return b},this.onReady=function(b,c){if(j.instance=c,j.resize(),e(a,"BigScreen")&&(BigScreen.onchange=function(){j.isFullScreen=!j.isFullScreen}),a.location!==a.parent.location&&d){var f=function(a){if(a&&e(a,"data")&&"tvp_solo:holder_resize"===(a.data.event||"")){var b=a.data.size||[];j.resize(b[0],b[1])}};a.removeEventListener("message",f,!1),a.addEventListener("message",f,!1)}else{var h=g(j.resize,50);a.removeEventListener("resize",h,!1),a.addEventListener("resize",h)}j.el.querySelector(".tvp-progress-bar").style.backgroundColor=j.progressColor,j.current=j.getCurrentIndex(i),j.play(j.assets[j.current],null,!0),j.onPlay(j.assets[j.current])},j.onStateChange=function(a){"tvp:media:videoended"===a&&(j.current++,j.assets[j.current]||(j.current=0),j.play(j.assets[j.current],!0)),"tvp:media:videoplaying"===a&&j.onPlay&&j.onPlay(j.assets[j.current])};var k=0;!function b(){setTimeout(function(){e(a,"TVPage")&&e(a,"_tvpa")||!(++k<50)?j.player=new TVPage.player({techOrder:"html5,flash",analytics:{tvpa:j.analytics},apiBaseUrl:"//api.tvpage.com/v1",swf:"//appcdn.tvpage.com/player/assets/tvp/tvp-"+j.version+"-flash.swf",onReady:j.onReady,onStateChange:j.onStateChange,divId:j.el.id,controls:{active:!0,floater:{removeControls:j.removeControls,transcript:j.transcript}}}):b()},150)}()}}var d=/iPad|iPhone|iPod|iPhone Simulator|iPad Simulator/.test(navigator.userAgent)&&!a.MSStream,e=function(a,b){var c=a;return b&&(c=a[b]),void 0!==c},f=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},g=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}};a.Player=c}(window,document),function(a,b){function c(a){a.hasOwnProperty("data-simple-scrollbar")||Object.defineProperty(a,"data-simple-scrollbar",new SimpleScrollbar(a))}function d(a,c){function d(a){var b=a.pageY-f;f=a.pageY,g(function(){c.el.scrollTop+=b/c.scrollRatio})}function e(){a.classList.remove("ss-grabbed"),b.body.classList.remove("ss-grabbed"),b.removeEventListener("mousemove",d),b.removeEventListener("mouseup",e)}var f;a.addEventListener("mousedown",function(c){return f=c.pageY,a.classList.add("ss-grabbed"),b.body.classList.add("ss-grabbed"),b.addEventListener("mousemove",d),b.addEventListener("mouseup",e),!1})}function e(a){for(this.target=a,this.bar='<div class="ss-scroll">',this.wrapper=b.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=b.createElement("div"),this.el.setAttribute("class","ss-content"),this.wrapper.appendChild(this.el);this.target.firstChild;)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild,d(this.bar,this),this.moveBar(),this.el.addEventListener("scroll",this.moveBar.bind(this)),this.el.addEventListener("mouseenter",this.moveBar.bind(this)),this.target.classList.add("ss-container");var c=window.getComputedStyle(a);"0px"===c.height&&"0px"!==c["max-height"]&&(a.style.height=c["max-height"])}function f(){for(var a=b.querySelectorAll("*[ss-container]"),d=0;d<a.length;d++)c(a[d])}var g=a.requestAnimationFrame||a.setImmediate||function(a){return setTimeout(a,0)};e.prototype={moveBar:function(a){var b=this.el.scrollHeight,c=this.el.clientHeight,d=this;this.scrollRatio=c/b,g(function(){d.scrollRatio>=1?d.bar.classList.add("ss-hidden"):(d.bar.classList.remove("ss-hidden"),d.bar.style.cssText="height:"+100*d.scrollRatio+"%; top:"+d.el.scrollTop/b*100+"%;right:-"+(d.target.clientWidth-d.bar.clientWidth)+"px;")})}},b.addEventListener("DOMContentLoaded",f),e.initEl=c,e.initAll=f,a.SimpleScrollbar=e}(window,document),function(a,b){function c(c,f){var g=this;this.dataMethod=b.body.classList.contains("dynamic")?"dynamic":"static",this.allVideos=[],this.init=function(){g.render(),g.cacheDOM(),g.bindMenuEvent(),g.bindClickEvent(),g.bindLoadMoreEvent(),g.listenToResize()},this.cacheDOM=function(){g.hiddenMenu=b.getElementById("tvp-hidden-menu"),g.scrollMenu=b.querySelectorAll(".ss-content")[0],g.tvpVid=b.querySelectorAll(".tvp-video"),g.hamburguer=b.getElementById("tvp-hamburger-container"),g.toggles=b.querySelectorAll(".tvp-hamburger"),g.payerCont=b.querySelectorAll(".tvp-player")[0],g.noVidDiv=b.getElementById("tvp-no-videos"),g.tvpNoVids=b.getElementsByClassName("tvp-novids")},this.render=function(){var a=f.data||[];if(!(a.length<1)){var c=b.createDocumentFragment(),h=b.createElement("div");h.setAttribute("id","tvp-slide-menu"),h.innerHTML=d,c.appendChild(h),b.body.appendChild(c);var i=b.getElementById("tvp-hidden-menu"),j=b.createElement("div"),k=b.createElement("div");j.setAttribute("id","tvp-clearfix"),k.setAttribute("id","tvp-no-videos"),i.appendChild(k),i.insertBefore(j,k),g.vidCount=0;for(var l=0;l<a.length;l++){g.vidCount++;var m=a[l];if(g.allVideos.push(m),m.title=Utils.trimText(m.title,100),j.innerHTML+=Utils.tmpl(e,m),"static"!==g.dataMethod){var n=b.createDocumentFragment(),o=b.createElement("div");o.classList.add("tvp-novids"),n.appendChild(o),k.appendChild(n)}}"static"===g.dataMethod&&(g.videoCountP=b.createTextNode(g.vidCount+" "+(g.vidCount>2?"videos":"video")),g.tvpVideoCount=b.querySelectorAll(".tvp-video-count")[0],g.tvpVideoCount.appendChild(g.videoCountP)),i.style.cssText="height:"+(b.querySelectorAll(".tvp-player")[0].offsetHeight-40)+"px;",SimpleScrollbar.initAll()}},this.bindMenuEvent=function(){for(var a=g.toggles.length-1;a>=0;a--)g.toggles[a].onclick=function(){g.toggleMenu(),g.hideMenuEvents()}},this.bindLoadMoreEvent=function(a){g.scrollMenu.addEventListener("scroll",Utils.debounce(function(){var a=g.scrollMenu.scrollTop,b=g.hiddenMenu.clientHeight-g.scrollMenu.scrollHeight,c=100*a/b;c=Math.round(c),(c=Math.abs(c))>=50&&c<=100&&"dynamic"==g.dataMethod&&g.loadMore()},30))},this.bindClickEvent=function(){for(var a=g.tvpVid.length-1;a>=0;a--)g.videoClick(g.tvpVid[a])},this.toggleMenu=function(){g.hamburguer.classList.contains("active")?g.hamburguer.classList.remove("active"):g.hamburguer.classList.add("active"),g.hiddenMenu.classList.contains("active")?g.hiddenMenu.classList.remove("active"):g.hiddenMenu.classList.add("active")},this.hideMenu=function(){g.hamburguer.classList.remove("active"),g.hiddenMenu.classList.remove("active")},this.hideMenuEvents=function(){var c=b.getElementsByClassName("tvp-overlay")[0];c&&(c.onclick=function(){g.toggleMenu()}),BigScreen.onchange=function(){g.hideMenu(),g.hiddenMenu.style.cssText=a.innerHeight-40+"px;"}},this.listenToResize=function(b){a.addEventListener("resize",function(){setTimeout(function(){var a=g.payerCont.clientHeight-40+"px;";g.hiddenMenu.style.cssText="height:"+a},50)},!1)},this.update=function(a){if(g.noVidDiv){g.deleteDivs();for(var c=0;c<a.length;c++)g.allVideos.push(a[c]),f.data.push(a[c]),g.noVidDiv.setAttribute("id","tvp-clearfix"),g.noVidDiv.innerHTML+=Utils.tmpl(e,a[c]),g.scrollMenu.appendChild(g.noVidDiv)}else for(var d=b.createDocumentFragment(),h=b.createElement("div"),c=0;c<a.length;c++)g.allVideos.push(a[c]),f.data.push(a[c]),h.setAttribute("id","tvp-clearfix"),h.innerHTML+=Utils.tmpl(e,a[c]),d.appendChild(h),g.scrollMenu.appendChild(h);g.cacheDOM(),g.bindClickEvent()},this.deleteDivs=function(){for(var a=g.tvpNoVids.length-1;a>=0;a--)g.noVidDiv.removeChild(g.tvpNoVids[a])},this.clearActiveItems=function(){for(var a=g.tvpVid.length-1;a>=0;a--)g.tvpVid[a].classList.contains("active")&&g.tvpVid[a].classList.remove("active")},this.setActiveItem=function(a){for(var b=g.tvpVid.length-1;b>=0;b--){var c=g.tvpVid[b];c.id.split("-").pop()!==a||c.classList.contains("active")||(this.clearActiveItems(),c.classList.add("active"))}},this.videoClick=function(a){a.onclick=function(){if(this.classList.contains("tvp-video")){g.clearActiveItems(),this.classList.add("active");var a=this.id.split("-").pop(),b=g.allVideos.filter(function(b){return b.id===a});c.play(c.createAsset(b[0])),g.toggleMenu()}}},g.init()}var d='<nav id="tvp-hidden-menu" ss-container></nav><div id="tvp-hamburger-container"><div class="tvp-hamburger tvp-hamburger-x"><span></span></div><p class="tvp-video-count"></p></div>',e='<div id="tvp-video-{id}" class="tvp-video{className}"><div class="tvp-video-image" style="background-image:url({asset.thumbnailUrl})"><div class="tvp-active-overlay"><p>Now Playing</p></div><svg class="tvp-video-play" viewBox="0 0 200 200" alt="Play video"><polygon points="70, 55 70, 145 145, 100"></polygon></svg></div><div class="tvp-video-details"><p class="tvp-video-title">{title}</p><p class="tvp-video-duration">- {asset.prettyDuration}</p></div></div>';a.Menu=c}(window,document),function(a){function b(){a.body.classList.contains("dynamic")&&function(b,g){var h=null,k=JSON.parse(JSON.stringify(g)),l=JSON.parse(JSON.stringify(g)),m=Utils.isset(g,"playlist")?g.playlist:"hide",n=null;j(b,a.body),k.onPlay=function(a){n.hideMenu(),n.setActiveItem(a.assetId)},i(g,b,function(a){k.data=a||[],h=new Player("tvp-player-el-"+b,k),"show"===m&&(l.data=a||[],n=new Menu(h,l))}),Menu.prototype.loadMore=function(){e||f||(c++,f=!0,i(g,b,function(a){f=!1,e=!a.length||a.length<d,h.addData(a),n.update(a)}))}}(Utils.random(),h("dynamic"))}var c=0,d=6,e=!1,f=!1,g=function(b,c){var d=a.createElement("script");if(d.src=b.src,c&&"function"==typeof c){window[b.cbName||"callback"]=c;(b.body||a.body).appendChild(d)}},h=function(b){var c=function(a){if(Utils.isset(a)&&Utils.isset(a,"__TVPage__")&&Utils.isset(a.__TVPage__,"config"))return a.__TVPage__.config},d={};if("dynamic"===b){var e=c(parent),f=a.body.getAttribute("data-id");if(!Utils.isset(e,f))return;d=e[f],d.name=f}else if("inline"===b&&b&&b.length){var e=c(parent);d=e[b],d.name=b}else if("static"===b){var e=c(window),f=a.body.getAttribute("data-id");if(!Utils.isset(e,f))return;d=e[f],d.name=f}return d},i=function(a,b,e){g({src:function(){var e=a.channel,f=e.parameters,g="//api.tvpage.com/v1/channels/"+e.id+"/videos?X-login-id="+a.loginid;for(var h in f)g+="&"+h+"="+f[h];return g+="&n="+d+"&p="+c,g+="&callback="+b}(),cbName:b},e)},j=function(b,c){if(b&&c){var d=a.createDocumentFragment(),e=a.createElement("div");e.classList.add("tvp-player"),e.innerHTML='<div id="tvp-player-el-'+b+'" class="tvp-player-el"></div></div>',d.appendChild(e),c.appendChild(d)}},k=function(a){return void 0===a};if(k(window.Utils)||k(window.Player)||k(window.Menu)||k(window.SimpleScrollbar)){var l=0;!function a(){setTimeout(function(){(k(window.Utils)||k(window.Player)||k(window.Menu)||k(window.SimpleScrollbar))&&++l<50?a():b()},150)}()}else b()}(document);